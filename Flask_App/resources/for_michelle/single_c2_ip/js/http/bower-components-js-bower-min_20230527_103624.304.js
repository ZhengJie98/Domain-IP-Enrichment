var homeApp=angular.module("homeApp",["ngRoute","ui.bootstrap","chart.js","sharedTools"]),luiApp=angular.module("luiApp",["ngRoute","ui.bootstrap","sharedTools","chart.js","datatables","angularFileUpload"]),advApp=angular.module("advApp",["ngRoute","ui.bootstrap","chart.js","sharedTools"]),installApp=angular.module("installApp",["ngRoute","ui.bootstrap","chart.js","sharedTools"]),sharedTools=angular.module("sharedTools",["ngCookies"]);
sharedTools.factory("language",["$http","$cookies","$location","terminalJson",function(a,b,c,d){var e="/home/language",f=[],g=["help_panel.json"];language_map={en:"English",es:"Español",zh:"中文",pt:"Português",ja:"日本語",he:"עִברִית",ar:"عربى",de:"Deutsche",fr:"français",it:"italiano",sv:"svenska",nl:"Nederlands",hi:"हिंदी",th:"ไทย"};var h=function(){return a.get("/api/home/language_list").then(function(a){f=a.data;for(var b=0;b<f.length;b++){var c=f[b].locale.substring(0,2);f[b].name=language_map[c],f[b].short_date="MM/dd/yyyy",f[b].full_date="MM/dd/yyyy HH:mm:ss",f[b].fraction_comma=!1}0===f.length&&(f=[{name:"English",locale:"en-US",fraction_comma:!1,short_date:"MM/dd/yyyy",full_date:"MM/dd/yyyy HH:mm:ss"},{name:"Português",locale:"pt-BR",fraction_comma:!1,short_date:"dd/MM/yyyy",full_date:"dd/MM/yyyy HH:mm:ss"},{name:"Español",locale:"es-CO",fraction_comma:!1,short_date:"dd/MM/yyyy",full_date:"dd/MM/yyyy HH:mm:ss"}])})},i=function(a){if(!g.length)return!1;for(var b=0;b<g.length;b++)if(a===g[b])return!0;return!1},j=function(a,b){var c;a[b]="N/A",d.load(e,a,c).then(function(d){a[b]=a[c].language})},k=function(a,f){a[f]=n("en-US");var g,h=c.search().locale,i=b.get("cur_language");if(h&&l(h))return void(a[f]=n(h));var j=n(i);if(i&&""!==j)return void(a[f]=j);t("en-US"),a[f]=n("en-US"),d.load(e,a,g).then(function(b){var c=a[g].language;c&&"N/A"!=c&&(tmp_locale=c.replace("_","-"),n(tmp_locale)&&(a[f]=n(tmp_locale),t(tmp_locale)))})},l=function(a){for(var b=0;b<f.length;b++)if(f[b].locale===a)return!0;return!1},m=function(a){for(var b=0;b<f.length;b++)if(f[b].name===a)return f[b].locale;return""},n=function(a){for(var b=0;b<f.length;b++)if(f[b].locale===a)return f[b].name;return""},o=function(b,c,d,e){a.get(d).then(function(a){b[c]=a.data})},p=function(a,b,c){if(b.length)for(var d=0;d<b.length;d++){var e=b[d].split(".")[0],f="/languages/"+m(c)+"/"+b[d];i(b[d])&&(f="/dyn_http/"+m(c)+"/"+b[d]),o(a,e,f,c)}},q=function(){for(var a=[],b=0;b<f.length;b++)a.push(f[b].name);return a},r=function(){for(var a={},b=0;b<f.length;b++)a[f[b].name]=f[b].locale.split("-")[1].toLowerCase();return a},s=function(){for(var a={},b=0;b<f.length;b++)a[f[b].name]={short_date:f[b].short_date,full_date:f[b].full_date};return a},t=function(a){var c=new Date,d=new Date(c.getFullYear()+10,c.getMonth(),c.getDate());b.put("cur_language",a,{expires:d})},u=function(a,b){a.$on("onlanguagechange",function(c,d){p(a,b,d.selected_language);var e=m(d.selected_language);if(t(e),""!==n(e))return void t(e);t("en-US")})};return{getDateFormatMap:s,getAbvsMap:r,loadOnChange:u,getLanguages:q,initLanguages:function(a,b){u(a,b),p(a,b,a.selected_language)},loadLanguages:p,getLocale:m,getDefaultLanguage:k,getLanguageLocale:j,sync:h}}]);
function DihedralCheck(){}DihedralCheck.a=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],DihedralCheck.inverse=[0,4,3,2,1,5,6,7,8,9],DihedralCheck.p=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],DihedralCheck.computeCheckDigitForAlphaNumeric=function(a){return DihedralCheck.computeCheck(DihedralCheck.convertAlpha2Numeric(a))},DihedralCheck.verify=function(a,b){var c="";c+=b,c+=DihedralCheck.convertAlpha2Numeric(a);try{for(var d=0,e=0;e<c.length;++e)d=this.a[d][this.p[e%8][c.charCodeAt(e)-48]];return 0===d}catch(f){return!1}},DihedralCheck.computeCheck=function(a){for(var b=0,c=0;c<a.length;++c)b=this.a[b][this.p[(c+1)%8][a.charCodeAt(c)-48]];return this.inverse[b]},DihedralCheck.convertAlpha2Numeric=function(a){for(var b="",c=0;c<a.length;c++)a.charCodeAt(c)>=48&&a.charCodeAt(c)<=57?b+=a.charAt(c):b+=a.charCodeAt(c);return b};
sharedTools.factory("terminalJson",["$http",function(a){var b=function(b,c,d,e){return void 0!==e?a({url:b,method:"GET",params:e}).then(function(a){return c[d]=a.data,a.data}):a.get(b).then(function(a){return c[d]=a.data,a.data})},c=function(a,c,d,e,f){return b("/api"+a,c,d,f)},d=function(b,c){return a.post("/api"+b,c)},e=1e3,f=[],g=[],h=[],i=function(b,c){var d=null;d=void 0!==c?a({url:b,method:"GET",params:c}).then(function(a){return a.data}):a.get(b).then(function(a){return a.data}),d.then(function(a){h.length>20&&(f.shift(),g.shift(),h.shift()),f.push(a.Data[0].WANRx),g.push(a.Data[0].WANTx),a.Data[0].Time=a.Data[0].Time.split(" ").pop(),h.push(a.Data[0].Time)},function(a){console.log(a)}).finally(function(){setTimeout(function(){i("/api/system/getTrafficMonitorData")},e)})};return{load:c,post:d,downloadarr:f,uploadarr:g,labelarr:h,liveget:i}}]);
sharedTools.factory("installState",["terminalJson",function(a){var b=function(a){window.localStorage.setItem("mobileInstall",a)},c=function(){return window.localStorage.getItem("mobileInstall")},d={RESTART:"reinstall restart",INPUT_PARMS:"input parms",POINTING:"pointing",RANGING:"ranging",REG:"registration",REG_DONE:"reg done",INSTALL_DONE:"install done",DEVICEID_SWAP:"deviceid_swap",DEVICEID_SWAP_WRONG_BEAM:"deviceID_swap_wrong_beam",DEVICEID_SWAP_WAIT:"deviceID_swap_wait"},e=function(a){for(var b in d)if(d[b]===a)return b;return""},f=function(a){return a in d?d[a]:""},g=function(b,c){return a.load("/install/install_page",b,c)};return{pages:d,getInstalled:function(a,b){g(a,b).then(function(c){a[b]=c.page===d.INSTALL_DONE})},getInstallPage:g,getStateFromValue:e,getValueFromState:f,setIsMobileInstall:b,getIsMobileInstall:c}}]);
sharedTools.factory("sbcInternalState",["terminalJson",function(a){var b={STATE_BEAM_SEL_ESN:0,STATE_BEAM_SEL_DEVID:1,STATE_INSTALL_PARAMS:2,STATE_COARSE_POINTING:3,STATE_FINE_POINTING:4,STATE_POINTING_VALIDATION:5,STATE_RANGING:6,STATE_REG_CONF:7,STATE_INSTALL_COMPLETE:8,STATE_MAX_SBC_MAIN_STATE:9},c={SBC_INIT_STATE:0,SBC_REG_INIT_STATE:1,SBC_CHALLANGE_INIT_STATE:2,SBC_REG_COMPLETE_STATE:3,SBC_REG_BACK_OFF_STATE:4,SBC_TERMINAL_BARRED_STATE:5,SBC_REGISTRATION_ABORT:6,SBC_MAX_REGISTRATION_STATE:7},d={TERMINAL_NOT_INSTALLED:0,TERMINAL_REGISTERED:1,TERMINAL_INSTALLED_NEW:2,TERMINAL_INSTALLED_ALREADY:3,TERMINAL_INSTALL_NOT_REQUIRED:4},e=function(a){for(var b in d)if(d[b]===a)return b;return""},f=function(a){return status in d?d[status]:""},g=function(b,c){return a.load("/install/installation_status",b,c)},h=function(a){for(var c in b)if(b[c]===a)return c;return""},i=function(a){return a in b?b[a]:""},j=function(a){for(var b in c)if(c[b]===a)return b;return""},k=function(a){return a in c?c[a]:""};return{state:b,reg_state:c,install_status:d,getRegState:function(b,c){return a.load("/install/reg_state",b,c)},getSBCInternalState:function(b,c){return a.load("/install/sbc_internal_state",b,c)},getInstallStatus:g,getRegStateFromIndex:j,getIndexFromRegState:k,getSBCStateFromIndex:h,getIndexFromSBCState:i,getStatusFromIndex:e,getIndexFromStatus:f}}]);
sharedTools.factory("treeTools",function(){var a=function(b){for(var c=0;c<b.length;c++)b[c].children&&b[c].children.length>0&&(b[c].limit=0,a(b[c].children))},b=function(a,c){for(var d=0;d<a.length;d++)a[d].children&&(a[d].expanded=c,c&&!a[d].limit?a[d].limit=a[d].children.length:!c&&a[d].limit&&(a[d].limit=0),b(a[d].children,c))};return{transformTree:b,setLazyLoad:a}});
sharedTools.directive("hnsTreeModel",["$compile","$location","$route","$window",function(a,b,c,d){return{restrict:"A",link:function(e,f,g){var h=g.hnsTreeModel,i=g.treeId||"tree",j=g.nodeLabel||"name",k=(g.nodePath,g.nodeChildren||"children"),l=(g.nodeTarget,g.searchQuery),m=g.translateTable,n="node."+j,o="";void 0!==m&&(n=m+"["+n+"]",o=' translate-table="'+m+'" ');var p=g.limitLoading,q="";p&&(q=" | limitTo:"+p);var r='<ul><li ng-repeat="node in '+h+q+" | filter:"+l+'"><i class="fa fa-plus" ng-show="node.'+k+'.length && !node.expanded" ng-click="'+i+'.selectNodeHead(node)"></i> <i class="fa fa-minus" ng-show="node.'+k+'.length && node.expanded" ng-click="'+i+'.selectNodeHead(node)"></i> <i class="fa fa-file-o" ng-hide="node.'+k+'.length"></i> <span ng-show="node.'+k+'.length" ng-click="'+i+'.selectNodeLabel(node)">{{'+n+'}}</span><a class="pointer" ng-hide="node.'+k+'.length" ng-click="visit(node);'+i+'.selectNodeLabel(node)" ng-class="node.selected">{{'+n+'}}</a><div ng-hide="!node.expanded" search-query='+l+' limit-loading="node.limit" tree-id="'+i+'" hns-tree-model="node.'+k+'" node-label='+j+" node-children="+k+o+"></div></li></ul>";e.visit=function(a){if(void 0===a.url)return console.error("Missing tree menu node.url:",a);if(void 0!==a.target)return d.open(a.url,a.target);var e="";e="#"==a.url[0]?a.url.slice(1):a.url,e!==b.path()?b.path(e):c.reload()},h&&(g.treeMenu&&(e[i]=e[i]||{},e[i].selectNodeHead=e[i].selectNodeHead||function(a){a.limit||(a.limit=a.children.length),a.expanded=!a.expanded},e[i].selectNodeLabel=e[i].selectNodeLabel||function(a){a.children?a.children.length&&(a.limit||(a.limit=a.children.length),a.expanded=!a.expanded):(e[i].currentNode&&e[i].currentNode.selected&&(e[i].currentNode.selected=void 0),a.selected="selected",e[i].currentNode=a)}),angular.element(document).ready(function(){f.html("").append(a(r)(e))}))}}}]);