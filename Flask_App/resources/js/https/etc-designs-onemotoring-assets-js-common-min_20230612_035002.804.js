var sectionAccordion={toggleAccordion:function s(){var e=this;$(".accordion__header").click(function(){var s=$(this).closest(".accordion"),t=$(this);!e.checkIfLink(t)&&(s.hasClass("is-opened")?e.close(s):e.open(s))}),$(".single-open--accordion .accordion__header").click(function(){var s=$(this).closest(".accordion");e.close($(".single-open--accordion .accordion")),e.open(s)}),$(".all_accordion_close").click(function(){$(".container .standard-content .accordion__header").closest(".accordion").each(function(s){$(this).hasClass("is-opened")&&e.close($(this))})}),$(".all_accordion_open").click(function(){$(".container .standard-content .accordion__header").closest(".accordion").each(function(s){$(this).hasClass("is-opened")||e.open($(this))})})},open:function s(e){e.addClass("is-opened"),$(e).find(">.accordionBody").fadeToggle("slow",function(){})},close:function s(e){e.removeClass("is-opened"),$(e).find(">.accordionBody").fadeToggle("slow",function(){})},checkIfLink:function s(e){return e.is("a")},init:function s(){$(".htcgclass").each(function(s){$(this).parents(".accordion1m").addClass("is-opened")}),this.toggleAccordion()}};function sessionExpiredRedirect(){dslogout()}function initSessionTimeout(s){var e,t,n,o=!1,i=!1;function a(s,e){s?s.target:window.event.srcElement;var t=$("#sessionExpire:visible");(null==t||0==t.length)&&(localStorage.setItem("sessionSlide","isStarted"),r())}function r(){clearInterval(n),clearInterval(e),localStorage.setItem("sessIdleTimeCounter",$.now()),n=setInterval(c,1e3),i=!1}function c(){var s,a=parseInt(localStorage.getItem("sessIdleTimeCounter"))+54e4;$.now()>a+62e3?($("#sessionExpire").show(),$("#session-expire-warning").hide(),$("#session-expired").show(),$("body").css("overflow","hidden"),clearInterval(t),clearInterval(n),o=!0,$.ajax({type:"POST",url:"/vrls/sso/v1/jwt/session/logout/1m",success:function(s){window.location.href="https://www.lta.gov.sg/esso/logout?return_url=https://onemotoring.lta.gov.sg/"},error:function(s,e,t){window.location.href="https://www.lta.gov.sg/esso/logout?return_url=https://onemotoring.lta.gov.sg/"}})):$.now()>a&&($("#sessionExpire").show(),i||(localStorage.setItem("sessionSlide",!1),s=60,e=setInterval(function(){"isStarted"==localStorage.getItem("sessionSlide")?($("#session-expire-warning").hide(),r(),clearInterval(e)):"loggedOut"==localStorage.getItem("sessionSlide")?($("#session-expire-warning").hide(),$("#session-expired").show(),window.location.href="/"):($("#seconds-timer").html(s),s-=1)},1e3),$("#seconds-timer").empty(),$("#session-expired").hide(),$("#session-expire-warning").show(),$("body").css("overflow","hidden"),i=!0))}localStorage.setItem("sessionSlide","isStarted"),$('<div id="sessionExpire"></div>').css("position","fixed").css("display","none").css("top","0").css("background-color","rgba(155, 155, 155, 0.3)").css("width","100%").css("height","100%").css("z-index","9999").appendTo($("body")),$('<div id="session-expire-warning" class="session-modal"><div class="session-modal-content"><p>Your session will expire in <span id="seconds-timer"></span> seconds. Do you want to extend the session?</p><div style="text-align:center;"><button id="btnOk" type="button" class="btn btn-default">Ok</button><button id="btnSessionExpiredCancelled" type="button" class="btn btn-default">Cancel</button></div></div></div>').appendTo($("#sessionExpire")),$("#btnSessionExpiredCancelled").click(function(){$("#session-expire-warning").hide(),$("#sessionExpire").hide(),dslogout()}),$("#btnOk").click(function(){$("#session-expire-warning").hide(),$("#sessionExpire").hide(),$("body").css("overflow","initial"),r(),clearInterval(e),localStorage.setItem("sessionSlide","isStarted"),$.ajax({type:"POST",url:"/vrls/sso/v1/jwt/session/extend",success:function(s){"100"!=$.parseJSON(s).status.statusCode&&dslogout()},error:function(s,e,t){dslogout()}})}),$("#btnLogoutNow").click(function(){$("#session-expired").hide(),$("body").css("overflow","initial"),dslogout()}),$(document).bind("keypress.session",function(s,e){a(s,e)}),$(document).bind("mousedown keydown",function(s,e){a(s,e)}),$(window).scroll(function(s){localStorage.setItem("sessionSlide","isStarted"),r()}),setInterval(function(){if(!o)return $.ajax({url:"/vrls/sso/v1/jwt/session/extend",type:"post",dataType:"json",success:function(s){"100"!=$.parseJSON(s).status.statusCode&&dslogout()}}),!0},3e5),t=setInterval(function s(){},3e5),r()}var contentPath="/content/onemotoring/home",coeHtml="";function displayLoginBtn(){$("#desktop_navLinks").css("padding-right","0"),$("#m_login_btn").html(" "),$('<span class="off-canvas__control logout-btn-1"><i class="fa fa-user" aria-hidden="true"></i>&nbsp;&nbsp;<span>Dashboard</span></span>').appendTo("#dashboard_btn").click(function(){window.location.href=contentPath+"/dashboard.html"}),$('<span class="off-canvas__control logout-btn-1">|&nbsp;&nbsp;<span>Logout</span></span>').appendTo("#dashboard_btn").click(function(){dslogout()}),$(".header-mobile .mobile_navigation .off-canvas__content").css("top","100px"),1140>$(window).width()&&($(".main_par").css("margin-top","24px"),$(".landing__banner-bar").css("margin-top","24px")),$("#login-btn").replaceWith('<div class="right nav-dashboard-links" id="logout-btn-wrapper" style="display: block;"><a class="" id="dashboard-btn" style="display:inline;" href="'+contentPath+'/dashboard.html">Dashboard</a> <span>|</span><a class="" id="logout-btn" style="display:inline;" href="javascript:void(0);" onclick="dslogout();">Logout</a></div>'),$("#mobile_login_menu").html('<div class="accordion__header no-arrow" onclick="javascript:window.location.href=\''+contentPath+"/dashboard.html'\">Dashboard</div>"),$("#mobile_login_menu").after('<li class="accordion"><a href="javascript:void(0);" onclick="dslogout();" class="accordion__header no-arrow">Logout</a></li>'),initSessionTimeout(contentPath)}function fontsizer(){$(".content_container,.footer_container").find("div,table,h1,h2,h3,h4,h5,a,p,span,li").not(".announcement-panel,.announcement-panel *").jfontsize({btnMinusMaxHits:5,btnPlusMaxHits:10,sizeChange:1})}function anchorScroll(s){"use strict";var e,t;return e=150,(t=$("#"+s)).hasClass("accordion__header")&&(t.closest(".accordion").hasClass("is-opened")||t.click()),setTimeout(function(){$("html,body").animate({scrollTop:t.offset().top-e},"fast")},500),!1}function outsideToHash(){"use strict";var s;window.location.hash&&!window.location.hash.startsWith("#/")&&anchorScroll(s=window.location.hash.substring(1))}function insideToHash(s){"use strict";var e;anchorScroll(e=$(s).attr("href").substring(1))}function dslogout(){$.ajax({type:"POST",url:"/vrls/sso/v1/jwt/session/logout/1m",success:function(s){window.location.href="https://www.lta.gov.sg/esso/logout?return_url=https://onemotoring.lta.gov.sg/"},error:function(s,e,t){window.location.href="https://www.lta.gov.sg/esso/logout?return_url=https://onemotoring.lta.gov.sg/"}})}function requireLogin(){$(".landing__banner-bar").css("margin-bottom","50px"),$(".content-container").css("margin-left","0"),$("#loginModalTrigger").magnificPopup({items:{type:"inline",src:$('<div class="modal"><h5>Access your dashboard</h5><div style="text-align:center;"><div class="hrln" style="width:45px;"></div><img height="16px" width="90px" src="/etc/designs/onemotoring/images/singpass.png" alt="Singpass"><div class="hrln2" style="width:45px;"></div></div><p><a id="singPass-login" class="btn btn--alert" onclick="splogin()">For Individual Users</a></p><p><a id="corpPass-login" class="btn" onclick="cplogin()">For Business Users</a></p><br><br></div>')},closeBtnInside:!0,callbacks:{open:function s(){$(".modal h5").text("Please login to continue")}}}),$("#loginModalTrigger").click()}function splogin(){sessionStorage.clear(),$(".dashboard-show").hide(),$(".dashboard-hide").show(),localStorage.setItem("login-via","ndi-sp"),$.ajax({type:"POST",url:"/vrls/sso/v1/jwt/authurl/ndi-sp",success:function(s){var e=$.parseJSON(s);"100"==e.status.statusCode?window.location.href=e.url:window.location.href="/errorpage/highload.html"},error:function(s,e,t){window.location.href="/errorpage/highload.html"}})}function cplogin(){sessionStorage.clear(),$(".dashboard-show").hide(),$(".dashboard-hide").show(),localStorage.setItem("login-via","ndi-cp"),$.ajax({type:"POST",url:"/vrls/sso/v1/jwt/authurl/ndi-cp",success:function(s){var e=$.parseJSON(s);"100"==e.status.statusCode?window.location.href=e.url:window.location.href="/errorpage/highload.html"},error:function(s,e,t){window.location.href="/errorpage/highload.html"}})}function getAllUrlParams(s){var e=s?s.split("?")[1]:window.location.search.slice(1),t={};if(e)for(var n=(e=e.split("#")[0]).split("&"),o=0;o<n.length;o++){var i=n[o].split("="),a=i[0],r=void 0===i[1]||i[1];if(a=a.toLowerCase(),"string"==typeof r&&(r=r.toLowerCase()),a.match(/\[(\d+)?\]$/)){var c=a.replace(/\[(\d+)?\]/,"");if(t[c]||(t[c]=[]),a.match(/\[\d+\]$/)){var l=/\[(\d+)\]/.exec(a)[1];t[c][l]=r}else t[c].push(r)}else t[a]?(t[a]&&"string"==typeof t[a]&&(t[a]=[t[a]]),t[a].push(r)):t[a]=r}return t}function filterByTexts(s,e,t){var n=e,o=!1;$(s).find(t).each(function(){null!=e&&""!=e?-1!=$(this).text().toUpperCase().indexOf(n.toUpperCase())?($(this).show(),o=!0):$(this).hide():($(this).show(),o=!0)}),!1==o?$("#filterMsg").html("We are unable to find any results."):$("#filterMsg").html("")}function getAllUrlParamsRedirect(s){var e=s?s.split("?")[1]:window.location.search.slice(1),t={};if(e)for(var n=(e=e.split("#")[0]).split("&"),o=0;o<n.length;o++){var i=n[o].split("="),a=i[0],r=void 0===i[1]||i[1];if(1,a.match(/\[(\d+)?\]$/)){var c=a.replace(/\[(\d+)?\]/,"");if(t[c]||(t[c]=[]),a.match(/\[\d+\]$/)){var l=/\[(\d+)\]/.exec(a)[1];t[c][l]=r}else t[c].push(r)}else t[a]?(t[a]&&"string"==typeof t[a]&&(t[a]=[t[a]]),t[a].push(r)):t[a]=r}return t}function setCookie(s,e,t){var n=new Date;n.setTime(n.getTime()+864e5*t);var o="expires="+n.toUTCString();document.cookie=s+"="+e+";"+o+";path=/"}function getCookie(s){for(var e=s+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var o=t[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}String.prototype.startsWith||(String.prototype.startsWith=function(s,e){return e=e||0,this.indexOf(s,e)===e}),$.getJSON("/vrls/validateLogin?t="+new Date().getTime(),function(s){s&&"Y"==s.status&&$.ajax({url:"/vrls/sso/v1/jwt/session/status",type:"post",dataType:"json",success:function(s){"100"==s.status.statusCode?displayLoginBtn():dslogout()}})}),$(function(){var s=$(".scroll-to-top");$(window).scroll(function(){$(window).scrollTop()>100?$(s).css("opacity","1"):$(s).css("opacity","0")}),$(window).scrollTop()>100?$(s).css("opacity","1"):$(s).css("opacity","0"),$(s).click(function(){return $("html, body").animate({scrollTop:0},800),!1}),offcanvas.init(),sectionAccordion.init(),$("select:not(.imap-select,#f1-app .dropdown)").niceSelect(),$(".menu-search input,#traffic_search").keypress(function(s){if(13==s.which)return $(this).siblings("button").click(),!1}),$("a.callout").each(function(){var s=$(this),e={my:"top right",at:"bottom right",container:$("div.nav__actions"),viewport:$(window)};s.is(".callout--panel-mobile")&&(e={my:"top left",at:"bottom left"}),$(this).qtip({show:"click",hide:"unfocus click",content:{text:function s(e,t){return $($(this).data("callout-content")).html()}},position:e})}),$(window).on("resize scroll",window.throttle(function s(){$("a.callout").qtip("hide")},500))}),$(document).ready(function(){"use strict";$("a[href^='#']").bind("click",function(){insideToHash(this)}),outsideToHash()}),function(s){s.fn.jfontsize=function(e){var t=s(this);e&&(e=s.extend({btnMinusClasseId:"#jfontsize-minus",btnDefaultClasseId:"#jfontsize-default",btnPlusClasseId:"#jfontsize-plus",btnContainerId:"#top_resizer",btnMinusMaxHits:10,btnPlusMaxHits:4,sizeChange:1,maxSize:32},e));var n=0,o=[];s(this).each(function(e){fsize=s(this).css("font-size"),o[e]=parseInt(fsize.replace("px",""))}),s(e.btnMinusClasseId+", "+e.btnDefaultClasseId+", "+e.btnPlusClasseId).removeAttr("href"),s(e.btnMinusClasseId+", "+e.btnDefaultClasseId+", "+e.btnPlusClasseId).css("cursor","pointer"),s(e.btnMinusClasseId).click(function(){s(e.btnPlusClasseId).removeClass("jfontsize-disabled"),s(e.btnContainerId).removeClass("maxResizer"),s(e.btnContainerId).hasClass("minResizer")||s(e.btnContainerId).addClass("minResizer"),n>-e.btnMinusMaxHits&&(n--,t.each(function(t){fontsize=o[t]+n*e.sizeChange,s(this).css("font-size",fontsize+"px")})),n==-e.btnMinusMaxHits&&s(e.btnMinusClasseId).addClass("jfontsize-disabled")}),s(e.btnDefaultClasseId).click(function(){s(e.btnContainerId).removeClass("minResizer"),s(e.btnContainerId).removeClass("maxResizer"),s(e.btnMinusClasseId).removeClass("jfontsize-disabled"),s(e.btnPlusClasseId).removeClass("jfontsize-disabled"),n=0,t.each(function(e){s(this).css("font-size",o[e]+"px")})}),s(e.btnPlusClasseId).click(function(){s(e.btnContainerId).removeClass("minResizer"),s(e.btnContainerId).hasClass("maxResizer")||s(e.btnContainerId).addClass("maxResizer"),s(e.btnMinusClasseId).removeClass("jfontsize-disabled"),n<e.btnPlusMaxHits&&(n++,t.each(function(t){(fontsize=o[t]+n*e.sizeChange)<=e.maxSize&&s(this).css("font-size",fontsize+"px")})),n==e.btnPlusMaxHits&&s(e.btnPlusClasseId).addClass("jfontsize-disabled")})}}(jQuery);var isRedirectionPage=!1;/home.html/.test(window.location.href)&&(isRedirectionPage=!0),/redirection/.test(window.location.href)&&(isRedirectionPage=!1),/new_domain_name/.test(window.location.href)&&(isRedirectionPage=!1),getCookie("isNewUser")&&(isRedirectionPage=!1),null!=localStorage.getItem("isNewUser")&&(isRedirectionPage=!1,setCookie("isNewUser","true","3650")),isRedirectionPage&&$(window).on("load",function(){setCookie("isNewUser","true","3650"),localStorage.setItem("isNewUser","true"),startTutorial()}),$(function(){$(" .header-banner").hide(),$("#helpful-link > .fa-caret-up").hide(),$("#helpful-link").on("click",function(){$("#helpful-link > .fa-caret-up").toggle(),$("#helpful-link > .fa-caret-down").toggle(),$(".header-banner").toggle(),$(".header-wrap").toggleClass("top-spacer"),$(".content_container").toggleClass("top-spacer")})});