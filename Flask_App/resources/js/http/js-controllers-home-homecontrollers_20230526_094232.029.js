homeApp.controller("customerHomeController",["$sce","$scope","$location","$route","$window","$interval","language","installState","terminalJson",function(a,b,c,d,e,f,g,h,i){b.blocked=!1,g.sync().then(function(){g.getLanguageLocale(b,"language_locale"),b.abv=g.getAbvsMap(),b.languages=g.getLanguages(),g.getDefaultLanguage(b,"selected_language"),g.initLanguages(b,["home.json","side_bar.json","lui_block.json","help_panel.json","lim_frame.json"])}),b.$watch("selected_language",function(){b.$broadcast("onlanguagechange",{selected_language:b.selected_language})}),b.associated=!0,b.wifi=!1,b.wifiLANAddr="",b.installed=!0,b.standalone=!0,b.hamburgerCollapsed=!0,b.ss_led={color:"green"},b.si_led={color:"green"};var j=function(){b.led_settings=!1,i.load("/system/led/dimming/enabled",b,"result").then(function(){b.result.enabled&&(b.led_settings=!0)}),h.getInstalled(b,"installed"),i.load("/system/terminal_info",b,"deviceinfo").then(function(){i.load("/install/nsp_links",b,"nsp_links").then(function(){b.suffix=b.deviceinfo.esn,b.nsp_links[0].bus_cid_name&&(b.suffix+="&"+b.nsp_links[0].bus_cid_name+"="+b.nsp_links[0].bus_cid_val)})}),i.load("/home/status/led",b,"ss_led"),i.load("/home/lui_access_level",b,"access").then(function(){"advanced"===b.access.level?b.access.url="/cgi-bin/index.cgi?Command=1":b.access.url="limited.html"},function(a){403===a.status&&(b.blocked=!0)}),i.load("/system/wifi/lan",b,"wifiJSON").then(function(){""===b.wifiJSON.addr?(b.wifi=!1,b.standalone=!0):(b.wifi=!0,b.wifiLANAddr=b.wifiJSON.addr,b.standalone=!1)}),i.load("/home/status/association",b,"assoc_status").then(function(){b.associated=b.assoc_status.associated;var a=b.assoc_status.association_state;"associated"===a||"monitoring_load"===a?!1===b.assoc_status.walled_garden?b.assoc_status.status="good":b.assoc_status.status="warning":b.assoc_status.status="creating_ipgw_pool"===a||"selecting_ipgw"===a||"associating"===a?"warning":"bad"}),i.load("/home/nsp_feature1",b,"obj").then(function(){b.DataAllowanceStatusTableDisplay=b.obj.DataAllowanceStatusTableDisplay})};b.toTrustedHTML=function(b){return a.trustAsHtml(b)},b.sidebar_active={},b.setSidebarActive=function(a){for(var c in b.sidebar_active)b.sidebar_active[c]=!1;a&&(b.sidebar_active[a]=!0)},b.route=function(a){a!==c.path()?c.path(a):d.reload()},b.link=function(a){e.open(a,"install")},b.select=function(a){b.selected_language=a,i.load("/home/cur_locale/"+g.getLocale(a),b,"result")},b.toggleDropdown=function(a){a.preventDefault(),a.stopPropagation()};var k=function(){b.$broadcast("autorefresh",{interval:b.auto_refresh_rate})};f(k,15e3);b.$on("autorefresh",j),j()}]),homeApp.controller("usageController",["$scope","language","terminalJson",function(a,b,c,d){a.setSidebarActive("home");var e=function(){a.displayDataTable=a.DataAllowanceStatusTableDisplay,a.installed||(a.displayDataTable=!0),c.load("/home/usage",a,"usage_data").then(function(b){g(a.anytime,b,"anytime"),g(a.bonus,b,"bonus"),g(a.tokens,b,"tokens"),a.allowance_reset=a.usage_data.allowance_reset,a.bonus_reset=a.usage_data.bonus_reset})};a.$on("autorefresh",e),b.initLanguages(a,["usage.json"]);var f="#e3e3e3";a.anytime={units:{},data:[],labels:[],colors:[f,"#24A124"]},a.bonus={units:{},data:[],labels:[],colors:[f,"#337ab7"]},a.tokens={units:{}};var g=function(a,b,c){a.used=b[c].total_mb-b[c].remaining_mb,a.remaining=b[c].remaining_mb,a.overage=b[c].overage_mb,a.total=b[c].total_mb||0,a.unlimited=0===a.total,a.units.total="mb",a.total>=1e3&&(a.total/=1e3,a.units.total="gb"),a.units.remaining="mb",a.remaining>=1e3&&(a.remaining/=1e3,a.units.remaining="gb"),a.units.overage="mb",a.overage>=1e3&&(a.overage/=1e3,a.units.overage="gb"),a.data&&(!1===a.unlimited?(a.percentage=100*b[c].remaining_mb/b[c].total_mb,a.data[0]=a.used,a.data[1]=b[c].remaining_mb):(a.percentage=100,a.data[0]=0,a.data[1]=1))};a.d_labels=["",""],a.d_options={showTooltips:!1,segmentStrokeWidth:1,percentageInnerCutout:80},e()}]),homeApp.controller("systemStatusController",["$scope","language","terminalJson",function(a,b,c){a.setSidebarActive(),a.summary_table=["state_code","summary","allowance"],a.status_table=["srs","sts","lan_s","ipgw_as","tcp_a","web_a","sus_s","sds"],b.initLanguages(a,["ss_summary.json","ss_status.json","ss_wan_info.json","ss_lan_info.json","ss_statuses.json","lim_lan_status.json","usage.json","lim_assoc_status.json"]);var d=function(){void 0!==a.access?"advanced"!==a.access.level?b.initLanguages(a,["state_code_basic.json"]):b.initLanguages(a,["state_code.json"]):c.load("/home/lui_access_level",a,"access").then(function(){a.access.url="limited.html","advanced"===a.access.level?(a.access.url="/cgi-bin/index.cgi?Command=1",b.initLanguages(a,["state_code.json"])):b.initLanguages(a,["state_code_basic.json"])}),c.load("/home/status/system",a,"ss_status_table"),c.load("/home/status/wan",a,"ss_wan_table"),c.load("/home/status/lan",a,"ss_lan_table").then(function(){"up"===a.ss_lan_table.interface_link?a.ss_lan_table.status="good":a.ss_lan_table.status="bad"}),c.load("/home/status/summary",a,"ss_summary_table").then(function(){var b=a.ss_summary_table.state_code.value;c.load("/home/state_code/info/"+b,a,"sc"),isNaN(parseInt(a.ss_summary_table.allowance.value))||(parseInt(a.ss_summary_table.allowance.value)>=1e3?a.ss_summary_table.allowance.value=a.ss_summary_table.allowance.value/1e3+" GB":a.ss_summary_table.allowance.value=a.ss_summary_table.allowance.value+" MB")})};a.$on("autorefresh",d),d()}]),homeApp.controller("systemInformationController",["$scope","language","terminalJson",function(a,b,c){a.setSidebarActive(),b.initLanguages(a,["si_identification.json","si_software.json","si_satellite.json"]);var d=function(){c.load("/home/information/identification",a,"si_identification_table"),c.load("/home/information/satellite",a,"si_satellite_table"),c.load("/system/terminal_info",a,"device_info"),c.load("/system/wifi/gen_info",a,"wifi_gen_info")};a.$on("autorefresh",d),d()}]),homeApp.controller("systemConnectivityController",["$scope","$interval","language","terminalJson",function(a,b,c,d){a.setSidebarActive("connectivity");var e,f=0;a.started=!1,a.progress=0,a.max=100;var g=function(){d.load("/home/connectivity/status/"+a.test_info.id,a,"test_results").then(function(){if("error"in a.test_results)return void f++;a.progress=a.test_results.progress,a.test_results.progress>=100&&(b.cancel(e),a.done=!0,a.test_results.successful&&(a.results=a.test_results.results)),f>=60&&(b.cancel(e),a.error=!0)})};a.start=function(){a.started=!0,d.load("/home/connectivity/start",a,"test_info").then(function(){if("error"in a.test_info)return void(a.error=!0);e=b(g,1e3)})},c.initLanguages(a,["connectivity.json"])}]),homeApp.controller("systemBistController",["$scope","language","terminalJson",function(a,b,c){a.setSidebarActive("bist"),b.initLanguages(a,["bist.json"]),c.load("/home/bist",a,"bist_results")}]),homeApp.controller("systemLEDController",["$scope","language","terminalJson",function(a,b,c){a.setSidebarActive("led"),c.load("/system/led/brightness",a,"result").then(function(){a.brightness=a.result.brightness}),a.updateLEDBrightness=function(){c.load("/system/led/brightness/"+a.brightness,a,"result").then(function(){})}}]);