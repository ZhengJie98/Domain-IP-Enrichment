(function(){"use strict";app.factory("xmHttpInterceptor",["$injector","$rootScope","labelService","CookieService",function(n,t,i,r){let u=i.get("Common.ErrorMessage"),f=r.getCookie("language_web")!=="zh-CN"&&r.getCookie("language_web")!=="zh-TW";return{request:function(n){var t=$('[name="__RequestVerificationToken"]').val(),i;return t!==undefined&&(i={c8763:t},angular.extend(n.headers,i)),n},response:function(n){return n.data.IsSuccess===!1&&(n.data.ErrorMessage=`${n.data.ErrorMessage}`,f&&(n.data.ErrorMessage=`${u} (${n.data.ErrorMessage})`)),n},responseError:function(i){var r=n.get("CustomModalService");sessionStorage.httpError=JSON.stringify(i);switch(i.status){case 0:case 404:return;case 401:r.alert("闲置过久，请重新登入").then(function(){return window.location.reload()});break;case 500:r.alertError("常规错误，请稍后再试");break;case-1:i.xhrStatus==="error"&&t.$broadcast("enterMicroServiceError")}}}}]);app.config(["$httpProvider",function(n){n.interceptors.push("xmHttpInterceptor");n.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]);app.factory("$exceptionHandler",["$log","$injector",function(n,t){return function(i,r){var u=t.get("LogErrorsService");u.log(i);n.error(i,r)}}]);app.config(["$qProvider",function(n){n.errorOnUnhandledRejections(!1)}]);var n={LayoutCtrl:{QQ:{link:"http://wpa.qq.com/msgrd?v=3&uin=QQVal&site=qq&menu=yes",width:588,height:486},lineChat:{width:588,height:486,target:"_open"}}};window.__siteSetting&&($.extend(!0,n,window.__siteSetting),delete window.__siteSetting);app.constant("_env",n)})()