app.factory("ActivityEntranceService",["$q","$http","$window","$filter","UserService","labelService","ActivityService","RedEnvelopeService","languageService",function(n,t,i,r,u,f,e,o,s){function c(){function a(n){return h.getValidVipSingleton(!1).then(function(i){var r=[{link:"/Lobby/Navigation",img:n[1].EntranceImg,isReceiveAll:!1,isMemberCenter:!1,clickFn:function(){localStorage.setItem("LobbyNavAction","/Lobby/Activity");t.post("/Home/AddLatestActivityClick",null)}}];let u=n[0].data.Result.List;return u.forEach(function(n){n.Detail.LoginUrl&&n.Detail.LoginUrl.indexOf("vipbelonging")>-1&&(n.IsShow=i.IsShow,n.Detail.IsDisplay=i.IsShow&&i.Validate)}),u.filter(function(n){return n.IsShow&&n.Detail.IsDisplay}).forEach(function(n){let f=n.Detail.LoginUrl?n.Detail.LoginUrl.indexOf("/activity")>-1:!1,u=n.Detail.LoginUrl?n.Detail.LoginUrl.indexOf("/membercenter")>-1:!1,t="";f&&(t=n.Detail.LoginUrl?n.Detail.LoginUrl.replace("/fe/activity","/Activity"):"#",t="/ActivityManagement/#"+t);u&&(t=n.Detail.LoginUrl?n.Detail.LoginUrl.replace("/fe/membercenter","/MemberCenter"):"#",t="/MemberCenter/#"+t);let i=n.Detail.LoginUrl?n.Detail.LoginUrl.split("/"):[];r.push({name:i.length?i[i.length-1]:"",link:t,img:n.Detail.EntranceImg,isReceiveAll:n.Detail.Sort===1,isMemberCenter:u})}),r})}function v(n){n.link.indexOf("/fe/activity")>-1&&(n.link=n.link.replace("/fe/activity","/Activity"),n.link="/ActivityManagement/#"+n.link);var t,e=n.link||"/Lobby/Navigation",o=n.name||"_lobbyNav",r=n.width||1300,u=n.height||960,f=n.clickFn||!1;f&&f();t=i.open(e,o,"resizable,scrollbars=yes, width="+r+", height="+u);t.moveTo((screen.width-r)/2,(screen.height-u)/3);t.focus()}var r,f,o,c,l={WalletRemittance:"https://cdn.fidlite.com/Web.Portal/_Common/Content/Views/Shared/images/Service/WalletRemittance.gif"};this.getEntranceImage=function(){return n.all([t.post("/Home/GetActivityEntryImage",null),e.getActivity()]).then(function(n){var t=n[0].data.ReturnObject,i={Activity:n[1].EntranceImg};return angular.extend({},l,i,t)})};this.getJwtToken=function(){return u.getJwtTokens()};this.getJwtTokenSingleton=function(){return c=c||this.getJwtToken()};this.getSwitch=function(){var r=$('[ng-controller="SiteMailCountCtrl"]').length!==0,i="";return window.__IsDebuggingEnabled&&(i="https://www.x9hb7wr.click"),r?this.getJwtTokenSingleton().then(function(r){var u=r;if(u)return n.all([t.get(i+"/be/activity/api/v1/Activity/GetEnabledActivityList",{headers:{DeviceType:1,Authorization:"Bearer "+u.JwtToken,Language:s.currentLanguage}}),e.getActivity()]).then(function(n){return a(n)})}):e.getActivity().then(function(n){return[{link:"/Lobby/Navigation",img:n.EntranceImg,isReceiveAll:!1,isMemberCenter:!1,clickFn:function(){localStorage.setItem("LobbyNavAction","/Lobby/Activity");t.post("/Home/AddLatestActivityClick",null)}}]})};this.getValidVip=function(){var i=$('[ng-controller="SiteMailCountCtrl"]').length!==0,n="";return window.__IsDebuggingEnabled&&(n="https://www.x9hb7wr.click"),i?this.getJwtTokenSingleton().then(function(i){var r=i;if(r)return t.get(n+"/be/activity/api/v1/VipLevel/Validate",{headers:{DeviceType:1,Authorization:"Bearer "+r.JwtToken,Language:s.currentLanguage}}).then(function(n){return n.data.Result})}):{}};this.getValidVipSingleton=function(n){return o=n?this.getValidVip():o||this.getValidVip()};this.getImageSingleton=function(){return r=r||this.getEntranceImage()};this.getSwitchSingleton=function(n){return f=n?this.getSwitch():f||this.getSwitch()};this.openModal=function(n){v(n)}}var h=new c;return h}]);app.factory("ActivityService",["$http","$q","$filter","$rootScope","UserService","languageService",function(n,t,r,u,f,e){var o={WelcomeOffer:"fas fa-gift",TimeLimitedEvent:"far fa-stopwatch",RescueMoney:"fas fa-briefcase-medical",RedEnvelope:"fas fa-envelope-open-dollar",NewLuckyWheel:"fab fa-empire",MissionReward:"fas fa-th",LuckyWheel:"fab fa-galactic-republic",JackPotActivity:"fas fa-money-bill-wave",CheckInOffer:"fas fa-calendar-check"};return{getActivity:function(){var u=t.defer(),f=u.promise;return t.all([n.post("/Lobby/GetAdvertisements",{IsMobile:!1}),n.post("/Lobby/GetAdManagerEntrancePic",null)]).then(function(n){var f=n[0].data,t=f.AdCategoryItems,e=n[1].data.ReturnObject[0];for(i=0;i<t.length;i++)for(j=0;j<t[i].AdItems.length;j++)t[i].AdItems[j].ImgUrl="https://cdn.fidlite.com/"+t[i].AdItems[j].ImgUrl;f.EntranceImg=e?r("filterCdn")(e,"https://cdn.fidlite.com/"):null;u.resolve(f)}),f},receivedAll:function(){var i=t.defer(),r=i.promise;return t.all([f.getJwtTokens(),]).then(function(t){var f=t[0],r;f&&(r="",window.__IsDebuggingEnabled&&(r="https://www.x9hb7wr.click"),n.post(r+"/be/activity/api/v1/Activity/ReceiveAllActivityReward",null,{headers:{DeviceType:1,Authorization:"Bearer "+f.JwtToken,Language:e.currentLanguage}}).then(function(n){u.$broadcast("oneClickCloseAll");i.resolve(n.data)}))}),r},getActivityIcons:function(){return o},getActivityIcon:function(n){return o[n]}}}]);app.factory("AnnouncementService",["$window","$location","$http","$filter","$rootScope","CookieService","MeidonTimeService","CustomModalService",function(n,t,i,r,u,f,e,o){function s(){var p=r("filterCdn"),h,c,l,a=[],v=!1,s,y=this;return this.getList=function(){return i.post("/Announcement/GetAnnouncementList",null).then(function(n){var t=n.data;return t.IsSuccess===!1&&o.alertError(t.ErrorMessage),y._listWithoutCdn2Redirect(t)})},this.getListSingleton=function(){return h=h||this.getList()},this.checkVersion=function(){return i.post("/Announcement/GetVersionAndCheckPopup").then(function(n){var t=n.data,u,i,r,f;return t.IsSuccess===!1?(o.alertError(t.ErrorMessage),!1):(u=t.NeedPopup,u&&(i="{0}={1};",i=t.MemberVersion?"MemberVersion="+t.MemberVersion+";":"GuestVersion="+t.GuestVersion+";",t.PopupFrequency&&(r=e.getCurrentMeidon(),r.set({h:0,m:0,s:0,ms:0}),r.add(t.PopupFrequency,"d"),f=e.getMeidonToLocal(r).toDate(),i+="expires="+f+";"),document.cookie=i+"path=/"),u)})},this.getTitleList=function(){return i.post("/Announcement/GetAnnouncementTitleList",null).then(function(n){var t=n.data;return t.IsSuccess===!1&&o.alertError(t.ErrorMessage),t.TitleList})},this.getSettingSingleton=function(){return l=l||this.getTitleList()},this._listWithoutCdn2Redirect=function(n){var t=[];return n.List&&angular.forEach(n.List,function(n){t.push({id:n.Id,content:n.Content?n.Content.replace(/src=\"([^\"])+(png|jpg|gif)\"/g,function(n){return p(n,"https://cdn.fidlite.com/")}):"",sort:n.Sort,title:n.Title})}),{List:t,PopupHeader:n.PopupHeader}},this.addPreviewListener=function(i){function r(t){s={announcementContent:y._listWithoutCdn2Redirect(t.data),announcementTitle:t.data.AnnouncementTitle,marquee:t.data.Marquee};n.removeEventListener("message",r,!1);a.forEach(function(n){n(s)})}if(s){i(s);return}(a.push(i),v)||(v=!0,n.addEventListener("message",r,!1),n.opener.postMessage("",t.search().announcement))},this.recordNeverPopupTimes=function(){if(!f.getCookie("NeverPopupDatetime")){var n=e.getCurrentMeidon().format("YYYY-MM-DD HH:mm:ss");f.setCookie("NeverPopupDatetime",n,1);i.get("/Announcement/RecordNeverPopupTimes",null)}},this.uncheckNeverPopup=function(){f.getCookie("NeverPopupDatetime")&&f.deleteCookie("NeverPopupDatetime")},this.checkNeverPopupCookieExist=function(){return f.getCookie("NeverPopupDatetime")!==null},this.getMarquee=function(){return i.post("/Announcement/GetMarqueeContent",null).then(function(n){var t=n.data;return t.IsSuccess===!1?[]:t.MarqueeContent})},this.getMarqueeSingleton=function(){return c=c||this.getMarquee()},this.checkMarqueeVersion=function(){return i.post("/Announcement/GetMarqueeCheckPopup",null).then(function(n){var t=n.data,r,i,s;if(t.IsSuccess===!1)return o.alertError(t.ErrorMessage),!1;var u=t.ReturnObject.NeedPopup,h=t.ReturnObject.Version,f=t.ReturnObject.PopupFrequency;return u&&(r="MarqueeVersion="+h+";",f&&(i=e.getCurrentMeidon(),i.set({h:0,m:0,s:0,ms:0}),i.add(f,"d"),s=e.getMeidonToLocal(i).toDate(),r+="expires="+s+";"),document.cookie=r+"path=/"),u})},this.openMarqueeDialog=function(){u.$broadcast("toggleModalMarquee",!0)},this.closeMarqueeDialog=function(){u.$broadcast("toggleModalMarquee",!1)},this.openMarqueeDialogForce=function(){u.$broadcast("showModalMarqueeForce")},this.openAnnouncementDialog=function(n){u.$broadcast("showModalAnnouncement",n)},this}return new s}]);app.factory("bodyScrollService",["$http",function(){var n=function(){var n=$(window).height(),t=$(document).height(),i=$(document).scrollTop();return t-(i+n)};return{getDistanceOfBottom:n}}]);app.factory("CaperUrlService",[function(){return{toCaperUrl:function(n){var u=1300,f=960,t="_self",e=[{siteItem:"/Yuebao",width:1284,height:893},{siteItem:"/TimeLimitedEvent"},{siteItem:"/Luckywheel",width:1603,height:963},{siteItem:"/Lobby/Activity"}],o,r;for(i=0;i<e.length;i++)if(n.indexOf(e[i].siteItem)==0){t="_blank";u=e[i].width||u;f=e[i].height||f;break}o=new RegExp(/^https?/i);o.test(n)&&(t="_blank");r="";t!=="_self"?(r=window.open(n,t,"resizable,scrollbars=yes, width="+u+", height="+f),r.moveTo((screen.width-u)/2,(screen.height-f)/3)):r=window.open(n,t);r.focus()}}}]);app.factory("captchaService",["$http","$q","$modal",function(n,t,i){function r(n){var r=JSON.parse(sessionStorage.getItem("Verify"+n))||!1,u=sessionStorage.getItem("Captcha"+n)||"",t;return r===!1?!1:(t=(new Date).getTime(),i.open({templateUrl:"/Account/CaptchaDialog",controller:"AccountCaptchaDialogCtrl",resolve:{captchaId:function(){return u},identityId:function(){return t}},windowClass:"modal-captcha",backdrop:"static",keyboard:!1}).result.then(function(){},function(){}),t)}return{post:function(t){return t?n.post("/Home/GetCaptchaFor"+t).then(function(n){var i=n.data,r=i.value,u="data:image/png;base64,"+i.image;return sessionStorage.setItem("Verify"+t,i.needNeCaptcha||!1),sessionStorage.setItem("Captcha"+t,i.captchaId||""),{checkCodeEncrypt:r,image:u}},function(){return!1}):n.post("/GetCaptcha").then(function(n){var t=n.data,i=t.value,r="data:image/png;base64,"+t.image;return{checkCodeEncrypt:i,image:r}},function(){return!1})},verifyViaDialogForLogin:function(){return r("Login")},verifyViaDialogForRegister:function(){return r("Register")}}}]);app.factory("CheckInOfferService",["$http","$window","CustomModalService",function(n,t,i){function r(){var r;this.getSwitch=function(){return n.post("/CheckInOffer/Check",null).then(function(n){var t=n.data;return t.IsSuccess===!1&&i.alertError(t.ErrorMessage),{Enable:t.ReturnObject||!1}})};this.getSwitchSingleton=function(){return r=r||this.getSwitch()};this.openModal=function(){t.open("/ActivityManagement/#/Activity/CheckinOffer","_checkInOffer","resizable,scrollbars=yes, width=1600, height=960")}}return new r}]);app.factory("CompanyDepositService",["$http",function(n){function t(){var i,r,u,t=[{id:1,paymentTypeId:1,key:"General",imgName:"bank.png"},{id:2,paymentTypeId:2,key:"WeChat",imgName:"wechat.png"},{id:3,paymentTypeId:3,key:"AliPay",imgName:"alipay.png"},{id:5,paymentTypeId:4,key:"QQWallet",imgName:"qq.png"},{id:7,paymentTypeId:6,key:"UnionPay",imgName:"unionpay.png"},{id:8,paymentTypeId:9,key:"BaiduWallet",imgName:"baiduwallet.png"},{id:4,paymentTypeId:10,key:"Tenpay",imgName:"tenpay.png"},{id:6,paymentTypeId:5,key:"JD",imgName:"jd.png"},{id:9,paymentTypeId:8,key:"DigitalCurrency_USDT",imgName:"digitalCurrency.png"}],f=function(){return n.post("/CompanyDeposit/CheckCompanyDepositAndWallet",null).then(function(n){return n.data})},e=function(){return n.post("/CompanyDeposit/GetMemberGroupAccountType",null).then(function(n){var i=n.data;return t.filter(function(n){return i.indexOf(n.key)!==-1||n.key==="General"})})},o=function(){return n.post("/CompanyDeposit/Init",null).then(function(n){return n.data})};this.CompanyDepositAndWallet=function(){return r=r||f()};this.Types=function(){return i=i||e()};this.TypeObj=function(){return this.Types().then(function(n){for(var u,f,i,e={},r=0;r<t.length;r++){for(u=t[r].key,f=!1,i=0;i<n.length;i++)u===n[i].key&&(f=!0);e["has"+u]=f}return e})};this.getDepositTypeById=function(n){let i=t.filter(function(t){return t.id===n});return i.length?i[0]:null};this.getDepositTypeByPaymentTypeId=function(n){let i=t.filter(function(t){return t.paymentTypeId===n});return i.length?i[0]:null};this.limitedAndDepositTypes=function(){return u=u||o()}}return new t}]);app.factory("ContactInfoService",["$http","$q",function(n,t){function u(){r=!0;n.post("/Cdn/GetContactList").then(function(n){i.resolve(n.data)})}var i=t.defer(),r=!1;return{getContactInfo:function(){return r||u(),i.promise}}}]);app.factory("DataService",["$rootScope",function(n){var t={Count:"0"};return n.$broadcast("getCount"),{getValue:function(){return t},setValue:function(n){return t.Count=n,t}}}]);app.factory("detectionRobotService",["$http","$q","labelService","CustomModalService",function(n,t,i,r){function u(n){if(n.length===0)return t.when({valid:!0,tip:null});var i=n[0].method,f=n[0].turnOn,e=n[0].message,o=n[0].value,s=n[0].error;return f?r[i](e).then(function(i){return i===o?(n.shift(),u(n)):t.when({valid:!1,tip:s})}):(n.shift(),u(n))}return{randomBlock:function(){var n=[{method:"prompt",pass:!1,turnOn:!0},{method:"promptPwd",pass:!1,turnOn:!0}],t=[];return t.push(n[Math.floor(Math.random()*n.length)]),t},methodPerfer:function(n,t,r){for(var f,o={prompt:[{required:!0,message:i.get("DetectionRobot.prompt1"),value:t.Account,error:i.get("DetectionRobot.promptError1")}],promptPwd:[{required:!0,message:i.get("DetectionRobot.prompt2"),value:t.Password,error:i.get("DetectionRobot.promptError2")},{required:r.IsRequired_MoneyPassword||!1,message:i.get("DetectionRobot.prompt3"),value:t.MoneyPassword,error:i.get("DetectionRobot.promptError3")}]},u=[],e=0;e<o[n].length;e++)o[n][e].required&&u.push(o[n][e]);return f=Math.floor(Math.random()*u.length),{id:f,message:u[f].message,value:u[f].value,error:u[f].error}},detectionRobot:function(i,r){var e=this,f=t.defer(),o=function(){for(var o,n=e.randomBlock(),t=0;t<n.length;t++)o=e.methodPerfer(n[t].method,i,r),n[t].message=o.message,n[t].value=o.value,n[t].error=o.error;u(n).then(function(n){n.valid?f.resolve(i):f.reject(n.tip)})};return n.post("/Home/GetRobotQuestionRegisterSetting",{}).then(function(n){n&&""+n.data=="true"?o():f.resolve(i)},function(){f.reject(i)}),f.promise}}}]);app.factory("ExternalPaymentService",["$http","$q",function(n,t){return{GetExternalPayment:function(){var i=t.defer(),r=i.promise;return n.post("/Financial/GetExternalPayment").then(function(n){i.resolve(n.data)}),r}}}]);app.factory("FinancialService",["$http","$q",function(n,t){function r(){this.getPaymentMerchantList=function(r,u,f,e){var o=i.filter(function(n){return n.paymentType===r})[0],s=angular.isDefined(o);return(e&&(i=[]),s&&!e)?t.when({banks:o.banks,list:o.list,groupAccounts:o.groupAccounts}):n.post("/Financial/GetPaymentMerchantList",{paymentType:r,sortByPaymentFirst:u,financeCenterPaymentCategoryIds:f}).then(function(n){var t=n.data;return t.IsSuccess===!1?{bank:[],groupAccounts:[],list:[]}:(i.push({paymentType:r,banks:t.ReturnObject.Bank,list:t.ReturnObject.PaymentMerchants}),{banks:t.ReturnObject.Bank,list:t.ReturnObject.PaymentMerchants})})};this.getCompanyDepositAccounts=function(n){var r=i.filter(function(t){return t.paymentType===parseInt(n)})[0];return angular.isUndefined(r)?t.when({data:{Banks:[],Accounts:[]}}):t.when({data:{Banks:r.banks||[],Accounts:r.groupAccounts||[]}})};this.getOnlinePaymentMerchantInfo=function(n,t){var r=i.filter(function(t){return t.paymentType===n})[0].list;return r.filter(function(n){return n.IsOnlinePayment&&n.SettingId===t})[0]}}var i=[];return new r}]);app.factory("FunctionSwitchService",["$q","$http",function(n,t){function i(){var i=n.defer(),r=!1,u=n.defer(),f=!1;this.getShelfFunctionSwitch=function(){function n(){r=!0;t.post("/Home/GetShelfFunctionSwitch",null).then(function(n){for(var r=n.data.FuncSwitchList,u={},t=0;t<r.length;t++)u[r[t]]=!0;i.resolve(u)})}return r||n(),i.promise};this.getEnableFunctionSwitch=function(){function n(){f=!0;t.post("/Home/GetEnableFunctionSwitch",null).then(function(n){for(var i=n.data.FuncSwitchList,r={},t=0;t<i.length;t++)r[i[t]]=!0;u.resolve(r)})}return f||n(),u.promise}}return new i}]);app.factory("gameNavigationSortService",["$q","$http","languageService",function(n,t,i){function s(e,o,s){function nt(n){d(v,b,k)&&(localStorage.setItem(l,JSON.stringify(n)),localStorage.setItem(p,y),localStorage.setItem(w,i.currentLanguage))}function d(n,t,r){var u=y-parseInt(t)<(s?s:g),f=r!==i.currentLanguage;return!n||!n.length||!t||!u||f}var a=n.defer(),g=6e5,y=(new Date).valueOf(),c=e.split("/").reverse()[0]+(o?JSON.stringify(o).trim().replace(/\"\'/g,""):""),l="__"+c+"_"+r+"__",p="__"+c+"_"+r+"_SettingTime__",w="__"+c+"_"+r+"_Language__",v=h(localStorage.getItem(l)),b=localStorage.getItem(p),k=localStorage.getItem(w);return(localStorage.removeItem("__"+c+"_"+u+"__"),localStorage.removeItem("__"+c+"_"+u+"_SettingTime__"),localStorage.removeItem("__"+c+"_"+u+"_Language__"),!d(v,b,k))?(a.resolve(v),a.promise):(f[l]=f[l]||t.post(e,o),f[l].then(function(n){return nt(n.data),a.resolve(n.data),n}),a.promise)}function h(n){try{return JSON.parse(n)}catch(t){return!1}}var r="0.0.4",u="0.0.3",e=n.defer(),o=n.defer(),f={};return{navPromise:e.promise,getGameNavigationSort:function(){function u(n){n.forEach(function(n){n.DisplayName===null&&(n.DisplayName=i["GlobalLobby_"+n.NavigationKindName])})}var r=this,i;return n.all([t.post("/GetMultilingual",["GlobalLobby"]).then(function(n){return n.data}),s("/GameNavigationSort/GetGameNavigationSort",null)]).then(function(n){i=n[0];let t=n[1];u(t.NavigationInfos);e.resolve(t)}),r.navPromise},gamePromise:o.promise,getGameEntranceList:function(){var n=this;return s("/GameNavigationSort/GetGameEntrance",{device:"Web"}).then(function(n){o.resolve(n)}),n.gamePromise},getEntranceImageUrl:function(n,t){var i=n.ImageFileUrls.filter(function(n){return n.Version===t})[0]||{};return i.Url||""}}}]);angular.module("slotGame",[]).factory("GenericGameService",["$http","$q","$rootScope",function(n,t,i){function f(){function h(n,t,i){let o=i.split(","),r=[],u=0,e=0;for(var i=0;i<o.length;i++)if(o[i]==="0"){if(n[u]){let t=f(r,n,u);t&&r.push(t);u++}}else if(t[e]){let n=f(r,t,e);n&&r.push(n);e++}return r}function f(n,t,i){if(!t[i])return null;if(n.length===0)return t[i];let r=n.some(function(n){return n.DisplayName===t[i].DisplayName&&n.GameSupplierType===t[i].GameSupplierType});return r?f(n,t,++i):t[i]}function e(n,t,i){for(var u,r=0;r<n[t].length;r++)if(n[t][r].CategoryKey=i.CategoryKey,n[t][r].CrossPlatform=i.GameSupplierType&&n[t][r].GameSupplierType!==i.GameSupplierType,n[t][r].ButtonImagePath="https://cdn.fidlite.com/"+n[t][r].ButtonImagePath,n[t][r].ImagePlus.length>0)for(u=0;u<n[t][r].ImagePlus.length;u++)n[t][r].ImagePlus[u].ImageFilePath="https://cdn.fidlite.com/"+n[t][r].ImagePlus[u].ImageFilePath;return n[t]}function c(n,t){var u=n.GameKind,r="/Account/LoginToSupplier?",f=n.GameSupplierType,i={supplierType:"supplierType="+n.GameSupplierType,gId:"gId="+n.GId};t?i.cId="cId="+t:null;switch(n.GameSupplierType){case 3:i.externalType="externalType="+n.GameIds.gameId;break;case 9:i.externalType="externalType="+n.GameIds.LunchGame;break;case 11:i.externalType=u===1?"externalType=0":"externalType=1";break;case 21:i.externalType="externalType="+n.GameIds.igType;break;case 34:case 39:delete i.supplierType;i.groupName="groupName=Tgp";u===1&&(r="/Account/LoginToSunbetLiveBetLimit?");break;case 67:case 78:delete i.supplierType;i.groupName="groupName=Pg"}return angular.forEach(i,function(n){r=r+n+"&"}),{action:r.substring(0,r.length-1),supplier:f}}function l(n,t,r){if(!i.userInfo.account)return{};if(n!==0)return{};var u=angular.copy(a(r)).data;return u?(u.Games=v(u.Games,t)[n],u):{}}function a(n){var i=o(),t=i.filter(function(t){return angular.equals(t.params,n)})[0];return t?t:{}}function o(){var t=JSON.parse(localStorage.getItem(r)||"[]"),n=t.filter(function(n){return!y(n.expired)}).filter(function(n){return n.user===i.userInfo.account});return localStorage.setItem(r,JSON.stringify(n)),n}function v(n,t){var i=[];if(t<=0)return i;while(n.length)i.push(n.splice(0,t));return i}function y(n){var t=(new Date).valueOf();return t>=n}function p(n,t){var i=o(),u=i.filter(function(n){return angular.equals(n.params,t)})[0],f,e;u?(e=u.data.Games,u.data.Games=e.concat(n.Games)):(f=w(n,t),i.push(f));localStorage.setItem(r,JSON.stringify(i))}function w(n,t){var r=s(),e=s().set({h:1,m:30,s:0,ms:0}),o=r.isAfter(e),u,f;return r.add(o?1:0,"d"),r.set({h:1,m:30,s:0,ms:0}),u=b(r).toDate().valueOf(),f={user:i.userInfo.account,params:t,data:n,expired:u},f}function s(){return moment(angular.element(document.getElementsByTagName("html")).attr("meidon-time").replace(/\//g,"-"))}function b(n){var t=4-(new Date).getTimezoneOffset()/60;return n.add(t,"h")}this.restructCategories=function(n){var t=8;if(n.length<=t)return n;var i=n.slice(0,t-1),r=n.slice(t-1);return[].concat(i).concat([{CategoryKey:-1,DisplayName:"更多...",ChildList:r}])};this.getCategoryKey=function(t){return n.post("/Game/GetCategoryId",{categoryName:t}).then(function(n){var t=n.data;return t.IsSuccess===!1?null:t===""?null:t})};this.getGames=function(i,r,u){var f=l(i,r,u);return f.Games&&f.Games.length>0?t.when(f):n.post("/Game/GetGames",{pageIndex:i,take:r,search:u}).then(function(n){var t=n.data,f=t.Group==="AI"&&i===0;return(t.Games=e(t,"Games",u),t.IsCompleted=t.Games.length<r,!f)?t:(t.SystemRecommendGames=e(t,"SystemRecommendGames",u),i===0&&(t.Games=h(t.Games,t.SystemRecommendGames,t.RecommendGameSort),t.Games=t.Games.slice(0,r)),p(t,u),t)})};this.getGameInfo=function(n,t){var r=angular.isDefined(t)?t:n.CategoryKey,i=c(n,r);return{action:i.action,supplier:i.supplier}};this.checkGames=function(t){for(var r=[],i=0;i<t.length;i++)r.push(t[i].GId);return n.post("/Game/CheckGames",{gameIds:r}).then(function(n){for(var r,u=n.data,f=[],i=0;i<t.length;i++)for(r=0;r<u.length;r++)t[i].GId===u[r]&&f.push(t[i]);return f})};this.getSpecificCssUrl=function(n){var t=u.filter(function(t){return t.route.toLowerCase()===n.toLowerCase()})[0]||{};return t.css||null}}var u=[{route:"/BoardCasino/City761Html",css:"/Content/Views/BoardCasino/City761Html.css?version=20201215"},{route:"/BoardCasino/DhHtml",css:"/Content/Views/BoardCasino/DhHtml.css?version=20201215"},{route:"/BoardCasino/DtHtml",css:"/Content/Views/BoardCasino/DtHtml.css?version=20201215"},{route:"/BoardCasino/FsHtml",css:"/Content/Views/BoardCasino/FsHtml.css?version=20201215"},{route:"/BoardCasino/JdbHtml",css:"/Content/Views/BoardCasino/JdbHtml.css?version=20201215"},{route:"/BoardCasino/JsHtml",css:"/Content/Views/BoardCasino/JsHtml.css?version=20201215"},{route:"/BoardCasino/KgHtml",css:"/Content/Views/BoardCasino/KgHtml.css?version=20201215"},{route:"/BoardCasino/LegHtml",css:"/Content/Views/BoardCasino/LegHtml.css?version=20201215"},{route:"/BoardCasino/MtHtml",css:"/Content/Views/BoardCasino/MtHtml.css?version=20201215"},{route:"/BoardCasino/MwHtml",css:"/Content/Views/BoardCasino/MwHtml.css?version=20201215"},{route:"/BoardCasino/NwHtml",css:"/Content/Views/BoardCasino/NwHtml.css?version=20201215"},{route:"/BoardCasino/ThHtml",css:"/Content/Views/BoardCasino/ThHtml.css?version=20201215"},{route:"/BoardCasino/TogHtml",css:"/Content/Views/BoardCasino/TogHtml.css?version=20201215"},{route:"/BoardCasino/VgHtml",css:"/Content/Views/BoardCasino/VgHtml.css?version=20201215"},{route:"/BoardCasino/BullHtml",css:"/Content/Views/BoardCasino/BullHtml.css?version=20201215"},{route:"/BoardCasino/GmgHtml",css:"/Content/Views/BoardCasino/GmgHtml.css?version=20201215"},{route:"/BoardCasino/Im2Html",css:"/Content/Views/BoardCasino/Im2Html.css?version=20201215"},{route:"/BoardCasino/JlHtml",css:"/Content/Views/BoardCasino/JlHtml.css?version=20201215"},{route:"/BoardCasino/BspHtml",css:"/Content/Views/BoardCasino/BspHtml.css?version=20201215"},{route:"/BoardCasino/YgHtml",css:"/Content/Views/BoardCasino/YgHtml.css?version=20201215"},{route:"/BoardCasino/IngHtml",css:"/Content/Views/BoardCasino/IngHtml.css?version=20201215"},{route:"/BoardCasino/TpHtml",css:"/Content/Views/BoardCasino/TpHtml.css?version=20201215"},{route:"/BoardCasino/BbpHtml",css:"/Content/Views/BoardCasino/BbpHtml.css?version=20201215"},{route:"/BoardCasino/NwNewHtml",css:"/Content/Views/BoardCasino/NwNewHtml.css?version=20201215"},{route:"/BoardCasino/PxHtml",css:"/Content/Views/BoardCasino/PxHtml.css?version=20201215"},{route:"/BoardCasino/MbHtml",css:"/Content/Views/BoardCasino/MbHtml.css?version=20201215"},{route:"/BoardCasino/GfHtml",css:"/Content/Views/BoardCasino/GfHtml.css?version=20201215"},{route:"/BoardCasino/KgameHtml",css:"/Content/Views/BoardCasino/KgameHtml.css?version=20201215"},{route:"/BoardCasino/WlHtml",css:"/Content/Views/BoardCasino/WlHtml.css?version=20201215"},{route:"/BoardCasino/GmHtml",css:"/Content/Views/BoardCasino/GmHtml.css?version=20220614"},{route:"/BoardCasino/MoreGame",css:"/Content/Views/BoardCasino/MoreGame.css?version=20201215"},{route:"/IntegratedGame/GpkHtml",css:"/Content/Views/IntegratedGame/GpkHtml.css?version=20201215"},{route:"/IntegratedGame/TpHtml",css:"/Content/Views/IntegratedGame/TpHtml.css?version=20201215"},{route:"/LiveCasino/PtLive",css:"/Content/Views/LiveCasino/PtLive.css?version=20201215"},{route:"/LiveCasino/SunbetLive",css:"/Content/Views/LiveCasino/SunbetLive.css?version=20201215"},{route:"/LiveCasino/XgLive",css:"/Content/Views/LiveCasino/XgLive.css?version=20201215"},{route:"/SlotCasino/AeHtml",css:"/Content/Views/SlotCasino/AeHtml.css?version=20201215"},{route:"/SlotCasino/AgHtml",css:"/Content/Views/SlotCasino/AgHtml.css?version=20201215"},{route:"/SlotCasino/BspHtml",css:"/Content/Views/SlotCasino/BspHtml.css?version=20201215"},{route:"/SlotCasino/BbinHtml",css:"/Content/Views/SlotCasino/BbinHtml.css?version=20201215"},{route:"/SlotCasino/Cq9Html",css:"/Content/Views/SlotCasino/Cq9Html.css?version=20201215"},{route:"/SlotCasino/DtHtml",css:"/Content/Views/SlotCasino/DtHtml.css?version=2022092001"},{route:"/SlotCasino/FishHtml",css:"/Content/Views/SlotCasino/FishHtml.css?version=20201216"},{route:"/SlotCasino/FsHtml",css:"/Content/Views/SlotCasino/FsHtml.css?version=20201215"},{route:"/SlotCasino/GdHtml",css:"/Content/Views/SlotCasino/GdHtml.css?version=20201215"},{route:"/SlotCasino/GhHtml",css:"/Content/Views/SlotCasino/GhHtml.css?version=20201215"},{route:"/SlotCasino/GnsHtml",css:"/Content/Views/SlotCasino/GnsHtml.css?version=20201215"},{route:"/SlotCasino/HabaHtml",css:"/Content/Views/SlotCasino/HabaHtml.css?version=20201215"},{route:"/SlotCasino/JdbHtml",css:"/Content/Views/SlotCasino/JdbHtml.css?version=20201215"},{route:"/SlotCasino/JsHtml",css:"/Content/Views/SlotCasino/JsHtml.css?version=20201215"},{route:"/SlotCasino/JtnHtml",css:"/Content/Views/SlotCasino/JtnHtml.css?version=20201215"},{route:"/SlotCasino/KaHtml",css:"/Content/Views/SlotCasino/KaHtml.css?version=20201215"},{route:"/SlotCasino/LegHtml",css:"/Content/Views/SlotCasino/LegHtml.css?version=20201215"},{route:"/SlotCasino/MgFlash",css:"/Content/Views/SlotCasino/MgFlash.css?version=20201215"},{route:"/SlotCasino/MgHtml",css:"/Content/Views/SlotCasino/MgHtml.css?version=20201215"},{route:"/SlotCasino/MtHtml",css:"/Content/Views/SlotCasino/MtHtml.css?version=20201215"},{route:"/SlotCasino/MwHtml",css:"/Content/Views/SlotCasino/MwHtml.css?version=20201215"},{route:"/SlotCasino/NetentHtml",css:"/Content/Views/SlotCasino/NetentHtml.css?version=20201215"},{route:"/SlotCasino/PngHtml",css:"/Content/Views/SlotCasino/PngHtml.css?version=20201215"},{route:"/SlotCasino/PrgFlash",css:"/Content/Views/SlotCasino/PrgFlash.css?version=20201215"},{route:"/SlotCasino/PrgHtml",css:"/Content/Views/SlotCasino/PrgHtml.css?version=20201215"},{route:"/SlotCasino/PsHtml",css:"/Content/Views/SlotCasino/PsHtml.css?version=20201215"},{route:"/SlotCasino/PtFlash",css:"/Content/Views/SlotCasino/PtFlash.css?version=20201215"},{route:"/SlotCasino/PtsHtml",css:"/Content/Views/SlotCasino/PtsHtml.css?version=20201215"},{route:"/SlotCasino/RedTigerHtml",css:"/Content/Views/SlotCasino/RedTigerHtml.css?version=20201215"},{route:"/SlotCasino/SaHtml",css:"/Content/Views/SlotCasino/SaHtml.css?version=20201215"},{route:"/SlotCasino/SgHtml",css:"/Content/Views/SlotCasino/SgHtml.css?version=20201215"},{route:"/SlotCasino/ThHtml",css:"/Content/Views/SlotCasino/ThHtml.css?version=20201215"},{route:"/SlotCasino/TogHtml",css:"/Content/Views/SlotCasino/TogHtml.css?version=20201215"},{route:"/SlotCasino/VtHtml",css:"/Content/Views/SlotCasino/VtHtml.css?version=20201215"},{route:"/SlotCasino/R8Html",css:"/Content/Views/SlotCasino/R8Html.css?version=20201215"},{route:"/SlotCasino/Im2Html",css:"/Content/Views/SlotCasino/Im2Html.css?version=20201215"},{route:"/SlotCasino/Jv8Html",css:"/Content/Views/SlotCasino/Jv8Html.css?version=20201215"},{route:"/SlotCasino/YgHtml",css:"/Content/Views/SlotCasino/YgHtml.css?version=20201215"},{route:"/SlotCasino/MoreGame",css:"/Content/Views/SlotCasino/MoreGame.css?version=20201215"},{route:"/SlotCasino/IcgHtml",css:"/Content/Views/SlotCasino/IcgHtml.css?version=20211203"},{route:"/SlotCasino/VaHtml",css:"/Content/Views/SlotCasino/VaHtml.css?version=20201215"},{route:"/SlotCasino/RtHtml",css:"/Content/Views/SlotCasino/RtHtml.css?version=20201215"},{route:"/SlotCasino/GmtHtml",css:"/Content/Views/SlotCasino/GmtHtml.css?version=20201215"},{route:"/SlotCasino/FcHtml",css:"/Content/Views/SlotCasino/FcHtml.css?version=20201215"},{route:"/SlotCasino/PxHtml",css:"/Content/Views/SlotCasino/PxHtml.css?version=20201215"},{route:"/SlotCasino/MbHtml",css:"/Content/Views/SlotCasino/MbHtml.css?version=20201215"},{route:"/SlotCasino/HcHtml",css:"/Content/Views/SlotCasino/HcHtml.css?version=20201215"},{route:"/SlotCasino/Rich88Html",css:"/Content/Views/SlotCasino/Rich88Html.css?version=20201215"},{route:"/SlotCasino/WmHtml",css:"/Content/Views/SlotCasino/WmHtml.css?version=20201215"},{route:"/SlotCasino/SpribeHtml",css:"/Content/Views/SlotCasino/SpribeHtml.css?version=20201215"},{route:"/SlotCasino/JlHtml",css:"/Content/Views/SlotCasino/JlHtml.css?version=20230104"},{route:"/SlotCasino/PgvnHtml",css:"/Content/Views/SlotCasino/PgvnHtml.css?version=20230104"},{route:"/SlotCasino/RsgHtml",css:"/Content/Views/SlotCasino/RsgHtml.css?version=20230314"},{route:"/Lobby/RecommendGame",css:"/Content/Views/Lobby/RecommendGame.css?version=20201215"},],r="_abGames";return new f}]);app.factory("injectActionService",[function(){return{LoginCtrl:{loginAction:"/Account/Login"}}}]);app.factory("JackPotActivityService",["$http","CustomModalService",function(n,t){function i(){var i;this.getStatus=function(){return n.post("/JackPotActivity/GetMemberJackPotStatus",null).then(function(n){return n.data.IsSuccess===!1?(t.alertError(n.data.ErrorMessage),!1):parseInt(n.data.ReturnObject,10)||0})};this.getActivityName=function(){return n.post("/Home/GetGPKActivityName",null).then(function(n){return n.data})};this.getActivityInfo=function(){return n.post("/JackPotActivity/GetJackPotActivityInfo",null).then(function(n){return n.data})};this.getJoinDifference=function(){return n.post("/JackPotActivity/GetJoinCommissionableDifference",null).then(function(n){return n.data})};this.joinCheck=function(){return n.post("/JackPotActivity/JoinCheck",null).then(function(n){return n.data})};this.joinActivity=function(){return n.post("/JackPotActivity/Join",null).then(function(n){return n.data})};this.getActivityWallet=function(t){return n.post("/JackPotActivity/GetMemberActivityWallet",t?null:{isUpdate:!0}).then(function(n){return n.data})};this.getStageInfo=function(){return n.post("/JackPotActivity/GetMemberJackPotStageInfo",null).then(function(n){return n.data})};this.receive=function(){return n.post("/JackPotActivity/Receive",null).then(function(n){return n.data})};this.getAbandonInfo=function(){return n.post("/JackPotActivity/AbandonCheckInfo",null).then(function(n){return n.data})};this.abandon=function(){return n.post("/JackPotActivity/Abandon",null).then(function(n){return n.data})};this.getStatusSingleton=function(){return i=i||this.getStatus()}}return new i}]);app.factory("languageService",["$q","$http",function(n,t){function u(){r=!0;t.post("/Home/GetLanguages").then(function(n){var t=n.data;i.resolve(t)})}function f(){for(var n,i="language_web=",r=document.cookie.split(";"),t=0,u=r.length;t<u;t++){for(n=r[t];n.charAt(0)==" ";)n=n.substring(1);if(n.indexOf(i)===0)return n.substring(i.length,n.length)}}function e(){return r||u(),i.promise}function o(n){return $.post("/ChangeLanguage",{language:n})}function s(n){return t.post("/GetMultilingual",n)}function h(n){var t="";switch(n){case"zh-CN":t="NameCn";break;case"zh-TW":t="NameTw";break;case"en-US":t="NameEn";break;case"th":t="NameTh";break;default:t="NameCn"}return t}var i=n.defer(),r=!1;return{currentLanguage:f(),getLanguageData:e,changeLanguage:o,getMultilingual:s,getLangPropertyName:h}}]);angular.module("lobbyNav",[]).factory("LobbyNavService",["$window","$http",function(n,t){function u(n){localStorage.setItem("LobbyNavAction",n);var t=document.createEvent("Event");t.initEvent("setActionEvent",!0,!0);window.dispatchEvent(t)}function f(){return t.post("/Game/GetGameSupplierEmbed",null).then(function(n){var t=n.data;return t.IsSuccess===!1?[]:t})}function r(){return i=i||f()}var i;return r(),{openLobbyNav:function(t,i,f){r().then(function(r){function p(t){return!l||!n.addEventListener?n.open(t,"_NonEmbedded",c):(u(t),!a)?n.open("/Lobby/Navigation","_lobbyNav",c):n.top}var e=r.filter(function(n){return n.GameSupplierType===i})[0]||{IsEmbed:!0,FrameWidth:1300,FrameHeight:960},o=e.FrameWidth,s=e.FrameHeight,l=angular.isDefined(f)?f:e.IsEmbed,a=n.top.location.pathname==="/Lobby/Navigation",c=["resizable","scrollbars=yes","width="+o,"height="+s].join(","),v=(screen.width-o)/2,y=(screen.height-s)/3,h=p(t);h.resizeTo(o,s);h.moveTo(v,y);h.focus()})}}}]);app.factory("LogErrorsService",["$http",function(n){function i(){this.start=function(){t=!0};this.cancel=function(){t=!1};this.log=function(i){if(t){var r=""+i.stack;n.post("/ToSaveLog",{message:r})}};this.logMessage=function(i,r){(t||r)&&n.post("/ToSaveLog",{message:"Log Message: "+JSON.stringify(i)})}}var t=!1;return new i}]);app.factory("LoginRedirectService",["$window","labelService",function(n,t){function i(){this.goLogin=function(){var t=location.href.replace(location.origin,"");n.location.href="/Account/LoginToGame?ReturnUrl="+t};this.requireLogin=function(){var n='<div id="preview-overlay"><div><i class="fa fa-exclamation-triangle"><\/i> <br /><span>'+t.get("Shared.Preview_NotLogin")+'<\/span><a id="preview-login" href="javascript:void(0)"><span>'+t.get("Shared.Login_Continue")+"<\/span><\/a><\/div><\/div>";angular.element(document.querySelector("body")).append(n);angular.element(document.querySelector("#preview-login")).on("click",function(){$("#preview-overlay").addClass("ng-hide");$("#login_account").focus()})}}return new i}]);app.factory("loginService",["$http","$modal","labelService","CustomModalService",function(n,t,i,r){function u(){this.getLoginValidate=function(t){return n.post("/Login/LoginValidate",t)};this.openSmsAuthModal=function(n){return t.open({templateUrl:"/Account/SmsAuthenticationDialog",controller:"SmsAuthenticationDialogCtrl",windowClass:"modal-sad",resolve:{info:function(){return n},typeDescription:function(){return"login"}}}).result};this.openEmailAutheModal=function(n){return t.open({templateUrl:"/Account/EmailAuthenticationDialog",controller:"EmailAuthenticationDialogCtrl",windowClass:"modal-ead",resolve:{info:function(){return n}}}).result};this.openDeviceAuthModal=function(n){return t.open({templateUrl:"/Account/QrCodeAuthentication",controller:"QrCodeAuthenticationCtrl",windowClass:"modal-qca",resolve:{authInfo:function(){return n}}}).result};this.openGoogleDialogAuthModal=function(){return r.prompt(i.get("Account.Enter_GoogleAuthenticatorCode")||"请输入二次验证器验证码")};this.accountLoginD=function(t){return n.post("/Account/Login_D",t)};this.accountLoginH=function(t){return n.post("/Account/Login_H",t)};this.accountLoginG=function(t){return n.post("/Account/Login_G",t)}}return new u}]);app.factory("MeidonTimeService",["$interval","$http","$rootScope","signalrService","_env",function(n,t,i,r){function u(){function s(){o=n(function(){u.add(1,"seconds");e=e.set({year:u.get("year"),month:u.get("month"),date:u.get("date"),hour:u.get("hour"),minute:u.get("minute"),second:u.get("second"),millisecond:u.get("millisecond")})},990)}function c(){n.cancel(o)}function l(){c();s()}var f=0,u,o,e;moment.locale(angular.element(document.getElementsByTagName("html")).attr("moment-lang"));const h=!!localStorage.getItem("UserTimezone");return h||moment.tz.setDefault("Asia/Taipei"),u=moment(angular.element(document.getElementsByTagName("html")).attr("meidon-time").replace(/\//g,"-")),e=moment(angular.element(document.getElementsByTagName("html")).attr("meidon-time").replace(/\//g,"-")),t.post("/Home/GetSiteConfig",null).then(n=>{sessionStorage.getItem("web_Timezone")||sessionStorage.setItem("web_Timezone",n.data.TimeZone);i.defaultCountryCode=n.data.CountryCode;i.defaultCurrency=n.data.DefaultCurrency;f=4+ +sessionStorage.getItem("web_Timezone");u.add(f,"h");e.add(f,"h");s();r.on("updateMeidonNow",function(n){var t=moment(n);t=moment(n).add(f,"h");u=u.set({year:t.get("year"),month:t.get("month"),date:t.get("date"),hour:t.get("hour"),minute:t.get("minute"),second:t.get("second"),millisecond:t.get("millisecond")});l()})}),this.on=function(n){return n(e)},this.getCurrentMeidon=function(){return angular.copy(u)},this.getMeidonToLocal=function(n){return n.add(f,"h")},this}return new u}]);app.factory("MissionRewardService",["$http",function(n){function t(){this.getSwitch=function(){return n.post("/MissionReward/HasMissionReward",null).then(function(n){return n.data})};this.getList=function(){return n.post("/MissionReward/GetActivities",null).then(function(n){return n.data})};this.getMissions=function(t){return n.post("/MissionReward/GetMissions/"+t,{id:t}).then(function(n){return n.data})};this.getReward=function(t){return n.post("/MissionReward/CompleteMission",{id:t}).then(function(n){return n.data})}}return new t}]);app.factory("NewLuckyWheelService",["$http","CustomModalService",function(n,t){function o(n){var f=90-n,t=s(f),i=r*u,e=i*Math.cos(t),o=i*Math.sin(t);return{x:e,y:o}}function s(n){return n*(Math.PI/180)}function h(){this.getCssPosition=function(n){var t=o(n);return{top:(e-t.y)*100+"%",left:(f+t.x)*100+"%"}};this.getRotateTime=function(n){return Math.floor(Math.random()*n)+6e3};this.getRotateAngle=function(n,t){var i=360/t,r=1800*Math.floor(Math.random()*t+1),u=(Math.random()>.5?1:-1)*Math.floor(Math.random()*(Math.floor(i/4)+1));return 360-n+r+u};this.getEntraceVisible=function(){return n.post("/NewLuckyWheel/GetEntranceVisible",null).then(function(n){var i=n.data;return i.IsSuccess===!1&&t.alertError(i.ErrorMessage),{Enable:i.ReturnObject||!1}})};this.getEntraceVisibleSingleton=function(){return i=i||this.getEntraceVisible()}}var i,r=.5,u=.57,f=r,e=r;return new h}]);app.factory("PaymentService",[function(){function n(){var n=[{ParentTypeId:1,PaymentTypeId:1},{ParentTypeId:2,PaymentTypeId:2},{ParentTypeId:3,PaymentTypeId:3},{ParentTypeId:4,PaymentTypeId:4},{ParentTypeId:5,PaymentTypeId:5},{ParentTypeId:6,PaymentTypeId:6},{ParentTypeId:7,PaymentTypeId:7},{ParentTypeId:8,PaymentTypeId:8},{ParentTypeId:12,PaymentTypeId:12},];return this.getPaymentByType=function(t){var i;return angular.forEach(n,function(r,u){t===r.Type&&(i=n[u])}),i},this.getPaymentByParentTypeId=function(t){return n.filter(function(n){return n.ParentTypeId===t})[0]},this.getPaymentByPaymentTypeId=function(t){return n.filter(function(n){return n.PaymentTypeId===t})[0]},this}return new n}]);app.factory("RedEnvelopeService",["$http","$q","$location","$window","$modal","CustomModalService","MeidonTimeService",function(n,t,i,r,u,f,e){function o(){function s(){function u(t){var i=t.data.ReturnObject;n.resolve([i]||[]);r.removeEventListener("message",u,!1)}var n=t.defer();return r.addEventListener("message",u,!1),r.opener.postMessage("message",i.search().redenvelope),n.promise}var o;this.getList=function(){return i.search().redenvelope?s():n.post("/RedEnvelope/GetRedEnvelopList",null).then(function(n){var t=n.data,i;return t.IsSuccess===!1?(f.alertError(t.ErrorMessage),[]):t.length?(i=e.getCurrentMeidon(),t.sort(function(n,t){var r=moment(n.EndTime).diff(i),u=moment(t.EndTime).diff(i);return r>u?1:-1})):[]})};this.getListSingleton=function(){return o=o||this.getList()};this.getAmountSingleton=function(){return this.getListSingleton().then(function(n){return n.length})};this.withdraw=function(t){return n.post("/RedEnvelope/Received",{id:t})};this.openModal=function(){return u.open({templateUrl:"/RedEnvelope/List",controller:"RedEnvelopeListCtrl",windowClass:"modal-red-envelope"})}}return new o}]);app.factory("RescueMoneyService",["$http","CustomModalService",function(n,t){function i(){this.getSwitch=function(){return n.post("/RescueMoney/HasActivity",null).then(function(n){return n.IsSuccess===!1?(t.alertError(n.ErrorMessage),!1):n.data.ReturnObject})};this.getList=function(){return n.post("/RescueMoney/GetActivityInfo",null).then(function(n){return n.IsSuccess===!1?(t.alertError(n.ErrorMessage),{}):n.data.ReturnObject})};this.getMoney=function(){return n.post("/RescueMoney/Receive",null).then(function(n){return n.IsSuccess===!1?(t.alertError(n.ErrorMessage),{}):n.data.ReturnObject})}}return new i}]);angular.module("reviewGame",[]).factory("ReviewGameService",function(){return{review:function(n){var t=JSON.parse(localStorage.getItem("reviewGame_0.0.2"))||[],i={ButtonImagePath:n.ButtonImagePath,DisplayName:n.DisplayName,GameIds:n.GameIds,GameSupplierType:n.GameSupplierType,GameKind:n.GameKind,GId:n.GId};t.length>0?(t=$.grep(t,function(n){return parseInt(n.GId)!==parseInt(i.GId)}),t.unshift(i),t.length>45&&t.pop(),localStorage.setItem("reviewGame_0.0.2",JSON.stringify(t))):(t.unshift(i),localStorage.setItem("reviewGame_0.0.2",JSON.stringify(t)))}}}),function(){var n,i,t;if($.hubConnection){n=$.hubConnection();i=function(){n.start().done(()=>{})};n.connectionSlow(function(){}).reconnecting(function(){}).reconnected(function(){}).disconnected(function(){setTimeout(function(){i()},5e3)}).error(function(){});t=n.createHubProxy("mainHub");t.on("signOut",function(n){if(n)if(angular){var t=angular.element(document.body).injector().get("CustomModalService");t.alert(n).then(function(){location.href="/Account/SignOut"})}else alert(n);location.href="/Account/SignOut"}).on("refresh",function(){location.reload()});app.factory("signalrService",["$rootScope","$q",function(i,r){var u=r.defer();return{connect:function(){n.start().done(function(){u.resolve()})},reconnected:function(t){n.reconnected(function(){var n=arguments;i.$apply(function(){t&&t.apply(this,n)})})},on:function(n,r){u.promise.then(function(){t.on(n,function(){var n=arguments;i.$apply(function(){r&&r.apply(this,n)})})});var f=i.$$childTail;f&&f.$on("$destroy",function(){t.off(n)})},invoke:function(){var n=arguments;return u.promise.then(function(){t.invoke.apply(t,n)})},donePromise:u.promise,getConnectionId:function(){return n.id?n.id:""},getConnectionId2:function(){function u(){var u,f,i,e;if(!n.id)return"";for(u=n.id,f=[],i=0;i<u[t("0x0")];i++)e=u[i],f[t("0x1")](String[t("0x2")](e.charCodeAt(0)+i+1));return r(2)+f[t("0x3")]("")+r(2)}function r(n){for(var i=[],r=0;r<n;r++)i[t("0x1")](String[t("0x2")](Math[t("0x4")](Math[t("0x5")]()*6+97)));return i[t("0x3")]("")}var i=["join","floor","random","length","push","fromCharCode"],t;return function(n,t){var i=function(t){while(--t)n.push(n.shift())};i(++t)}(i,381),t=function(n){n=+n;return i[n]},u()}}}])}}();app.factory("SliderService",["$http","$q","$location","$window",function(n,t,i,r){function u(n){return n?n:""}return{getSliderNew:function(){function e(n){for(var t=n.data.ReturnObject,i=0;i<t.length;i++)t[i].Link=u(t[i].Link);f.resolve(t);r.removeEventListener("message",e,!1)}var o=i.search().slideshow?!0:!1,f=t.defer();return o?(r.addEventListener("message",e,!1),r.opener.postMessage("message",i.search().slideshow)):n.post("/Cdn/GetSliderNew").then(function(n){for(var t=n.data.ReturnObject,i=0;i<t.length;i++)t[i].Link=u(t[i].Link);f.resolve(t)}),f.promise}}}]);app.factory("SystemNumberService",["$http",function(n){function t(){var t,i;this.getSwitch=function(){return n.post("/Home/MappingCodeEnable").then(function(n){return n.data.Enable===!0})};this.getCode=function(){return n.post("/Home/GetWebSiteMappingCode").then(function(n){return n.data!==""?"@"+n.data:""})};this.getSwitchSingleton=function(){return t=t||this.getSwitch()};this.getCodeSingleton=function(){return i=i||this.getCode()}}return new t}]);app.factory("TimeLimitedEventService",["$http","CustomModalService",function(n,t){function i(){var i,r;this.getList=function(){return n.post("/TimeLimitedEvent/List",null).then(function(n){var i=n.data;return i.IsSuccess===!1&&t.alertError(i.ErrorMessage),i})};this.getListSingleton=function(){return i=i||this.getList()};this.getSwitch=function(){return n.post("/TimeLimitedEvent/Check",null).then(function(n){var i=n.data;return i.IsSuccess===!1&&t.alertError(i.ErrorMessage),{Enable:i.ReturnObject}})};this.getSwitchSingleton=function(){return r=r||this.getSwitch()}}return new i}]);app.factory("WelcomeOfferService",["$http","CustomModalService","CookieService","MeidonTimeService",function(n,t,i,r){function u(){var u;this.getSwitch=function(){return n.post("/WelcomeOffer/Check",null).then(function(n){return n.data.IsSuccess===!1?(t.alertError(n.data.ErrorMessage),!1):n.data.ReturnObject})};this.getSwitchSingleton=function(){return u=u||this.getSwitch()};this.recordNeverPopupTimes=function(){if(!i.getCookie("WelcomeOfferNeverPopupDatetime")){var n=r.getCurrentMeidon().format("YYYY-MM-DD HH:mm:ss");i.setCookie("WelcomeOfferNeverPopupDatetime",n,1)}};this.uncheckNeverPopup=function(){i.getCookie("WelcomeOfferNeverPopupDatetime")&&i.deleteCookie("WelcomeOfferNeverPopupDatetime")};this.checkNeverPopupCookieExist=function(){return i.getCookie("WelcomeOfferNeverPopupDatetime")!==null}}return new u}]);app.factory("YuebaoService",["$http",function(n){function t(){var t;this.getEntrance=function(){return n.post("/Yuebao/GetYuebaoVisible",null).then(function(n){var t=n.data;return{Enable:t==="true"||!1}})};this.getEntranceSingleton=function(){return t=t||this.getEntrance()}}return new t}])