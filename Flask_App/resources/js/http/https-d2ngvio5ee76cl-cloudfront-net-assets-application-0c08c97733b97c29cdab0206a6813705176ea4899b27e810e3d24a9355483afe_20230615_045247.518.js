!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ActiveStorage={})}(this,function(e){"use strict";function t(e){const t=i(document.head,`meta[name="${e}"]`);if(t)return t.getAttribute("content")}function n(e,t){return"string"==typeof e&&(t=e,e=document),r(e.querySelectorAll(t))}function i(e,t){return"string"==typeof e&&(t=e,e=document),e.querySelector(t)}function o(e,t,n={}){const{disabled:i}=e,{bubbles:o,cancelable:r,detail:s}=n,a=document.createEvent("Event");a.initEvent(t,o||!0,r||!0),a.detail=s||{};try{e.disabled=!1,e.dispatchEvent(a)}finally{e.disabled=i}return a}function r(e){return Array.isArray(e)?e:Array.from?Array.from(e):[].slice.call(e)}function s(e,t,...n){if(e&&"function"==typeof e[t])return e[t](...n)}function a(){I||(I=!0,document.addEventListener("click",c,!0),document.addEventListener("submit",l,!0),document.addEventListener("ajax:before",d))}function c(e){const{target:t}=e;"INPUT"!=t.tagName&&"BUTTON"!=t.tagName||"submit"!=t.type||!t.form||x.set(t.form,t)}function l(e){u(e)}function d(e){"FORM"==e.target.tagName&&u(e)}function u(e){const t=e.target;if(t.hasAttribute(M))return void e.preventDefault();const n=new k(t),{inputs:i}=n;i.length&&(e.preventDefault(),t.setAttribute(M,""),i.forEach(f),n.start(e=>{t.removeAttribute(M),e?i.forEach(p):h(t)}))}function h(e){let t=x.get(e)||i(e,"input[type=submit], button[type=submit]");if(t){const{disabled:e}=t;t.disabled=!1,t.focus(),t.click(),t.disabled=e}else(t=document.createElement("input")).type="submit",t.style.display="none",e.appendChild(t),t.click(),e.removeChild(t);x["delete"](e)}function f(e){e.disabled=!0}function p(e){e.disabled=!1}function g(){window.ActiveStorage&&a()}var m,b={exports:{}};m=function(e){function t(e,t){var n=e[0],i=e[1],o=e[2],r=e[3];i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&o|~i&r)+t[0]-680876936|0)<<7|n>>>25)+i|0)&i|~n&o)+t[1]-389564586|0)<<12|r>>>20)+n|0)&n|~r&i)+t[2]+606105819|0)<<17|o>>>15)+r|0)&r|~o&n)+t[3]-1044525330|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&o|~i&r)+t[4]-176418897|0)<<7|n>>>25)+i|0)&i|~n&o)+t[5]+1200080426|0)<<12|r>>>20)+n|0)&n|~r&i)+t[6]-1473231341|0)<<17|o>>>15)+r|0)&r|~o&n)+t[7]-45705983|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&o|~i&r)+t[8]+1770035416|0)<<7|n>>>25)+i|0)&i|~n&o)+t[9]-1958414417|0)<<12|r>>>20)+n|0)&n|~r&i)+t[10]-42063|0)<<17|o>>>15)+r|0)&r|~o&n)+t[11]-1990404162|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&o|~i&r)+t[12]+1804603682|0)<<7|n>>>25)+i|0)&i|~n&o)+t[13]-40341101|0)<<12|r>>>20)+n|0)&n|~r&i)+t[14]-1502002290|0)<<17|o>>>15)+r|0)&r|~o&n)+t[15]+1236535329|0)<<22|i>>>10)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&r|o&~r)+t[1]-165796510|0)<<5|n>>>27)+i|0)&o|i&~o)+t[6]-1069501632|0)<<9|r>>>23)+n|0)&i|n&~i)+t[11]+643717713|0)<<14|o>>>18)+r|0)&n|r&~n)+t[0]-373897302|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&r|o&~r)+t[5]-701558691|0)<<5|n>>>27)+i|0)&o|i&~o)+t[10]+38016083|0)<<9|r>>>23)+n|0)&i|n&~i)+t[15]-660478335|0)<<14|o>>>18)+r|0)&n|r&~n)+t[4]-405537848|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&r|o&~r)+t[9]+568446438|0)<<5|n>>>27)+i|0)&o|i&~o)+t[14]-1019803690|0)<<9|r>>>23)+n|0)&i|n&~i)+t[3]-187363961|0)<<14|o>>>18)+r|0)&n|r&~n)+t[8]+1163531501|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i&r|o&~r)+t[13]-1444681467|0)<<5|n>>>27)+i|0)&o|i&~o)+t[2]-51403784|0)<<9|r>>>23)+n|0)&i|n&~i)+t[7]+1735328473|0)<<14|o>>>18)+r|0)&n|r&~n)+t[12]-1926607734|0)<<20|i>>>12)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i^o^r)+t[5]-378558|0)<<4|n>>>28)+i|0)^i^o)+t[8]-2022574463|0)<<11|r>>>21)+n|0)^n^i)+t[11]+1839030562|0)<<16|o>>>16)+r|0)^r^n)+t[14]-35309556|0)<<23|i>>>9)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i^o^r)+t[1]-1530992060|0)<<4|n>>>28)+i|0)^i^o)+t[4]+1272893353|0)<<11|r>>>21)+n|0)^n^i)+t[7]-155497632|0)<<16|o>>>16)+r|0)^r^n)+t[10]-1094730640|0)<<23|i>>>9)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i^o^r)+t[13]+681279174|0)<<4|n>>>28)+i|0)^i^o)+t[0]-358537222|0)<<11|r>>>21)+n|0)^n^i)+t[3]-722521979|0)<<16|o>>>16)+r|0)^r^n)+t[6]+76029189|0)<<23|i>>>9)+o|0,i=((i+=((o=((o+=((r=((r+=((n=((n+=(i^o^r)+t[9]-640364487|0)<<4|n>>>28)+i|0)^i^o)+t[12]-421815835|0)<<11|r>>>21)+n|0)^n^i)+t[15]+530742520|0)<<16|o>>>16)+r|0)^r^n)+t[2]-995338651|0)<<23|i>>>9)+o|0,i=((i+=((r=((r+=(i^((n=((n+=(o^(i|~r))+t[0]-198630844|0)<<6|n>>>26)+i|0)|~o))+t[7]+1126891415|0)<<10|r>>>22)+n|0)^((o=((o+=(n^(r|~i))+t[14]-1416354905|0)<<15|o>>>17)+r|0)|~n))+t[5]-57434055|0)<<21|i>>>11)+o|0,i=((i+=((r=((r+=(i^((n=((n+=(o^(i|~r))+t[12]+1700485571|0)<<6|n>>>26)+i|0)|~o))+t[3]-1894986606|0)<<10|r>>>22)+n|0)^((o=((o+=(n^(r|~i))+t[10]-1051523|0)<<15|o>>>17)+r|0)|~n))+t[1]-2054922799|0)<<21|i>>>11)+o|0,i=((i+=((r=((r+=(i^((n=((n+=(o^(i|~r))+t[8]+1873313359|0)<<6|n>>>26)+i|0)|~o))+t[15]-30611744|0)<<10|r>>>22)+n|0)^((o=((o+=(n^(r|~i))+t[6]-1560198380|0)<<15|o>>>17)+r|0)|~n))+t[13]+1309151649|0)<<21|i>>>11)+o|0,i=((i+=((r=((r+=(i^((n=((n+=(o^(i|~r))+t[4]-145523070|0)<<6|n>>>26)+i|0)|~o))+t[11]-1120210379|0)<<10|r>>>22)+n|0)^((o=((o+=(n^(r|~i))+t[2]+718787259|0)<<15|o>>>17)+r|0)|~n))+t[9]-343485551|0)<<21|i>>>11)+o|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=o+e[2]|0,e[3]=r+e[3]|0}function n(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var i,o,r,s,a,c,l=e.length,d=[1732584193,-271733879,-1732584194,271733878];for(i=64;i<=l;i+=64)t(d,n(e.substring(i-64,i)));for(o=(e=e.substring(i-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<o;i+=1)r[i>>2]|=e.charCodeAt(i)<<(i%4<<3);if(r[i>>2]|=128<<(i%4<<3),i>55)for(t(d,r),i=0;i<16;i+=1)r[i]=0;return s=(s=8*l).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,r[14]=a,r[15]=c,t(d,r),d}function r(e){var n,o,r,s,a,c,l=e.length,d=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=l;n+=64)t(d,i(e.subarray(n-64,n)));for(o=(e=n-64<l?e.subarray(n-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<o;n+=1)r[n>>2]|=e[n]<<(n%4<<3);if(r[n>>2]|=128<<(n%4<<3),n>55)for(t(d,r),n=0;n<16;n+=1)r[n]=0;return s=(s=8*l).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,r[14]=a,r[15]=c,t(d,r),d}function s(e){var t,n="";for(t=0;t<4;t+=1)n+=p[e>>8*t+4&15]+p[e>>8*t&15];return n}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function c(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e,t){var n,i=e.length,o=new ArrayBuffer(i),r=new Uint8Array(o);for(n=0;n<i;n+=1)r[n]=e.charCodeAt(n);return t?r:o}function d(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function u(e,t,n){var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e)),i.set(new Uint8Array(t),e.byteLength),n?i:i.buffer}function h(e){var t,n=[],i=e.length;for(t=0;t<i-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function f(){this.reset()}var p=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return a(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,i){var o,r,s,a,c=this.byteLength,l=t(n,c),d=c;return i!==e&&(d=t(i,c)),l>d?new ArrayBuffer(0):(o=d-l,r=new ArrayBuffer(o),s=new Uint8Array(r),a=new Uint8Array(this,l,o),s.set(a),r)}}(),f.prototype.append=function(e){return this.appendBinary(c(e)),this},f.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var i,o=this._buff.length;for(i=64;i<=o;i+=64)t(this._hash,n(this._buff.substring(i-64,i)));return this._buff=this._buff.substring(i-64),this},f.prototype.end=function(e){var t,n,i=this._buff,o=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)r[t>>2]|=i.charCodeAt(t)<<(t%4<<3);return this._finish(r,o),n=a(this._hash),e&&(n=h(n)),this.reset(),n},f.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},f.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},f.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},f.prototype._finish=function(e,n){var i,o,r,s=n;if(e[s>>2]|=128<<(s%4<<3),s>55)for(t(this._hash,e),s=0;s<16;s+=1)e[s]=0;i=(i=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),r=parseInt(i[1],16)||0,e[14]=o,e[15]=r,t(this._hash,e)},f.hash=function(e,t){return f.hashBinary(c(e),t)},f.hashBinary=function(e,t){var n=a(o(e));return t?h(n):n},f.ArrayBuffer=function(){this.reset()},f.ArrayBuffer.prototype.append=function(e){var n,o=u(this._buff.buffer,e,!0),r=o.length;for(this._length+=e.byteLength,n=64;n<=r;n+=64)t(this._hash,i(o.subarray(n-64,n)));return this._buff=n-64<r?new Uint8Array(o.buffer.slice(n-64)):new Uint8Array(0),this},f.ArrayBuffer.prototype.end=function(e){var t,n,i=this._buff,o=i.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)r[t>>2]|=i[t]<<(t%4<<3);return this._finish(r,o),n=a(this._hash),e&&(n=h(n)),this.reset(),n},f.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.ArrayBuffer.prototype.getState=function(){var e=f.prototype.getState.call(this);return e.buff=d(e.buff),e},f.ArrayBuffer.prototype.setState=function(e){return e.buff=l(e.buff,!0),f.prototype.setState.call(this,e)},f.ArrayBuffer.prototype.destroy=f.prototype.destroy,f.ArrayBuffer.prototype._finish=f.prototype._finish,f.ArrayBuffer.hash=function(e,t){var n=a(r(new Uint8Array(e)));return t?h(n):n},f},b.exports=m();var v=b.exports;const y=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice;class w{static create(e,t){new w(e).create(t)}constructor(e){this.file=e,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create(e){this.callback=e,this.md5Buffer=new v.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",e=>this.fileReaderDidLoad(e)),this.fileReader.addEventListener("error",e=>this.fileReaderDidError(e)),this.readNextChunk()}fileReaderDidLoad(e){if(this.md5Buffer.append(e.target.result),!this.readNextChunk()){const e=this.md5Buffer.end(!0),t=btoa(e);this.callback(null,t)}}fileReaderDidError(e){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||0==this.chunkIndex&&0==this.chunkCount){const e=this.chunkIndex*this.chunkSize,t=Math.min(e+this.chunkSize,this.file.size),n=y.call(this.file,e,t);return this.fileReader.readAsArrayBuffer(n),this.chunkIndex++,!0}return!1}}class A{constructor(e,n,i){this.file=e,this.attributes={filename:e.name,content_type:e.type||"application/octet-stream",byte_size:e.size,checksum:n},this.xhr=new XMLHttpRequest,this.xhr.open("POST",i,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");const o=t("csrf-token");o!=undefined&&this.xhr.setRequestHeader("X-CSRF-Token",o),this.xhr.addEventListener("load",e=>this.requestDidLoad(e)),this.xhr.addEventListener("error",e=>this.requestDidError(e))}get status(){return this.xhr.status}get response(){const{responseType:e,response:t}=this.xhr;return"json"==e?t:JSON.parse(t)}create(e){this.callback=e,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(e){if(this.status>=200&&this.status<300){const{response:e}=this,{direct_upload:t}=e;delete e.direct_upload,this.attributes=e,this.directUploadData=t,this.callback(null,this.toJSON())}else this.requestDidError(e)}requestDidError(e){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){const e={};for(const t in this.attributes)e[t]=this.attributes[t];return e}}class C{constructor(e){this.blob=e,this.file=e.file;const{url:t,headers:n}=e.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",t,!0),this.xhr.responseType="text";for(const e in n)this.xhr.setRequestHeader(e,n[e]);this.xhr.addEventListener("load",e=>this.requestDidLoad(e)),this.xhr.addEventListener("error",e=>this.requestDidError(e))}create(e){this.callback=e,this.xhr.send(this.file.slice())}requestDidLoad(e){const{status:t,response:n}=this.xhr;t>=200&&t<300?this.callback(null,n):this.requestDidError(e)}requestDidError(e){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}}let S=0;class _{constructor(e,t,n){this.id=++S,this.file=e,this.url=t,this.delegate=n}create(e){w.create(this.file,(t,n)=>{if(t)return void e(t);const i=new A(this.file,n,this.url);s(this.delegate,"directUploadWillCreateBlobWithXHR",i.xhr),i.create(t=>{if(t)e(t);else{const t=new C(i);s(this.delegate,"directUploadWillStoreFileWithXHR",t.xhr),t.create(t=>{t?e(t):e(null,i.toJSON())})}})})}}class T{constructor(e,t){this.input=e,this.file=t,this.directUpload=new _(this.file,this.url,this),this.dispatch("initialize")}start(e){const t=document.createElement("input");t.type="hidden",t.name=this.input.name,this.input.insertAdjacentElement("beforebegin",t),this.dispatch("start"),this.directUpload.create((n,i)=>{n?(t.parentNode.removeChild(t),this.dispatchError(n)):t.value=i.signed_id,this.dispatch("end"),e(n)})}uploadRequestDidProgress(e){const t=e.loaded/e.total*100;t&&this.dispatch("progress",{progress:t})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(e,t={}){return t.file=this.file,t.id=this.directUpload.id,o(this.input,`direct-upload:${e}`,{detail:t})}dispatchError(e){this.dispatch("error",{error:e}).defaultPrevented||alert(e)}directUploadWillCreateBlobWithXHR(e){this.dispatch("before-blob-request",{xhr:e})}directUploadWillStoreFileWithXHR(e){this.dispatch("before-storage-request",{xhr:e}),e.upload.addEventListener("progress",e=>this.uploadRequestDidProgress(e))}}const P="input[type=file][data-direct-upload-url]:not([disabled])";class k{constructor(e){this.form=e,this.inputs=n(e,P).filter(e=>e.files.length)}start(e){const t=this.createDirectUploadControllers(),n=()=>{const i=t.shift();i?i.start(t=>{t?(e(t),this.dispatch("end")):n()}):(e(),this.dispatch("end"))};this.dispatch("start"),n()}createDirectUploadControllers(){const e=[];return this.inputs.forEach(t=>{r(t.files).forEach(n=>{const i=new T(t,n);e.push(i)})}),e}dispatch(e,t={}){return o(this.form,`direct-uploads:${e}`,{detail:t})}}const M="data-direct-uploads-processing",x=new WeakMap;let I=!1;setTimeout(g,1),e.DirectUpload=_,e.start=a,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ActionCable={})}(this,function(e){"use strict";function t(e){if("function"==typeof e&&(e=e()),e&&!/^wss?:/i.test(e)){const t=document.createElement("a");return t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href}return e}function n(e=i("url")||l.default_mount_path){return new y(e)}function i(e){const t=document.head.querySelector(`meta[name='action-cable-${e}']`);if(t)return t.getAttribute("content")}var o={logger:self.console,WebSocket:self.WebSocket},r={log(...e){this.enabled&&(e.push(Date.now()),o.logger.log("[ActionCable]",...e))}};const s=()=>(new Date).getTime(),a=e=>(s()-e)/1e3;class c{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=s(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),r.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=s(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),r.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=s()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,r.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=s(),r.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){const{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor;return 1e3*e*Math.pow(1+t,Math.min(this.reconnectAttempts,10))*(1+(0===this.reconnectAttempts?1:t)*Math.random())}reconnectIfStale(){this.connectionIsStale()&&(r.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${a(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?r.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${a(this.disconnectedAt)} s`):(r.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return a(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&a(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){"visible"===document.visibilityState&&setTimeout(()=>{!this.connectionIsStale()&&this.connection.isOpen()||(r.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}}c.staleThreshold=6,c.reconnectionBackoffRate=.15;var l={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]};const{message_types:d,protocols:u}=l,h=u.slice(0,u.length-1),f=[].indexOf;class p{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new c(this),this.disconnected=!0}send(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)}open(){return this.isActive()?(r.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1):(r.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${u}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new o.WebSocket(this.consumer.url,u),this.installEventHandlers(),this.monitor.start(),!0)}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(r.log(`Reopening WebSocket, current state is ${this.getState()}`),!this.isActive())return this.open();try{return this.close()}catch(e){r.log("Failed to reopen WebSocket",e)}finally{r.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}isProtocolSupported(){return f.call(h,this.getProtocol())>=0}isState(...e){return f.call(e,this.getState())>=0}getState(){if(this.webSocket)for(let e in o.WebSocket)if(o.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase();return null}installEventHandlers(){for(let e in this.events){const t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}}p.reopenDelay=500,p.prototype.events={message(e){if(!this.isProtocolSupported())return;const{identifier:t,message:n,reason:i,reconnect:o,type:s}=JSON.parse(e.data);switch(s){case d.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case d.disconnect:return r.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:o});case d.ping:return this.monitor.recordPing();case d.confirmation:return this.subscriptions.confirmSubscription(t),this.subscriptions.notify(t,"connected");case d.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",n)}},open(){if(r.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return r.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(e){if(r.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){r.log("WebSocket onerror event")}};const g=function(e,t){if(null!=t)for(let n in t){const i=t[n];e[n]=i}return e};class m{constructor(e,t={},n){this.consumer=e,this.identifier=JSON.stringify(t),g(this,n)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}class b{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){-1==this.pendingSubscriptions.indexOf(e)?(r.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):r.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){r.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(t=>t!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&"function"==typeof this.subscriptions.subscribe&&this.pendingSubscriptions.map(e=>{r.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}}class v{constructor(e){this.consumer=e,this.guarantor=new b(this),this.subscriptions=[]}create(e,t){const n="object"==typeof e?e:{channel:e},i=new m(this.consumer,n,t);return this.add(i)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(e=>(this.forget(e),this.notify(e,"rejected"),e))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(t=>t!==e),e}findAll(e){return this.subscriptions.filter(t=>t.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...t){return this.subscriptions.map(n=>this.notify(n,e,...t))}notify(e,t,...n){let i;return(i="string"==typeof e?this.findAll(e):[e]).map(e=>"function"==typeof e[t]?e[t](...n):undefined)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){r.log(`Subscription confirmed ${e}`),this.findAll(e).map(e=>this.guarantor.forget(e))}sendCommand(e,t){const{identifier:n}=e;return this.consumer.send({command:t,identifier:n})}}class y{constructor(e){this._url=e,this.subscriptions=new v(this),this.connection=new p(this)}get url(){return t(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}}console.log("DEPRECATION: action_cable.js has been renamed to actioncable.js \u2013 please update your reference before Rails 8"),e.Connection=p,e.ConnectionMonitor=c,e.Consumer=y,e.INTERNAL=l,e.Subscription=m,e.SubscriptionGuarantor=b,e.Subscriptions=v,e.adapters=o,e.createConsumer=n,e.createWebSocketURL=t,e.getConfig=i,e.logger=r,Object.defineProperty(e,"__esModule",{value:!0})}),function(){this.AidinNext||(this.AidinNext={Channels:{}}),AidinNext.cable=ActionCable.createConsumer()}.call(this),
/*!
 * weakmap-polyfill v2.0.0 - ECMAScript6 WeakMap polyfill
 * https://github.com/polygonplanet/weakmap-polyfill
 * Copyright (c) 2015-2016 polygon planet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */
function(e){"use strict";function t(e){return Object(e)===e}if(!e.WeakMap){var n=Object.prototype.hasOwnProperty,i=function(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,writable:!0,value:n}):e[t]=n};e.WeakMap=function(){function e(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(i(this,"_id",r("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function o(e,i){if(!t(e)||!n.call(e,"_id"))throw new TypeError(i+" method called on incompatible receiver "+typeof e)}function r(e){return e+"_"+s()+"."+s()}function s(){return Math.random().toString().substring(2)}return i(e.prototype,"delete",function(e){if(o(this,"delete"),!t(e))return!1;var n=e[this._id];return!(!n||n[0]!==e)&&(delete e[this._id],!0)}),i(e.prototype,"get",function(e){if(o(this,"get"),t(e)){var n=e[this._id];return n&&n[0]===e?n[1]:void 0}}),i(e.prototype,"has",function(e){if(o(this,"has"),!t(e))return!1;var n=e[this._id];return!(!n||n[0]!==e)}),i(e.prototype,"set",function(e,n){if(o(this,"set"),!t(e))throw new TypeError("Invalid value used as weak map key");var r=e[this._id];return r&&r[0]===e?(r[1]=n,this):(i(e,this._id,[e,n]),this)}),i(e,"_polyfill",!0),e}()}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this),function(){this.AidinNext||(this.AidinNext={Channels:{}}),AidinNext.analytics={id:"UA-127822694-1"}}.call(this),function(){this.AidinNext||(this.AidinNext={Channels:{}}),AidinNext.comingSoon=""}.call(this);var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.fullVersion=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.version="an unknown version"==this.fullVersion?"an unknown version":parseFloat(this.fullVersion),this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,i=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!=n.indexOf(e[t].subString))return e[t].identity}else if(i)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return e.substring(t+this.versionSearchString.length+1).split(" ")[0]},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init(),function(){this.AidinNext||(this.AidinNext={Channels:{}}),AidinNext.maps={apiKey:"AIzaSyBO2naw3AqCJJ4TI98sGyMOa0Y7qE4PVyc"}}.call(this),function(){this.AidinNext||(this.AidinNext={Channels:{}}),AidinNext.pdfTron={key:"MRG Inc(myaidin.com):OEM:Aidin::B+:AMS(20220530):96CCB492071A44F38B313BC9B243382F4E6F7F9750BD8AA5DD45CA529D5017B1C6BEF5C7",year:2022}}.call(this),function(){this.AidinNext||(this.AidinNext={Channels:{}}),AidinNext.stripe={publishable_key:"pk_test_eW2HJUzno8VDSsU8oPPZAi2Q"}}.call(this),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(window,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(t){return e[t]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=1)}([function(e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,t,n){n(2),e.exports=n(6)},function(e,t,n){(function(i,o){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s,a;!function(i,o){"object"==r(t)&&void 0!==e?o():void 0===(a="function"==typeof(s=o)?s.call(t,n,t,e):s)||(e.exports=a)}(0,function(){"use strict";function e(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}function t(){}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,n._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void c(t.promise,e)}a(t.promise,i)}else(1===e._state?a:c)(t.promise,e._value)})):e._deferreds.push(t)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==r(t)||"function"==typeof t)){var i=t.then;if(t instanceof n)return e._state=3,e._value=t,void l(e);if("function"==typeof i)return void d(function(e,t){return function(){e.apply(t,arguments)}}(i,t),e)}e._state=1,e._value=t,l(e)}catch(t){c(e,t)}}function c(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;i>t;t++)s(e,e._deferreds[t]);e._deferreds=null}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}var u=setTimeout;n.prototype["catch"]=function(e){return this.then(null,e)},n.prototype.then=function(e,n){var i=new this.constructor(t);return s(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,n,i)),i},n.prototype["finally"]=e,n.all=function(e){return new n(function(t,n){function i(e,a){try{if(a&&("object"==r(a)||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,function(t){i(e,t)},n)}o[e]=a,0==--s&&t(o)}catch(e){n(e)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);for(var s=o.length,a=0;o.length>a;a++)i(a,o[a])})},n.resolve=function(e){return e&&"object"==r(e)&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var i=0,o=e.length;o>i;i++)e[i].then(t,n)})},n._immediateFn="function"==typeof i&&function(e){i(e)}||function(e){u(e,0)},n._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw Error("unable to locate global object")}();"Promise"in h?h.Promise.prototype["finally"]||(h.Promise.prototype["finally"]=e):h.Promise=n})}).call(this,n(3).setImmediate,n(0))},function(e,t,n){(function(e){function i(e,t){this._id=e,this._clearFn=t}var o=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;t.setTimeout=function(){return new i(r.call(setTimeout,o,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,o,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(o,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(4),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(e,t,n){(function(e,t){!function(e){"use strict";function n(e){delete d[e]}function i(e){if(u)setTimeout(i,0,e);else{var t=d[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{n(e),u=!1}}}}if(!e.setImmediate){var o,r,s,a,c,l=1,d={},u=!1,h=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick(function(){i(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&i(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),o=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){i(e.data)},o=function(e){s.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,o=function(e){var t=h.createElement("script");t.onreadystatechange=function(){i(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):o=function(e){setTimeout(i,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return d[l]=i,o(l),l++},f.clearImmediate=n}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(0),n(5))},function(e){function t(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===t||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(n){try{return c.call(null,e,0)}catch(n){return c.call(this,e,0)}}}function o(){f&&u&&(f=!1,u.length?h=u.concat(h):p=-1,h.length&&r())}function r(){if(!f){var e=i(o);f=!0;for(var t=h.length;t;){for(u=h,h=[];++p<t;)u&&u[p].run();p=-1,t=h.length}u=null,f=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function a(){}var c,l,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:t}catch(e){c=t}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var u,h=[],f=!1,p=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||f||i(r)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=a,d.addListener=a,d.once=a,d.off=a,d.removeListener=a,d.removeAllListeners=a,d.emit=a,d.prependListener=a,d.prependOnceListener=a,d.listeners=function(){return[]},d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t),n.d(t,"getInstance",function(){return f});var i={},o=0;"undefined"==typeof console&&(window.console={log:function(){},warn:function(){},error:function(){}});var r=function(){for(var e=1;e<arguments.length;e++)for(var t=Object.keys(arguments[e]),n=0;n<t.length;n++)arguments[0][t[n]]=arguments[e][t[n]];return arguments[0]},s=function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},a=function(e,t){var n;try{n=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0})}catch(i){(n=document.createEvent("Event")).initEvent(e,!0,!0),n.detail=t}return n};window.PDFNet&&!i.skipPDFNetWebViewerWarning&&console.warn("PDFNet.js and WebViewer.js have been included in the same context. See https://www.pdftron.com/kb_same_context for an explanation of why this could be an error in your application.");var c=new Map,l=new Map;i.WebViewer=function(e,t){var n=this;if(l.get(t))throw new Error("Two instances of WebViewer were created on the same HTML element. Please create a new element for each instance of WebViewer");l.set(t,!0),t.addEventListener("ready",function a(){c.get(t).instance=n.getCompleteInstance(),t.removeEventListener("ready",a)}),this._validateOptions(e),"legacy"===e.ui&&(e.uiPath="./ui-legacy/index.html"),e.fullAPI&&e.pdftronServer&&(e.forceClientSideInit||console.warn("The fullAPI and pdftronServer options have both been set so the forceClientSideInit option is now enabled. This means that WebViewer will switch to client side rendering and processing to allow use of the full API."),e.forceClientSideInit=!0),this.options=r({},i.WebViewer.Options,e);var o=this.options.path.length-1;o>0&&"/"!==this.options.path[o]&&(this.options.path+="/"),this.options.uiPath=this.options.path+this.options.uiPath,t||console.error("ViewerElement is not defined. This may be caused by calling the WebViewer constructor before the DOM is loaded, or an invalid selector. Please see http://r.pdftron.com/guides/quick-start for an example."),this.element=t,this.element.style.overflow="hidden";var s=this;this.messageHandler=function(t){if("requestl"===t.data&&t.source&&t.source.postMessage({type:"responsel",value:e.l||e.licenseKey},"*"),"requestConfig"===t.data.type&&t.data.id===s.id&&t.source){var n=e.config?s._correctRelativePath(e.config):"";t.source.postMessage({type:"responseConfig",value:n},"*")}},window.addEventListener("message",this.messageHandler,!1),this.options.autoCreate&&this.create()};var d={licenseKey:void 0,enableAzureWorkaround:!1,isAdminUser:!1,isReadOnly:!1};i.WebViewer.prototype={version:"7.2.0",create:function(){if(this.options.initialDoc){var e=this._correctRelativePath(this.options.initialDoc);e=encodeURIComponent(e),this.options.initialDoc=e,this._create()}else this._create()},_create:function(){this.id=++o,void 0===this._trigger&&(this._trigger=function(e,t){var n=a(e,t);this.element.dispatchEvent(n)});var e=this.options.type.replace(" ","").split(",");e.length<1&&(e[0]="html5"),this._createViewer(e)},_validateOptions:function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var o=t[n];o in r({},d,i.WebViewer.Options)||console.warn("".concat(o," is not a valid option name. See http://r.pdftron.com/api/options_anchor for all available options."))}!e.enableRedaction||e.fullAPI||e.pdftronServer||console.warn("FullAPI or WebViewer Server is needed to apply redactions")},_notSupportedMobile:function(){var e=document.createElement("div");e.id="webviewer-browser-unsupported",e.textContent="PDF document viewing is not supported by this browser.",this.element.appendChild(e)},_createViewer:function(e){var t,n=this;if(n.selectedType=null,this.isMobileDevice()){if(this.options.documentType&&"xod"!==this.options.documentType&&!this._testWebAssembly())return void this._notSupportedMobile();if(e=Array("html5Mobile"),n.selectedType="html5Mobile",this.options.mobileRedirect)return t=this.options.uiPath+this._getHTML5OptionsURL(),void(window.location=t)}for(var i=!1,o=!1,r=0;r<e.length;r++){if("html5mobile"===e[r].toLowerCase()){if(this.options.documentType&&"xod"!==this.options.documentType&&!this._testWebAssembly())continue;if(i=!0,n._testHTML5()){if(this.options.mobileRedirect)return n.selectedType="html5Mobile",t=this.options.uiPath+this._getHTML5OptionsURL(),void(window.location=t);if(this.options.xdomainProxyUrl||n.isSameOrigin(decodeURIComponent(n.options.initialDoc))||n._testCORS()){n.selectedType="html5Mobile";break}o=!0}}if("html5"===e[r].toLowerCase()&&(i=!0,n._testHTML5())){var s=n.isSameOrigin(decodeURIComponent(n.options.initialDoc));if(this.options.xdomainProxyUrl||s||n._testCORS()){n.selectedType="html5";break}o=!0}}if("html5"===n.selectedType)n._createHTML5();else if("html5Mobile"===n.selectedType)n._createHTML5Mobile();else{var a;if(o?a="This browser does not support cross origin requests. Please configure xdomain to support CORS.":i&&(a="Please use an HTML5 compatible browser."),a){var c=document.createElement("div");c.id="webviewer-browser-unsupported",c.textContent=a,n.element.appendChild(c)}}},_viewerLoaded:function(e){var t=this;this._trigger("ready");try{var n=e.contentWindow;if(void 0!==this.options.encryption){var i=decodeURIComponent(this.options.initialDoc),o={decrypt:n.CoreControls.Encryption.decrypt,decryptOptions:this.options.encryption,documentId:this.options.documentId,extension:"xod"};this.loadDocument(i,o)}null===this.instance.docViewer.getDocument()?n.addEventListener("documentLoaded",function(){t._trigger("documentLoaded")}):this._trigger("documentLoaded"),["displayModeChanged","layoutModeChanged","zoomChanged","pageChanged","fitModeChanged","toolModeChanged","rotationChanged","finishedSavingPDF","documentMerged"].forEach(function(e){n.addEventListener(e,function(e){t._trigger(e.type,e.detail)})})}catch(e){console.warn("Viewer is on a different domain, the promise from WebViewer function is rejected and API functions will not work because of cross domain permissions. See http://r.pdftron.com/kb_cross_origin for more information.")}},_isPDFExtension:function(e){var t=!1;return e&&[".pdf",".png",".jpg","jpeg"].forEach(function(n){e===n&&(t=!0)}),t},_isOfficeExtension:function(e){var t=!1;return e&&[".docx",".doc",".pptx"].forEach(function(n){e===n&&(t=!0)}),t},_getHTML5OptionsURL:function(){var e,t,n,i=this.options,o="";if(i.initialDoc&&(o+="#d=".concat(i.initialDoc)),void 0===i.backendType&&(i.backendType=i.pdfBackend),i.documentType&&"xod"===i.documentType&&(e=i.documentType),i.preloadWorker&&"xod"===i.preloadWorker&&(e=i.preloadWorker),i.extension&&(e=i.extension),e&&(o+="&extension=".concat(e)),i.documentType&&"xod"!==i.documentType&&(t=i.documentType),i.preloadWorker&&"xod"!==i.preloadWorker&&(t=i.preloadWorker),t&&(o+="&preloadWorker=".concat(t)),i.backendType&&(o+="&pdf=".concat(i.backendType,"&office=").concat(i.backendType)),i.filename&&(o+="&filename=".concat(i.filename)),void 0!==i.streaming&&(o+="&streaming=".concat(i.streaming)),i.externalPath){var r=this._correctRelativePath(i.externalPath);r=encodeURIComponent(r),o+="&p=".concat(r)}if(i.encryption&&(o+="&auto_load=false"),i.enableAnnotations&&(o+="&a=1"),i.disabledElements){var s=encodeURIComponent(i.disabledElements.join(","));o+="&disabledElements=".concat(s)}if(i.serverUrl){var a=this._correctRelativePath(i.serverUrl);a=encodeURIComponent(a),o+="&server_url=".concat(a)}if(i.serverUrlHeaders&&(o+="&serverUrlHeaders=".concat(JSON.stringify(i.serverUrlHeaders))),i.documentId&&(o+="&did=".concat(i.documentId)),i.css){var c=this._correctRelativePath(i.css);c=encodeURIComponent(c),o+="&css=".concat(c)}return i.disableI18n&&(o+="&disableI18n=1"),i.enableOfflineMode&&(o+="&offline=1"),i.startOffline&&(o+="&startOffline=1"),(i.enableReadOnlyMode||i.isReadOnly)&&(o+="&readonly=1"),i.hideAnnotationPanel&&(o+="&hideAnnotationPanel=1"),void 0!==i.annotationUser&&(o+="&user=".concat(i.annotationUser)),void 0===i.annotationAdmin&&void 0===i.isAdminUser||(o+="&admin=".concat(i.annotationAdmin||i.isAdminUser?1:0)),void 0!==i.custom&&(o+="&custom=".concat(encodeURIComponent(i.custom))),void 0===i.showLocalFilePicker&&void 0===i.enableFilePicker||(o+="&filepicker=".concat(i.showLocalFilePicker||i.enableFilePicker?1:0)),void 0!==i.fullAPI&&(o+="&pdfnet=".concat(i.fullAPI?1:0)),void 0!==i.enableRedaction&&(o+="&enableRedaction=".concat(i.enableRedaction?1:0)),void 0!==i.enableMeasurement&&(o+="&enableMeasurement=".concat(i.enableMeasurement?1:0)),void 0!==i.showToolbarControl&&(o+="&toolbar=".concat(i.showToolbarControl?"true":"false")),void 0!==i.showPageHistoryButtons&&(o+="&pageHistory=".concat(i.showPageHistoryButtons?1:0)),void 0!==i.notesInLeftPanel&&(o+="&notesInLeftPanel=".concat(i.notesInLeftPanel?1:0)),void 0!==i.xdomainProxyUrl&&(n="string"==typeof i.xdomainProxyUrl?{url:i.xdomainProxyUrl}:i.xdomainProxyUrl,o+="&xdomain_urls=".concat(encodeURIComponent(JSON.stringify(n)))),(i.azureWorkaround||i.enableAzureWorkaround)&&(o+="&azureWorkaround=1"),i.useDownloader||(o+="&useDownloader=0"),i.disableWebsockets&&(o+="&disableWebsockets=1"),i.forceClientSideInit&&(o+="&forceClientSideInit=1"),i.loadAsPDF&&(o+="&loadAsPDF=1"),void 0!==i.workerTransportPromise&&(o+="&useSharedWorker=".concat(i.workerTransportPromise?"true":"false")),void 0!==i.pdftronServer&&i.pdftronServer&&(o+="&pdftronServer=".concat(encodeURIComponent(i.pdftronServer))),void 0!==i.singleServerMode&&(o+="&singleServerMode=".concat(i.singleServerMode?"true":"false")),void 0!==i.accessibleMode&&(o+="&accessibleMode=".concat(i.accessibleMode?1:0)),i.disableLogs&&(o+="&disableLogs=1"),i.enableViewStateAnnotations&&(o+="&enableViewStateAnnotations=1"),i.disableFlattenedAnnotations&&(o+="&disableFlattenedAnnotations=1"),i.highContrastMode&&(o+="&highContrastMode=1"),void 0!==i.selectAnnotationOnCreation&&(o+="&selectAnnotationOnCreation=".concat(i.selectAnnotationOnCreation?1:0)),(o+="&id=".concat(this.id)).length>0&&"&"===o[0]&&(o="#".concat(o.slice(1))),o},setInstanceData:function(e){c.set(this.element,{iframe:e,l:this.options.l||this.options.licenseKey,workerTransportPromise:this.options.workerTransportPromise})},_createHTML5:function(){var e=this,t=this.options.uiPath+this._getHTML5OptionsURL(),n=document.createElement("iframe");this.setInstanceData(n),n.id="webviewer-".concat(this.id),n.src=t,n.title="webviewer",n.frameBorder=0,n.width="100%",n.height="100%",n.setAttribute("allowfullscreen",!0),n.setAttribute("webkitallowfullscreen",!0),n.setAttribute("mozallowfullscreen",!0),this.iframe=n,this.options.backgroundColor&&n.setAttribute("data-bgcolor",this.options.backgroundColor),this.options.assetPath&&n.setAttribute("data-assetpath",encodeURIComponent(this.options.assetPath)),this.loadListener=function(){var t=e.iframe;try{e.instance=t.contentWindow.readerControl,void 0===e.instance?t.contentWindow.addEventListener("viewerLoaded",function(){e.instance=t.contentWindow.readerControl,e._viewerLoaded(t)}):e._viewerLoaded(t)}catch(n){e._viewerLoaded(t)}},n.addEventListener("load",this.loadListener),this.element.appendChild(n)},_createHTML5Mobile:function(){var e=this,t=this.options.uiPath+this._getHTML5OptionsURL(),n=document.createElement("iframe");this.setInstanceData(n),n.id="webviewer-".concat(this.id),n.src=t,n.frameborder=0,this.options.assetPath&&n.setAttribute("data-assetpath",encodeURIComponent(this.options.assetPath)),n.style.width="100%",n.style.height="100%",this.iframe=n,this.loadListener=function(){var t=e.iframe;try{e.instance=t.contentWindow.readerControl,void 0===e.instance?t.contentWindow.addEventListener("viewerLoaded",function(){e.instance=t.contentWindow.readerControl,e._viewerLoaded(t)}):e._viewerLoaded(t)}catch(n){e._viewerLoaded(t)}},n.addEventListener("load",this.loadListener),this.element.appendChild(n)},dispose:function(){c["delete"](this.element),l["delete"](this.element),this.instance.closeDocument(),window.removeEventListener("message",this.messageHandler),this.iframe.removeEventListener("load",this.loadListener),this.iframe=null},getInstance:function(){return this.instance},setCompleteInstance:function(e){this.completeInstance=e},getCompleteInstance:function(){return this.completeInstance},getSideWindowVisibility:function(){return this.getInstance().getShowSideWindow()},setSideWindowVisibility:function(e){this.getInstance().setShowSideWindow(e)},getShowSideWindow:function(){return this.getSideWindowVisibility()},setShowSideWindow:function(e){this.setSideWindowVisibility(e)},getToolbarVisibility:function(){console.warn("Unsupported method getToolbarVisibility")},setToolbarVisibility:function(e){this.getInstance().setToolbarVisibility(e)},getCurrentPageNumber:function(){return this.getInstance().getCurrentPageNumber()},setCurrentPageNumber:function(e){this.getInstance().setCurrentPageNumber(e)},getPageCount:function(){return this.getInstance().getPageCount()},getZoomLevel:function(){return this.getInstance().getZoomLevel()},setZoomLevel:function(e){this.getInstance().setZoomLevel(e)},rotateClockwise:function(){this.getInstance().rotateClockwise()},rotateCounterClockwise:function(){this.getInstance().rotateCounterClockwise()},getLayoutMode:function(){var e,t=this.getInstance().getLayoutMode(),n=this.iframe.contentWindow.CoreControls.DisplayModes;return t===n.Single?e=i.WebViewer.LayoutMode.Single:t===n.Continuous?e=i.WebViewer.LayoutMode.Continuous:t===n.Facing?e=i.WebViewer.LayoutMode.Facing:t===n.FacingContinuous?e=i.WebViewer.LayoutMode.FacingContinuous:t===n.Cover?e=i.WebViewer.LayoutMode.FacingCoverContinuous:t===n.CoverFacing&&(e=i.WebViewer.LayoutMode.FacingCover),e},setLayoutMode:function(e){var t=this.iframe.contentWindow.CoreControls.DisplayModes,n=t.Continuous;e===i.WebViewer.LayoutMode.Single?n=t.Single:e===i.WebViewer.LayoutMode.Continuous?n=t.Continuous:e===i.WebViewer.LayoutMode.Facing?n=t.Facing:e===i.WebViewer.LayoutMode.FacingContinuous?n=t.FacingContinuous:e===i.WebViewer.LayoutMode.FacingCover?n=t.CoverFacing:e===i.WebViewer.LayoutMode.FacingCoverContinuous&&(n=t.Cover),this.getInstance().setLayoutMode(n)},getToolMode:function(){return this.getInstance().getToolMode()},setToolMode:function(e){this.getInstance().setToolMode(e)},fitWidth:function(){var e=this.getInstance().docViewer;e.setFitMode(e.FitMode.FitWidth)},fitHeight:function(){},fitPage:function(){var e=this.getInstance().docViewer;e.setFitMode(e.FitMode.FitPage)},getFitMode:function(){var e=this.getInstance().getFitMode(),t=this.getInstance().docViewer.FitMode;switch(e){case t.FitWidth:return i.WebViewer.FitMode.FitWidth;case t.FitHeight:return i.WebViewer.FitMode.FitHeight;case t.FitPage:return i.WebViewer.FitMode.FitPage;case t.Zoom:return i.WebViewer.FitMode.Zoom;default:console.warn("Unsupported fit mode")}},setFitMode:function(e){e===i.WebViewer.FitMode.FitWidth?this.fitWidth():e===i.WebViewer.FitMode.FitHeight?this.fitHeight():e===i.WebViewer.FitMode.FitPage?this.fitPage():e===i.WebViewer.FitMode.Zoom?this.zoom():console.warn("Unsupported fit mode: ".concat(e))},zoom:function(){var e=this.getInstance().docViewer;e.setFitMode(e.FitMode.Zoom)},goToFirstPage:function(){this.getInstance().goToFirstPage()},goToLastPage:function(){this.getInstance().goToLastPage()},goToNextPage:function(){this.getInstance().goToNextPage()},goToPrevPage:function(){this.getInstance().goToPrevPage()},loadDocument:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={streaming:this.options.streaming},i=r({},n,t);void 0!==i.documentId&&(this.getInstance().docId=i.documentId),this.getInstance().loadDocument(this._correctRelativePath(e),i)},searchText:function(e,t){var n=0,i=t;if("string"==typeof i&&(i=t.split(",")),void 0!==i)for(var o=0;o<i.length;o++)"CaseSensitive"===i[o]?n+=1:"WholeWord"===i[o]?n+=2:"SearchUp"===i[o]?n+=4:"PageStop"===i[o]?n+=8:"ProvideQuads"===i[o]?n+=16:"AmbientString"===i[o]&&(n+=32);void 0===t?this.getInstance().searchText(e):this.getInstance().searchText(e,n)},setAnnotationUser:function(e){this.getInstance().setAnnotationUser(e)},setAdminUser:function(e){this.getInstance().setAdminUser(e)},setReadOnly:function(e){this.getInstance().setReadOnly(e)},downloadXodDocument:function(){if("xod"===this.documentType){var e=decodeURIComponent(this.options.initialDoc);window.open(e)}else console.warn("Unsupported method for this document type")},startPrintJob:function(e){"html5"===this.selectedType?this.getInstance().startPrintJob(e):console.warn("Unsupported method startPrintJob")},endPrintJob:function(){"html5"===this.selectedType?this.getInstance().endPrintJob():console.warn("Unsupported method endPrintJob")},_correctRelativePath:function(e){if("string"!=typeof e)return e;var t=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/"));return/^(\/|%2F|[a-z0-9-]+:)/i.test(e)?e:"".concat(t,"/").concat(e)},_testHTML5:function(){try{var e=document.createElement("canvas");return e&&e.getContext("2d")}catch(e){return!1}},_testWebAssembly:function(){return!(!window.WebAssembly||!window.WebAssembly.validate)},_supports:function(e){if(e===this.selectedType)return!0;for(var t=1;t<arguments.length;t++)if(arguments[t]===this.selectedType)return!0;return!1},_testCORS:function(){return"XMLHttpRequest"in window&&"withCredentials"in new XMLHttpRequest},isIE:function(){var e=navigator.userAgent.toLowerCase(),t=/(msie) ([\w.]+)/.exec(e)||/(trident)(?:.*? rv:([\w.]+)|)/.exec(e);return t?parseInt(t[2],10):t},isMobileDevice:function(){return!this.isIE()&&(0===this.scrollbarWidth()&&navigator.userAgent.match(/Edge/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Touch/i)||navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/Silk/i))},scrollbarWidth:function(){var e=document.createElement("div");e.style.cssText="width:100px;height:100px;overflow:scroll !important;position:absolute;top:-9999px",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t},isSameOrigin:function(e){var t=window.location,n=document.createElement("a");n.href=e,""===n.host&&(n.href=n.href);var i=window.location.port,o=n.port;return"http:"===n.protocol?(o=o||"80",i=i||"80"):"https:"===n.protocol&&(o=o||"443",i=i||"443"),n.hostname===t.hostname&&n.protocol===t.protocol&&o===i},runInIframe:function(e){var t=this.element.querySelector("iframe").contentWindow,n=this,i=function o(){n.element.removeEventListener("ready",o),e(t,n.getInstance(),t.$)};this.getInstance()?setTimeout(i,0):this.element.addEventListener("ready",i)}},i.WebViewer.Options={initialDoc:void 0,annotationAdmin:void 0,isAdminUser:void 0,annotationUser:void 0,assetPath:void 0,autoCreate:!0,azureWorkaround:!1,enableAzureWorkaround:!1,backgroundColor:void 0,backendType:void 0,css:void 0,config:void 0,custom:void 0,documentId:void 0,documentType:void 0,preloadWorker:void 0,extension:void 0,enableAnnotations:!0,filename:void 0,disableI18n:!1,disabledElements:void 0,disableWebsockets:!1,enableOfflineMode:!1,enableReadOnlyMode:!1,isReadOnly:!1,enableRedaction:!1,enableMeasurement:!1,encryption:void 0,externalPath:void 0,hideAnnotationPanel:!1,uiPath:"./ui/index.html",l:void 0,licenseKey:void 0,mobileRedirect:!1,path:"",pdfBackend:void 0,pdftronServer:void 0,singleServerMode:!1,fullAPI:!1,preloadPDFWorker:!0,serverUrl:void 0,serverUrlHeaders:void 0,showLocalFilePicker:!1,enableFilePicker:!1,showPageHistoryButtons:!0,showToolbarControl:void 0,startOffline:!1,streaming:void 0,type:"html5",useDownloader:!0,workerTransportPromise:void 0,xdomainProxyUrl:void 0,ui:void 0,forceClientSideInit:!1,loadAsPDF:!1,accessibleMode:void 0,disableLogs:!1,
enableViewStateAnnotations:!1,highContrastMode:!1,selectAnnotationOnCreation:!1,notesInLeftPanel:!1,disableFlattenedAnnotations:!1},i.WebViewer.LayoutMode={Continuous:"Continuous",FacingCoverContinuous:"CoverContinuous",Facing:"Facing",FacingContinuous:"FacingContinuous",FacingCover:"FacingCover",Single:"SinglePage"},i.WebViewer.ToolMode={AnnotationCreateArrow:"AnnotationCreateArrow",AnnotationCreateCallout:"AnnotationCreateCallout",AnnotationCreateEllipse:"AnnotationCreateEllipse",AnnotationCreateFreeHand:"AnnotationCreateFreeHand",AnnotationCreateFreeText:"AnnotationCreateFreeText",AnnotationCreateLine:"AnnotationCreateLine",AnnotationCreatePolygon:"AnnotationCreatePolygon",AnnotationCreatePolygonCloud:"AnnotationCreatePolygonCloud",AnnotationCreatePolyline:"AnnotationCreatePolyline",AnnotationCreateRectangle:"AnnotationCreateRectangle",AnnotationCreateSignature:"AnnotationCreateSignature",AnnotationCreateStamp:"AnnotationCreateStamp",AnnotationCreateSticky:"AnnotationCreateSticky",AnnotationCreateTextHighlight:"AnnotationCreateTextHighlight",AnnotationCreateTextSquiggly:"AnnotationCreateTextSquiggly",AnnotationCreateTextStrikeout:"AnnotationCreateTextStrikeout",AnnotationCreateTextUnderline:"AnnotationCreateTextUnderline",AnnotationEdit:"AnnotationEdit"},i.WebViewer.FitMode={FitHeight:"FitHeight",FitPage:"FitPage",FitWidth:"FitWidth",Zoom:"Zoom"},i.WebViewer.SearchMode={CaseSensitive:1,WholeWord:2,SearchUp:4,PageStop:8,ProvideQuads:16,AmbientString:32},i.WebViewer.User=function(e,t,n){this.username=e,this.isAdmin=void 0!==t&&t,this.isReadOnly=void 0!==n&&n};var u=function(e,t){return new Promise(function(n,o){e.l=e.l||e.licenseKey,e.azureWorkaround=e.azureWorkaround||e.enableAzureWorkaround,e.annotationAdmin=e.annotationAdmin||e.isAdminUser,e.enableReadOnlyMode=e.enableReadOnlyMode||e.isReadOnly,e.showLocalFilePicker=e.showLocalFilePicker||e.enableFilePicker,t.addEventListener("ready",function a(){t.removeEventListener("ready",a);try{var e=t.querySelector("iframe").contentWindow,i=e.Tools;if(void 0===i)return o("Viewer isn't instantiated correctly. It could be caused by the 'path' option in the WebViewer constructor not being defined correctly. The 'path' option should be relative to the HTML file you're loading the script on and the lib folder needs to be publicly accessible.");var c=s.getInstance(),l=r({},c,{dispose:s.dispose.bind(s),Tools:i,Annotations:e.Annotations,CoreControls:e.CoreControls,PartRetrievers:e.CoreControls.PartRetrievers,Actions:e.Actions,PDFNet:e.PDFNet,annotManager:c.docViewer.getAnnotationManager(),docViewer:c.docViewer,iframeWindow:e});s.setCompleteInstance(l),n(l)}catch(a){o("Viewer is on a different domain, the promise from WebViewer function is rejected and API functions will not work because of cross domain permissions. See https://www.pdftron.com/kb_cross_origin for more information.")}});var s=new i.WebViewer(e,t)})},h=function(e){for(var t=s(c),n=0;n<t.length;n++){var i=t[n];if(i.iframe===e)return i}return null};u.l=function(e){var t=h(e);return t&&t.l},u.workerTransportPromise=function(e){var t=h(e);return t&&t.workerTransportPromise};var f=function(e){var t=s(c);if(!t.length||!t.filter(function(e){return e.instance}).length)return console.warn("WebViewer.getInstance() was called before any instances were available"),null;if(t.length>1&&!e)throw new Error("More than one instance of WebViewer was found, and no element was passed into getInstance(). Please specify which instance you want to get.");return e?(c.get(e)||{}).instance:(t[0]||{}).instance};u.getInstance=f,window.getInstance=f,window.PDFTron=i,window.WebViewer=u,t["default"]=u}])}),function(){var e,t,n,i,o,r;window.zE||(e=document,t="script",n="8e0cc2ef-2561-49fc-a635-be6370f3ac2a",i=window.zE=window.zEmbed=function(){i._.push(arguments)},o=i.s=e.createElement(t),r=e.getElementsByTagName(t)[0],i.set=function(e){i.set._.push(e)},i._=[],i.set._=[],o.async=!0,o.setAttribute("charset","utf-8"),o.src="https://static.zdassets.com/ekr/asset_composer.js?key="+n,i.t=+new Date,o.type="text/javascript",r.parentNode.insertBefore(o,r)),window.zESettings={webWidget:{position:{horizontal:"right",vertical:"top"}}},window.zE(function(){window.zE.hide()})}.call(this);