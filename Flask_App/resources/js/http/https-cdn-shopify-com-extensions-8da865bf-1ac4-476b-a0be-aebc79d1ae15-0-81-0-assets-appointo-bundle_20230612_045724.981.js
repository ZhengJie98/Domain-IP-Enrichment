!function(){var t={247:function(t,e){var o,n,a;n=[],void 0===(a="function"==typeof(o=function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function e(t,e){return-1===t.indexOf(e)?t.length:t.indexOf(e)}function o(t){var o=t.replace(/^v/,"").replace(/\+.*$/,""),n=e(o,"-"),a=o.substring(0,n).split(".");return a.push(o.substring(n+1)),a}function n(t){return isNaN(Number(t))?t:Number(t)}function a(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!t.test(e))throw new Error("Invalid argument not valid semver ('"+e+"' received)")}function i(t,e){[t,e].forEach(a);for(var i=o(t),r=o(e),d=0;d<Math.max(i.length-1,r.length-1);d++){var c=parseInt(i[d]||0,10),l=parseInt(r[d]||0,10);if(c>l)return 1;if(l>c)return-1}var s=i[i.length-1],p=r[r.length-1];if(s&&p){var u=s.split(".").map(n),m=p.split(".").map(n);for(d=0;d<Math.max(u.length,m.length);d++){if(void 0===u[d]||"string"==typeof m[d]&&"number"==typeof u[d])return-1;if(void 0===m[d]||"string"==typeof u[d]&&"number"==typeof m[d])return 1;if(u[d]>m[d])return 1;if(m[d]>u[d])return-1}}else if(s||p)return s?-1:1;return 0}var r=[">",">=","=","<","<="],d={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function c(t){if("string"!=typeof t)throw new TypeError("Invalid operator type, expected string but got "+typeof t);if(-1===r.indexOf(t))throw new TypeError("Invalid operator, expected one of "+r.join("|"))}return i.validate=function(e){return"string"==typeof e&&t.test(e)},i.compare=function(t,e,o){c(o);var n=i(t,e);return d[o].indexOf(n)>-1},i})?o.apply(e,n):o)||(t.exports=a)}},e={};function o(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,o),i.exports}o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var n={};!function(){"use strict";o.d(n,{er:function(){return I},JJ:function(){return M}});let t=window.Shopify?window.Shopify.shop:"c";async function e(t="",e={}){const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return{data:await o.json()}}async function a(t){await e("/cart/change.js",t)}async function i(){let o=(await fetch("/cart.js",{method:"GET",headers:{Accept:"application/json"}}).then((t=>t.json()))).items.map((t=>{let e=t.properties;return{variant_uuid:t.id,timestring:e&&e._start_time?e._start_time:null,team_member_id:e&&e._team_member_id?e._team_member_id:null,quantity:t.quantity}})),n=await e("https://app.appointo.me/scripttag/validate_cart",{data:o,shopify_domain:t});if(n.data){let t=!1;if(n.data){if(!n.data.validate_cart)return;n.data.data.map(((e,o)=>{e.exists_in_appointo&&(e.is_available?e.actual_quantity>e.max_quantity&&(a({line:o+1,quantity:e.max_quantity}),t=!0):(a({line:o+1,quantity:0}),t=!0))}))}t&&(window.alert("Items in the cart has been updated due to changes in availability of the timeslots chosen"),setTimeout((()=>{window.location.reload()}),3e3))}}!function(){const t=window.XMLHttpRequest.prototype.open;function e(){i()}window.XMLHttpRequest.prototype.open=function(){return this.addEventListener("load",(function(){["/cart/add.js","/cart/change.js"].includes(this._url)&&e(JSON.parse(this.response))})),t.apply(this,arguments)},function(t,o){"function"==typeof o&&(t.fetch=function(){const t=o.apply(this,arguments);return t.then((t=>{[`${window.location.origin}/cart/add.js`,`${window.location.origin}/cart/change.js`].includes(t.url)&&t.clone().json().then((t=>e()))})),t})}(window,window.fetch)}();var r=o(247);let d={};const c="https://app.appointo.me";let l="",s={},p=[],u=window.Shopify?window.Shopify.shop:"c",m=null,f=null,y=!1,h="popup",w=!1,g=!1,b=!1,_=[],v=!1,j="",A=!1,T=null,E=!1;const $=[1844456587327];function x(t){return new Promise((e=>{t=t||2e3,setTimeout((function(){e()}),t)}))}const S=["choraltracks-com.myshopify.com"];function C(){let t=(e={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,o,n){e[o]=n})),e).variant;var e;return t||""}function q(t,e){window.sessionStorage.setItem(t,e)}async function P(t=""){const e=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});return{data:await e.json()}}function k(t,e){return new Promise((o=>{if(v)window.showAppointoModal({...t.data,shopify_product:s,calendar_type:h,toolTip:A,addToCartBtn:T}),o();else{let n=["https://app.appointo.me/popups-main.js"];if(!A){let t=document.getElementById("appointo-btn");t&&(t.innerHTML=d.loadingCalendar?`${d.loadingCalendar}...`:"Loading Calendar...",t.style.opacity=.5)}n.map((n=>{var a=document.createElement("script");a.setAttribute("src",`${n}`),a.defer=!0,a.addEventListener("load",(function(){if(!A){let t=document.getElementById("appointo-btn");t&&(t.innerHTML=j,t.style.opacity=1)}v=!0,e||window.showAppointoModal({...t.data,shopify_product:s,calendar_type:h,toolTip:A,addToCartBtn:T}),o()}),!1),document.body.appendChild(a)}))}}))}window.Shopify&&window.location.pathname.includes("/cart")&&i();const I=[".appointo-custom-btn",".pagefly-booking-sidepanda",".payment-and-quantity__add .product-add",".atc-btn-container .add_to_cart","#product-add-to-cart",".productForm-submit",".gPreorderAddToCartBtn",".ProductForm__AddToCart",".product-form__cart-submit",".lh-add_to_cart",".atc-btn-container .add_to_cart",".add-to-cart-btn",".product__add-to-cart",".product__add-to-cart-button","#add-to-cart","#AddToCart--product-template","#addToCart","#AddToCart-product-template","#AddToCart",'[data-add-to-cart="Add to cart"]','[data-label="Add to Cart"]','[data-label="Add to cart"]',".add_to_cart",".product-form--atc-button",".product-form--add-to-cart","#AddToCart-product",".AddtoCart","button.btn-addtocart",".product-submit",'[value="Add to Cart"]','[aria-label="Add to cart"]',"[data-action='add-to-cart']",'[name="add"]',"#signpanda-btn"];let L=window.Shopify?window.Shopify.shop:"c";function M(){for(let t=0;t<I.length;t++){const e=document.querySelectorAll(I[t]);for(let t=0;t<e.length;t++){e[t].style.display="block"}}const t=document.querySelectorAll(".shopify-payment-button");t.length&&(t[0].style.display="block")}["galenic.myshopify.com"].includes(L)||function(){for(let t=0;t<I.length;t++){const e=document.querySelectorAll(I[t]);for(let t=0;t<e.length;t++)e[t].style.display="none"}const t=document.querySelectorAll(".shopify-payment-button");t.length&&(t[0].style.display="none")}(),setTimeout((()=>{M()}),1500),function(){const t=window.location.pathname,e=t.substring(t.lastIndexOf("/")+1);if(e&&!["all","/","cart","search"].includes(e)&&t.includes("products/"))return fetch(`${window.Shopify.routes.root||"/"}products/${e}.js`,{method:"GET",headers:{Accept:"application/json"}});{let t=document.getElementsByClassName("appointo-custom-btn");if(t&&t.length>0){let e=t[0].getAttribute("data-appointo-product-handle"),o=t[0].getAttribute("type");return h=o||"popup",fetch(`${window.Shopify.routes.root||"/"}products/${e}.js`,{method:"GET",headers:{Accept:"application/json"}})}}return Promise.resolve({status:404})}().then((t=>404!==t.status?t.clone().json():{status:404})).then((t=>{if(404!==t.status)return(()=>{let t="https://unpkg.com/dayjs@1.10.4";[`${t}/dayjs.min.js`].map((e=>{var o=document.createElement("script");o.setAttribute("src",`${e}`),o.defer=!0,o.addEventListener("load",(function(){["plugin/utc.js","plugin/timezone.js","locale/de.js","locale/nl.js","locale/fr.js","locale/es.js","locale/et.js","locale/it.js","locale/sk.js","locale/sl.js","locale/fi.js","locale/sv.js","locale/da.js","locale/is.js","locale/ca.js","locale/nb.js","locale/pt.js","locale/bg.js","locale/ar.js","locale/ru.js","locale/zh-tw.js"].map((e=>{var o=document.createElement("script");o.defer=!0,o.setAttribute("src",`${t}/${e}`),document.body.appendChild(o)}))}),!1),document.body.appendChild(o)}))})(),async function(){let t=await(async(t,e)=>{let o={"de-DE":"de","ro-RO":"ro","bg-BG":"bg","zh-TW":"zh-tw","da-Dansk":"da","et-EE":"et"},n=window.Shopify&&window.Shopify.locale?window.Shopify.locale:"en";if(o[n]&&(n=o[n]),"i-stra-exclusive-day-tours.myshopify.com"===e){let t=splitHostname();t.subdomain&&"www"!==t.subdomain&&(n=t.subdomain)}return{data:{...(await P(`${t}/scripttag/locale_strings?locale=${n}&shopify_domain=${e}`)).data,locale:n}}})(c,u);window.Appointo={translations:t.data},d=window.Appointo.translations}(),s={product:t},P(`${c}/scripttag/product?shop=${u}&product_uuid=${s.product.id}&force_check=true`).then((async t=>{for(M(),p=t.data.appointments,m=t.data.goto_flow,f=t.data.cart_button_meta,y=t.data.activate_text,w="multi_day"===t.data.scenario,b=t.data.has_subscriptions;;){if(window.dayjs_plugin_utc&&window.dayjs_plugin_timezone){console.log("no delay");break}console.log("dayjs delay"),await x(50)}var e,o;if(w)for((e=document.createElement("script")).defer=!0,e.setAttribute("src"," https://cdnjs.cloudflare.com/ajax/libs/litepicker/2.0.11/litepicker.umd.min.js"),e.addEventListener("load",(function(){g=!0})),document.head.appendChild(e);!g;)console.log("litepicker delay"),await x(50);for(y&&((e=document.createElement("script")).defer=!0,e.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/libphonenumber-js/1.9.23/libphonenumber-js.min.js"),document.head.appendChild(e)),o=d.locale,dayjs.locale(o);;){if(d.locale){console.log("no delay");break}console.log("locale delay"),await x(50)}if(l=C(),l||(l=s.product.variants[0].id),await async function(t){let e=await P(`https://app.appointo.me/scripttag/selling_plan_group?duration_uuid=gid://shopify/ProductVariant/${t}&&shopify_domain=${u}`);return _=e.data,_}(l),console.log("come here",s),!p.length&&s.product.selling_plan_groups&&0===s.product.selling_plan_groups.length&&0===_.length)return Promise.resolve();q("customer_uuid",function(t,e){for(var o="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,i=0;i<e;i++)o+=n.charAt(Math.floor(Math.random()*a));return`${t}_${o}`}(u,6)),q("currentProductId",s.product.id);let n=[];if(f&&f.querySelector){const t=document.querySelectorAll(f.querySelector);t.length>0&&(T=t[0],n=t)}else for(let t=0;t<I.length;t++){const e=document.querySelectorAll(I[t]);if(e.length>0){T=e[0],n=e;break}}if(t.data.global_css){var a=document.createElement("style");a.innerHTML=t.data.global_css,document.head.appendChild(a)}let i=$.includes(s.product.id)||S.includes(u);if(window.shopify_product=s,window.appointments=p,window.addToCartBtn=T,T&&b){window.money_format=t.data.money_format.replace("{{amount}}","0.00"),l=C(),l||(l=s.product.variants[0].id);let e=s.product.variants.find((t=>`${t.id}`==`${l}`)),o=null;E=!0,function(){if(window.jQuery&&r(window.jQuery.fn.jquery,"1.7"))window.$||(window.$=window.jQuery),console.log("jquery present",window.jQuery.fn.jquery,window.$);else{var t=document.createElement("script");t.setAttribute("src","https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"),t.async=!0,t.addEventListener("load",(function(){}),!1),document.body.appendChild(t)}}(),await k(t,!0),window.initSubscription({addToCartBtn:T,variants:s.product.variants,product:s.product,selected_selling_plan_group:o,price:e.price,variant:l,createSub:!0,appt_present:p.length>0,one_time_counts:_,has_subscriptions:b})}if(0===p.length)return;if(console,"embed"===h);else if(T&&!i){let t=T.classList.value.replace("ajax-submit","");j=d.scheduleTime;let e="",o=".shopify-payment-button";if(f&&f.class&&(t=f.class),f&&f.title&&(j=f.title),f&&f.style&&(e=f.style),f&&f.buybtn_selector&&(o=f.buybtn_selector),"cart_v2"===m){T.insertAdjacentHTML("beforebegin",`<div id="appointo-btn" style="${e} margin-bottom: 10px" class="${t}">${j}</div>`);let o=function(){let t=[];for(var e=document.body.getElementsByTagName("form"),o=e.length,n=0;n<o;n++)if(null!=e[n].getAttribute("action")){var a=e[n].getAttribute("action");("/cart/add"===a||a.includes("/cart/add"))&&t.push(e[n])}return t}();o.length>0?o.map((t=>{t.addEventListener("click",(function(t){let e=!1;if(Array.from(n).forEach((o=>{o.contains(t.target)&&(e=!0)})),e){let e=((t,e)=>{let o=document.querySelectorAll('[name*="properties"]');for(let t=0;t<o.length;t++){const n=o[t].name.replace("properties[","").replace("]",""),a=o[t].value;e[n]=a}return e})(0,{}),o=!1;e.hasOwnProperty("_start_time")&&e.hasOwnProperty("_timezone")&&(o=!0),o?document.getElementById("appointo-date-error").remove():(document.getElementById("appointo-date-error")||document.getElementById("appointo-btn").insertAdjacentHTML("afterend",'<div id="appointo-date-error" class="appointo-date-error">Please select a date before adding this item to cart</div>'),t.stopImmediatePropagation(),t.preventDefault())}}),!0)})):console.log("form not found")}else T.insertAdjacentHTML("afterend",`<div id="appointo-btn" style="${e}" class="${t}">${j}</div>`),T.remove();setTimeout((()=>{if(f&&!f.show_buy_btn){let t=document.querySelectorAll(o);t.length&&t[0].remove()}}),1e3)}else{if("tantalus-vineyard.myshopify.com"===u)return;A=!0}if(A){let t=document.createElement("div");t.innerHTML=`<button id="appointo-btn" class="appointo-check-avail appointo-tooltip"><img src="https://appointment-booking-shopify.s3.ap-south-1.amazonaws.com/icon.png" class="appointo-icon"/><span class="appointo-tooltiptext" id="appointo-tooltip">${d.selectTime}</span></button>`,document.body.appendChild(t)}let c=document.getElementById("appointo-btn");["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document?"embed"!==h?(c.onclick=async()=>{k(t,!1)},E||k(t,!0)):k(t,!1):A?(c.onclick=async()=>{k(t,!1)},k(t,!1)):"embed"!==h?c.onclick=async()=>{k(t,!1)}:k(t,!1)}))}))}()}();