function btv_Ajax(){this.config={requestUrl:"/ajax.php",rpcUrl:"/rpc.php",modalID:"#boxOverlay"};this.hideoverlay=true;modal=$(this.config.modalID);this.doLog=function(message,data,type){if(!type)type="error";if(console)if(type=="error")console.error(message);else console.log(message);if(typeof usersid!=="undefined"){return $.ajax(this.config.rpcUrl,{dataType:"json",method:"post",data:{usersid:usersid,frontsid:frontsid,action:"frontendlog",message:message,type:type,data:data}}).done(function(http){})}};this.doCall=function(url,param,options){if(!param)param={};param.usersid=usersid;param.frontsid=frontsid;param.referer=window.location.href;let showmessages=true;if(options)if(options.showmessages===false)showmessages=false;let retval=new Promise((resolve,reject)=>{$.ajax(url,{dataType:"json",method:"post",data:param,success:function(http){if(http.result==="error"){if(console&&http.details)console.log(http.details);if(showmessages){let message=http.friendly_error?http.friendly_error:"An unknown server-side error has occurred";if(http.messages){message+="<ul>";http.messages.forEach(item=>{message+="<li>"+item["message"]+"</li>"});message+="</ul>"}ajax.flashMessage("danger",message,true)}reject(http.friendly_error?http.friendly_error:"An unknown server-side error has occurred");return}if(http.reloadBoxes){$.each(http.reloadBoxes,function(idx,item){if($("#async"+item.code+"_"+item.instance).length>0){$("#async"+item.code+"_"+item.instance).html(item.html)}})}resolve(http)},error:function(jqXHR,errorStatus,errorThrown){if(param.ignoreerror)return;if(jqXHR.responseJSON&&jqXHR.responseJSON.details){let message=jqXHR.responseJSON.friendly_error?jqXHR.responseJSON.friendly_error:"An error occured communicating with the server. If the problem persists, please contact our technical support.";if(showmessages){ajax.flashMessage("danger",message)}if(console)console.log(errorThrown+"<br/>"+jqXHR.responseJSON.details);reject(message);return}else{if(console)if(errorThrown!="abort_from_rrw")console.log(errorThrown)}reject("Exception during ajax call")}})});Promise.all([retval]).then(values=>{$(".lazy").Lazy()});return retval};this.closeModal=function(){modal=$(this.config.modalID);modal.stop();if(modal.modal)modal.modal("hide")};this.hideOverlayBox=function(){this.hideoverlay=true};this.flashMessage=function(type,msg,noautoclose){if(type=="error"||type=="unsuccess")type="danger";if(typeof window.alertitm=="undefined")window.alertitm=null;if(window.alertitm){if(window.alertitm)window.alertitm.alert("close");window.alertitm=null}window.alertitm=$('<div class="alert alert-'+type+' alert-dismissible show fade flashmessage "  role="alert" ><i class="bi bi-exclamation-triangle-fill"></i> <a href="#" class="btn-close" data-bs-dismiss="alert" aria-label="close"></a>'+msg+"</div>");var overl=this.showOverlayBox(null,function(){if(window.alertitm)window.alertitm.alert("close");window.alertitm=null});$("body").append(alertitm);var top=$(document).scrollTop()+$(window).height()/2-$(alertitm).height()/2;window.alertitm.css("top",top<0?0:top);if(!noautoclose){window.alertitm.delay(3e3).fadeOut(500,function(){if(window.alertitm)window.alertitm.alert("close");window.alertitm=null})}alertitm.on("closed.bs.alert",function(){overl.hide(200,function(){$(this).remove()})})};this.callDialogCallback=function(){this.closeModal();this.dialogcallback()};this.confirm=function(msg,callback){this.dialogcallback=callback;modal=$(this.config.modalID);modal.find(".modal-title").html("Confirm");modal.find(".modal-body").html(msg);htmlbuttons='<button class="btn btn-lg btn-danger" type="button" onclick="ajax.callDialogCallback()">Yes</button><button class="btn btn-lg btn-secondary" type="button" onclick="ajax.closeModal()">No</button>';modal.find(".modal-footer").html(htmlbuttons);if(!modal.hasClass("in"))modal.modal("show")};this.currentModalBoxExecute=function(func,value){modal=$(this.config.modalID);box=modal.data("callingBox");box[func](value)};this.showOverlayFromHTML=function(source,title,boxfnc){modal=$(this.config.modalID);modal.data("callingBox",boxfnc);modal.find(".modal-title").html(title);modal.find(".modal-body").html(source);htmlbuttons=null;modal.find(".modal-footer").toggle(htmlbuttons!=null).html(htmlbuttons);if(!modal.hasClass("in"))modal.modal("show")};this.showOverlayBox=function(parent,clickCallBack){this.hideOverlayBox();this.hideoverlay=false;var item=$('<div class="overlay"></div>');$(item).click(clickCallBack);$("body").append(item);if(parent){if(parent.offset()&&parent.width()){item.css({postion:"absolute",left:parent.offset().left,top:parent.offset().top,width:parent.width(),height:parent.height()})}}else{item.css({postion:"absolute",left:0,top:$(document).scrollTop(),width:$(window).width(),height:$(window).height()})}item.show();return item};this.showDialog=function(boxCode,boxInstance,data,callback){var param=data?data:{};if(!param.boxes)param.boxes=[];param.box=boxCode;param.box_instance=boxInstance;param.showModal=true;param.boxes.push({code:boxCode,instance:boxInstance});modal=$(this.config.modalID);this.doCall(this.config.requestUrl,param).then(function(http){modal.data("box",boxCode);if(http.content=="")return false;ajax.processModalResult(http);$(".lazy").Lazy();if(callback){callback(http)}})};this.processModalResult=function(http){modal=$(this.config.modalID);modal.find(".modal-title").html(http.header);modal.find(".modal-body").html(http.content);if(http.boxCode)modal.data("box",http.box_code);var htmlbuttons="";if(http.buttons){$.each(http.buttons,function(idx,item){htmlbuttons+='<button class="btn btn-sm btn-'+(item.classname?item.classname:"primary")+'" onclick="'+item.action+'">'+item.title+"</button>"});modal.find(".modal-footer").html(htmlbuttons)}else{modal.find(".modal-footer").html(http.footer)}if(modal.find(".modal-footer").html()==="")modal.find(".modal-footer").hide();else modal.find(".modal-footer").show();if(!modal.hasClass("in"))modal.modal("show");$(".lazy").Lazy()};this.findAjaxContainer=function(item){return item.is(".ajaxcontainer")?item:item.parents(".ajaxcontainer:first")};this.runBoxProcess=function(ajaxContainer,process,data,callback,callbackfail,boxcontainer){param=data?data:{};if(!boxcontainer)boxcontainer=ajaxContainer;var overlayitem;if(data.showoverlay){overlayitem=this.showOverlayBox(boxcontainer)}param.box=ajaxContainer.data("box-code");param.box_instance=ajaxContainer.data("box-instance");if(process)param.process=process;this.doCall(this.config.requestUrl,param).then(function(http){if(overlayitem){overlayitem.remove()}if(callback)callback(http)}).catch(function(http){if(overlayitem){overlayitem.remove()}callbackfail(http)})};this.showProductOrder=function(productID,btn){if(btn)$(btn).attr("disabled","disabled").append(' <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>');this.showDialog("boxProductOrder","general",{products_id:productID},function(){if(btn){$(btn).attr("disabled",null).find(".fa-spinner").remove()}});return false};this.doAction=function(action,data,affectedBoxes,button,silent,overlayParent,callback){if(button){$(button).attr("disabled","disabled").append(' <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>')}if(affectedBoxes){data.boxes=new Array;$.each(affectedBoxes,function(idx,item){if($("#async"+item.code+"_"+item.instance).length>0){data.boxes.push(item)}})}this.rpcCall(action,data,function(result){if(button){$(button).attr("disabled",null).find(".fa-spinner").remove()}if(data.closeDialog)ajax.closeModal();if(callback)callback(result)},silent,overlayParent)};this.runFormMethod=function(form){param={};if(form)formToObject(form,param);this.doAction($(form).data("runmethod")?$(form).data("runmethod"):$(form).data("method"),param,[],$(form).data("silent"),$(form).data("overlayParent"))};this.showMessages=function(messages){if(messages&&messages.length>0){var message=messages[0];var msg="";if(message.header)msg+='<span class="h4 alert-heading">'+message.header+"</span><hr>";msg+=message.message;if(message.buttons&&message.buttons.length>0){msg+='<div class="alert-buttons">';$.each(message.buttons,function(idx,item){msg+=" <a "+(item.closeMessage?'data-dismiss="alert"':"")+' class="btn btn-lg-lg '+item.classes+'" href="'+(item.href?item.href:"javascript:void(0)")+'">'+item.label+"</a>"});msg+="</div>"}ajax.flashMessage(message.type,msg,message.options&&message.options.noautoclose)}};this.rpcMethod=function(fnc,data,options){let overlayParent=null;let silent=false;if(options){overlayParent=options.overlayParent;silent=options.silent}return new Promise((resolve,reject)=>{let overlayitem;if(!data)data={};if(overlayParent){overlayitem=this.showOverlayBox($(overlayParent))}data.action=fnc;this.doCall(this.config.rpcUrl,data,options).then(function(returndata){if(returndata.redirect)window.location.replace(returndata.redirect);if(!silent&&returndata.messages.length>0){ajax.showMessages(returndata.messages)}if(returndata.modal){ajax.processModalResult(returndata.modal)}if(overlayitem)overlayitem.remove();resolve(returndata)}).catch(function(err){if(overlayitem)overlayitem.remove();reject(err)})})};this.rpcCall=function(fnc,data,callback,silent,overlayParent){var overlayitem;if(!data)data={};if(overlayParent){overlayitem=this.showOverlayBox($(overlayParent))}data.action=fnc;this.doCall(this.config.rpcUrl,data).then(function(http){if(http.redirect)window.location.replace(http.redirect);if(!silent&&http.messages.length>0){ajax.showMessages(http.messages)}if(http.modal){ajax.processModalResult(http.modal)}if(overlayitem)overlayitem.remove();if(callback)callback(http)},function(){if(overlayitem)overlayitem.remove()})};this.showPasswordForgotten=function(width,height,param){this.showDialog("boxPasswordForgotten","general",param);return false}}var ajax=new btv_Ajax;$(document).on("click",'button[data-role="submit"],a[data-role="submit"]',function(event){event.stopPropagation();var form=$(this).parents("form:first");form.data("runmethod",$(this).data("method"));form.submit()});$(document).on("keyup","select[data-rpc-function]",function(e){var keyCode=e.keyCode||e.which;if(keyCode===13){e.stopPropagation();$(this).click()}});$(document).on("click","[data-rpc-function]",function(event){event.stopPropagation();var itm=this;if($(this).is("select"))if($(this).data("last-val")==$(this).val()){return false}var data=$(this).parents(".record:first").data();var objdata=$(this).data();if(!data)data={};$.each(objdata,function(idx,value){if(typeof item!="object")data[idx]=value});data["value"]=$(this).val();var rpcfunction=$(this).data("rpc-function");var callbackfunc=$(this).data("rpc-callback");var triggerElement=this;ajax.rpcCall(rpcfunction,data,function(http){if(callbackfunc)eval(callbackfunc+"(triggerElement,http)");else $(event.currentTarget).parents(".ajaxcontainer").trigger("rpcfinished",{call:rpcfunction,triggerElement:triggerElement},http);$(itm).data("last-val",data["value"])},false);return false});$(document).on("click","[data-modal-box][data-modal-instance]",function(event){event.stopPropagation();var data=$(this).parents(".record:first").getRPCData();var objdata=$(this).getRPCData();if(!data)data={};data=mergeArray(data,objdata);ajax.showDialog($(this).data("modal-box"),$(this).data("modal-instance"),data)});$(document).on("click","[data-overlay]",function(event){event.stopPropagation();var ajaxcontainer=ajax.findAjaxContainer($(this));var wdwfunc=getBoxFunction(ajaxcontainer.data("box-code"),ajaxcontainer.data("box-instance"));ajax.showOverlayFromHTML($($(this).data("overlay")).html(),$(this).data("overlay-title"),wdwfunc)});$(document).on("change","[data-trigger]",function(event){event.stopPropagation();var itm=this;if($(event.currentTarget).is("select"))if($(event.currentTarget).data("last-val")==$(event.currentTarget).val()){return false}$(this).data("last-val",$(event.currentTarget).val());var triggerElement=this;var parent=$(event.currentTarget).parents(".ajaxcontainer:first");if(parent.length==0)parent=$(event.currentTarget).parents("form:first");parent.trigger($(this).data("trigger"),{triggerElement:triggerElement,value:$(itm).val()})});$(document).on("click",".btn-order-product",function(){ajax.showProductOrder($(this).data("pid"),this)});$(document).on("shown.bs.modal",ajax.config.modalID,function(e){var box=$(ajax.config.modalID).data("box");$("."+box).trigger("ready")});function AsyncRequest(item,data){var data=Object.assign({},data);var ajaxContainer=ajax.findAjaxContainer($(item));var form=$(item).is("form")?$(item):$(item).parents("form:first");if(ajaxContainer.length==0)ajaxContainer=form;$(form).find('button[data-role="submit"],button[type="submit"]').attr("disabled","");this.config={requestUrl:"/ajax.php"};var overlayitem;param=data?data:{};if(form)formToObject(form,param);if(param.showbackdrop){if(param.showbackdrop===true){overlayitem=ajax.showOverlayBox($("#"+ajaxContainer.attr("id")))}else overlayitem=ajax.showOverlayBox($(data.showbackdrop))}param.boxes=param.boxes?param.boxes:Array();param.boxes.push({code:ajaxContainer.data("box-code"),instance:ajaxContainer.data("box-instance")});ajax.runBoxProcess(ajaxContainer,param.process,param,function(http){if(ajaxContainer&&http.content){$(ajaxContainer).html(http.content)}else if(http.content){$("#async"+boxCode+"_"+boxInstance).html(http.content)}if(http.redirect){window.location.href=http.redirect;return}if(overlayitem)overlayitem.remove();if(http.messages.length>0)ajax.showMessages(http.messages);if(form.data("close-dialog")&&http.messages&&http.messages.length>0&&http.messages[0].type=="success"){ajax.closeModal()}$(form).find('button[data-role="submit"],button[type="submit"]').attr("disabled",null)},function(){if(overlayitem)overlayitem.remove()})}$(document).on("click","a[data-box-process],button[data-box-process],.card[data-box-process],input[data-box-process]",function(){var obj=this;var data=$(this).parents(".record:first").data();data=data?data:{};var objdata=$(this).data();$.each(objdata,function(idx,value){data[idx]=value});data.caller=$(this).attr("name");if(!data.nobackdrop&&!data.showbackdrop)data.showbackdrop=true;if($(this).data("confirm-message")){ajax.confirm($(this).data("confirm-message"),function(){AsyncRequest(obj,data)})}else{AsyncRequest(this,data)}});jQuery.fn.extend({getRPCData:function(){retval={};data=this.data();$.each(data,function(i,a){if(typeof a!="object")retval[i]=a});return retval}});function mergeArray(a,b){$.each(b,function(i,v){if(typeof item!="object")a[i]=v});return a}!function(t,e){"use strict";function r(r,a,i,u,l){function f(){L=t.devicePixelRatio>1,i=c(i),a.delay>=0&&setTimeout(function(){s(!0)},a.delay),(a.delay<0||a.combined)&&(u.e=v(a.throttle,function(t){"resize"===t.type&&(w=B=-1),s(t.all)}),u.a=function(t){t=c(t),i.push.apply(i,t)},u.g=function(){return i=n(i).filter(function(){return!n(this).data(a.loadedName)})},u.f=function(t){for(var e=0;e<t.length;e++){var r=i.filter(function(){return this===t[e]});r.length&&s(!1,r)}},s(),n(a.appendScroll).on("scroll."+l+" resize."+l,u.e))}function c(t){var i=a.defaultImage,o=a.placeholder,u=a.imageBase,l=a.srcsetAttribute,f=a.loaderAttribute,c=a._f||{};t=n(t).filter(function(){var t=n(this),r=m(this);return!t.data(a.handledName)&&(t.attr(a.attribute)||t.attr(l)||t.attr(f)||c[r]!==e)}).data("plugin_"+a.name,r);for(var s=0,d=t.length;s<d;s++){var A=n(t[s]),g=m(t[s]),h=A.attr(a.imageBaseAttribute)||u;g===N&&h&&A.attr(l)&&A.attr(l,b(A.attr(l),h)),c[g]===e||A.attr(f)||A.attr(f,c[g]),g===N&&i&&!A.attr(E)?A.attr(E,i):g===N||!o||A.css(O)&&"none"!==A.css(O)||A.css(O,"url('"+o+"')")}return t}function s(t,e){if(!i.length)return void(a.autoDestroy&&r.destroy());for(var o=e||i,u=!1,l=a.imageBase||"",f=a.srcsetAttribute,c=a.handledName,s=0;s<o.length;s++)if(t||e||A(o[s])){var g=n(o[s]),h=m(o[s]),b=g.attr(a.attribute),v=g.attr(a.imageBaseAttribute)||l,p=g.attr(a.loaderAttribute);g.data(c)||a.visibleOnly&&!g.is(":visible")||!((b||g.attr(f))&&(h===N&&(v+b!==g.attr(E)||g.attr(f)!==g.attr(F))||h!==N&&v+b!==g.css(O))||p)||(u=!0,g.data(c,!0),d(g,h,v,p))}u&&(i=n(i).filter(function(){return!n(this).data(c)}))}function d(t,e,r,i){++z;var o=function(){y("onError",t),p(),o=n.noop};y("beforeLoad",t);var u=a.attribute,l=a.srcsetAttribute,f=a.sizesAttribute,c=a.retinaAttribute,s=a.removeAttribute,d=a.loadedName,A=t.attr(c);if(i){var g=function(){s&&t.removeAttr(a.loaderAttribute),t.data(d,!0),y(T,t),setTimeout(p,1),g=n.noop};t.off(I).one(I,o).one(D,g),y(i,t,function(e){e?(t.off(D),g()):(t.off(I),o())})||t.trigger(I)}else{var h=n(new Image);h.one(I,o).one(D,function(){t.hide(),e===N?t.attr(C,h.attr(C)).attr(F,h.attr(F)).attr(E,h.attr(E)):t.css(O,"url('"+h.attr(E)+"')"),t[a.effect](a.effectTime),s&&(t.removeAttr(u+" "+l+" "+c+" "+a.imageBaseAttribute),f!==C&&t.removeAttr(f)),t.data(d,!0),y(T,t),h.remove(),p()});var m=(L&&A?A:t.attr(u))||"";h.attr(C,t.attr(f)).attr(F,t.attr(l)).attr(E,m?r+m:null),h.complete&&h.trigger(D)}}function A(t){var e=t.getBoundingClientRect(),r=a.scrollDirection,n=a.threshold,i=h()+n>e.top&&-n<e.bottom,o=g()+n>e.left&&-n<e.right;return"vertical"===r?i:"horizontal"===r?o:i&&o}function g(){return w>=0?w:w=n(t).width()}function h(){return B>=0?B:B=n(t).height()}function m(t){return t.tagName.toLowerCase()}function b(t,e){if(e){var r=t.split(",");t="";for(var a=0,n=r.length;a<n;a++)t+=e+r[a].trim()+(a!==n-1?",":"")}return t}function v(t,e){var n,i=0;return function(o,u){function l(){i=+new Date,e.call(r,o)}var f=+new Date-i;n&&clearTimeout(n),f>t||!a.enableThrottle||u?l():n=setTimeout(l,t-f)}}function p(){--z,i.length||z||y("onFinishedAll")}function y(t,e,n){return!!(t=a[t])&&(t.apply(r,[].slice.call(arguments,1)),!0)}var z=0,w=-1,B=-1,L=!1,T="afterLoad",D="load",I="error",N="img",E="src",F="srcset",C="sizes",O="background-image";"event"===a.bind||o?f():n(t).on(D+"."+l,f)}function a(a,o){var u=this,l=n.extend({},u.config,o),f={},c=l.name+"-"+ ++i;return u.config=function(t,r){return r===e?l[t]:(l[t]=r,u)},u.addItems=function(t){return f.a&&f.a("string"===n.type(t)?n(t):t),u},u.getItems=function(){return f.g?f.g():{}},u.update=function(t){return f.e&&f.e({},!t),u},u.force=function(t){return f.f&&f.f("string"===n.type(t)?n(t):t),u},u.loadAll=function(){return f.e&&f.e({all:!0},!0),u},u.destroy=function(){return n(l.appendScroll).off("."+c,f.e),n(t).off("."+c),f={},e},r(u,l,a,f,c),l.chainable?a:u}var n=t.jQuery||t.Zepto,i=0,o=!1;n.fn.Lazy=n.fn.lazy=function(t){return new a(this,t)},n.Lazy=n.lazy=function(t,r,i){if(n.isFunction(r)&&(i=r,r=[]),n.isFunction(i)){t=n.isArray(t)?t:[t],r=n.isArray(r)?r:[r];for(var o=a.prototype.config,u=o._f||(o._f={}),l=0,f=t.length;l<f;l++)(o[t[l]]===e||n.isFunction(o[t[l]]))&&(o[t[l]]=i);for(var c=0,s=r.length;c<s;c++)u[r[c]]=t[0]}},a.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:t,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:e,afterLoad:e,onError:e,onFinishedAll:e},n(t).on("load",function(){o=!0})}(window);function getCookie(name){var cookie=" "+document.cookie;var search=" "+name+"=";var setStr=null;var offset=0;var end=0;if(cookie.length>0){offset=cookie.indexOf(search);if(offset!=-1){offset+=search.length;end=cookie.indexOf(";",offset);if(end==-1){end=cookie.length}setStr=unescape(cookie.substring(offset,end))}}return setStr}jQuery(document).ready(function(){if(typeof area=="undefined"){area=jQuery(document.body)}if(area){insertUserSid(area)}});function insertUserSid(dom_object){if(typeof dom_object!="undefined"){var forms=jQuery(dom_object).find("form");forms.each(function(id,el){if(el.getAttribute("method")=="post"){var field=jQuery(el).find("input[name=usersid]");if(field.length==0){var input=document.createElement("input");input.setAttribute("type","hidden");input.setAttribute("name","usersid");input.setAttribute("value",usersid);el.appendChild(input)}}})}}function initPaymentadyen_ideal(registration,field){if(!$(field).data("module")){var obj=checkout.create("ideal",{showImage:true,onChange:function(state){if(obj.state.isValid){registration.box.find("#adyen_ideal_data").val(JSON.stringify(state.data))}}}).mount("#ideal-container");$(field).data("module",obj);$(field).data("validatefields",function(){var infofield=registration.box.find("#adyen_ideal_info");if(!obj.state.valid.issuer&&infofield.text()===""){infofield.text("Value required");return false}if(!obj.state.valid.issuer)return false;if(registration.box.find("#adyen_ideal_data").val()===""){ajax.flashMessage("error","Missing parameter. Please refresh the screen and try again");return false}return true})}}function initPaymentadyen_eps(registration,field){if(!$(field).data("module")){var obj=checkout.create("eps",{showImage:true,onChange:function(state){if(obj.state.isValid){registration.box.find("#adyen_eps_data").val(JSON.stringify(state.data))}}}).mount("#eps-container");$(field).data("module",obj);$(field).data("validatefields",function(){var infofield=registration.box.find("#adyen_eps_info");if(!obj.state.valid.issuer&&infofield.text()===""){infofield.text("Value required");return false}if(!obj.state.valid.issuer)return false;return true})}}function initPaymentadyen_directdebit_GB(registration,field){if(!$(field).data("module")){var obj=checkout.create("directdebit_GB",{showImage:true,onChange:function(state){if(obj.state.isValid){registration.box.find("#adyen_bacs_data").val(JSON.stringify(state.data))}}}).mount("#adyen-bacs-container");$(field).data("module",obj);$(field).data("validatefields",function(){if(!obj.state.isValid){return false}return true})}}function initPaymentadyen_bcmc(registration,field){if(!$(field).data("module")){var obj=checkout.create("securedfields",{type:"card",brands:["bcmc"],styles:{error:{color:"#E15C46"},validated:{color:"#53B410"},placeholder:{color:"#000",fontWeight:"400"}},onAutoComplete:function(event){},onChange:function(state){$.each(state.errors,function(field,error){if(error&&error.errorI18n)registration.box.find("#"+field+"_info").text(error.errorI18n);else registration.box.find("#"+field+"_info").text("")});if(obj.state.isValid){registration.box.find("#adyen_bcmc_data").val(JSON.stringify(state.data));registration.box.find("#adyen_bcmc_browserinfo").val(JSON.stringify(state.data.browserInfo))}},onValid:function(){},onLoad:function(){},onConfigSuccess:function(){},onFieldValid:function(){},onBrand:function(){},onError:function(){},onFocus:function(){},onBinValue:function(bin){}}).mount("#adyen-bcmc-container");$(field).data("module",obj);$(field).data("validatefields",function(){var ccinfofield=registration.box.find("#encryptedCardNumber_info");if(!obj.state.valid.encryptedCardNumber&&ccinfofield.text()===""){ccinfofield.text("Value required")}ccinfofield=registration.box.find("#encryptedExpiryDate_info");if((!obj.state.valid.encryptedExpiryMonth||!obj.state.valid.encryptedExpiryYear)&&ccinfofield.text()===""){ccinfofield.text("Value required")}if(!obj.state.isValid)return false;return true})}}function scheme_onDualBrand(pCallbackObj){$(pCallbackObj.rootNode).find(".multibrands").removeClass("d-none");const bancontactLogo=pCallbackObj.rootNode.querySelector("#pmImageDual1");const maestroLogo=pCallbackObj.rootNode.querySelector("#pmImageDual2");const supportedBrands=pCallbackObj.supportedBrandsRaw;bancontactLogo.setAttribute("src",supportedBrands[0].brandImageUrl);bancontactLogo.setAttribute("alt",supportedBrands[0].brand);bancontactLogo.parentNode.setAttribute("data-value",supportedBrands[0].brand);bancontactLogo.parentNode.addEventListener("click",scheme_dualBrandListener);maestroLogo.setAttribute("src",supportedBrands[1].brandImageUrl);maestroLogo.setAttribute("alt",supportedBrands[1].brand);maestroLogo.parentNode.setAttribute("data-value",supportedBrands[1].brand);maestroLogo.parentNode.addEventListener("click",scheme_dualBrandListener)}function scheme_dualBrandListener(e){$("#adyen_scheme").data("module").dualBrandingChangeHandler(e)}function initPaymentadyen_scheme(registration,field){if(!$(field).data("module")){var obj=checkout.create("securedfields",{type:"card",brands:adyen_scheme_brands,styles:{error:{color:"#E15C46"},validated:{color:"#53B410"},placeholder:{color:"#000",fontWeight:"400"}},onAutoComplete:function(event){if(event.name==="cc-name"){registration.box.find("#adyen_cc_holder").val(event.value)}},onChange:function(state){$.each(state.errors,function(field,error){if(error&&error.errorI18n)registration.box.find("#"+field+"_info").text(error.errorI18n);else registration.box.find("#"+field+"_info").text("")});if(obj.state.isValid){registration.box.find("#adyen_scheme_data").val(JSON.stringify(state.data));registration.box.find("#adyen_scheme_browserinfo").val(JSON.stringify(state.data.browserInfo))}},onBinLookup:function(pCallbackObj){if(console)console.log(pCallbackObj);if(pCallbackObj.supportedBrandsRaw?.length>1){if(console)console.log("Multibrand card detected");scheme_onDualBrand(pCallbackObj)}else $(pCallbackObj.rootNode).find(".multibrands").addClass("d-none")}}).mount("#adyen-scheme-card-container");$(field).data("module",obj);$(field).data("validatefields",function(){var ccinfofield=registration.box.find("#encryptedCardNumber_info");if(!obj.state.valid.encryptedCardNumber&&ccinfofield.text()===""){ccinfofield.text("Value required")}ccinfofield=registration.box.find("#encryptedExpiryDate_info");if((!obj.state.valid.encryptedExpiryMonth||!obj.state.valid.encryptedExpiryYear)&&ccinfofield.text()===""){ccinfofield.text("Value required")}ccinfofield=registration.box.find("#encryptedSecurityCode_info");if(!obj.state.valid.encryptedSecurityCode&&ccinfofield.text()===""){ccinfofield.text("Value required")}ccinfofield=registration.box.find("#adyen_cc_holder_info");ccinfofield.text("");if(registration.box.find("#adyen_cc_holder").val().trim()===""){ccinfofield.text("Value required");return false}if(!obj.state.isValid)return false;return true})}}boxboxAccountAddressEdit=function(box){this.box=box};boxboxAccountAddressEdit.prototype.init=function(){var ajaxbox=this;this.showAddresFieldsForCountry();this.box.on("change",".selectcountry",function(){ajaxbox.showAddresFieldsForCountry()})};boxboxAccountAddressEdit.prototype.setStates=function(triggerElement,http){newhtml="";$.each(http.content,function(idx,item){newhtml+='<option value="'+item.id+'">'+item.option+"</option>"});$(triggerElement).parents("form:first").find(".selectstate").html(newhtml);$("#grp_house_number").toggle(http.street_housenr_ordering=="H");$("#grp_zone_code").toggle(http.state_required=="Y")};boxboxAccountAddressEdit.prototype.updateStates=function(){var currentcontainer=this.box;var statesfield=currentcontainer.find(".selectstate");var selectedcountry=currentcontainer.find(".selectcountry option:selected");var currentstate=statesfield.val();ajax.rpcCall("getStates",{iso_2:selectedcountry.attr("value")},function(http){newhtml="";$.each(http.content,function(idx,item){newhtml+='<option value="'+item.id+'">'+item.option+"</option>"});statesfield.html(newhtml);statesfield.val(currentstate)},false,statesfield)};boxboxAccountAddressEdit.prototype.showAddresFieldsForCountry=function(){var curcountry=this.box.find(".selectcountry option:selected");var statereq=curcountry.data("state-required")==true;this.box.find(".selectstate").attr("required",statereq?"":null).parent().toggle(statereq);if(statereq){this.updateStates()}var showhouse=curcountry.data("address-format")=="H";this.box.find("#grp_house_number").toggle(showhouse).find("input").attr("required",showhouse?"":null);if(!showhouse){this.box.find("#grp_house_number input").val("")}};function setPaymentMethod(module,method,seo_enabled,formEl){var formAction=formEl.attr("action");jQuery("#selected_payment_method").val(method);jQuery("#selected_payment_module").val(module);formEl.data("reload",true);formEl.submit();formEl.data("reload",null)}function boxCartPaymentValidate(form){if(!$(form).data("reload"))if($('[name="payment_method"]:checked').length==0){ajax.flashMessage("error",btv_Language.get("select_payment_method"));return false}return true}function addCoupon(button){ajax.doAction("checkCoupon",{code:$("#CouponCodePayment").val()},[{code:"boxCartPayment",instance:"general"}],button,false,"#boxCartPayment")}function boxcartquickcheckout(box){this.box=box}boxcartquickcheckout.prototype.init=function(){var ajaxbox=this;this.box.find('input[name="customer_type"]').on("click",function(){ajaxbox.showAddressFields($(this).val())});this.box.find("#address_id").on("change",function(){ajaxbox.showAddressFields(ajaxbox.box.find("#customer_type").val(),$(this).val())});if(ajaxbox.box.find("#address_id").length==1){ajaxbox.showAddressFields(ajaxbox.box.find("#customer_type").val(),ajaxbox.box.find("#address_id").val())}else{if(this.box.find('input[name="customer_type"]:checked').length==0){this.box.find('input[name="customer_type"][value="consumer"]').click()}ajaxbox.showAddressFields(this.box.find('input[name="customer_type"]:checked').val())}this.box.on("rpcfinished",function(event,http){ajaxbox.rpcCallback()});this.box.on("change",".keyaddressfield input,.keyaddressfield select,.keyaddressfieldopt input",function(){var can_refresh=true;ajaxbox.getCurrentFieldsContainer().find(".keyaddressfield input:visible, .keyaddressfield select:visible").each(function(idx,item){if($(item).val()=="")can_refresh=false});if(can_refresh)ajaxbox.refreshShipping()});this.box.find("form").on("validate",function(event){if(ajaxbox.box.find("#shippingoptions li.list-group-item-success").length!==1){ajax.flashMessage("error",btv_Language.get("err_select_shipping_method"));event.preventDefault();event.stopPropagation();return false}if(ajaxbox.box.find("#paymentoptions li.list-group-item-success").length!==1){ajax.flashMessage("error",btv_Language.get("select_payment_method"));event.preventDefault();event.stopPropagation();return false}if(!ajaxbox.box.find("#terms_and_cond").prop("checked")){ajax.flashMessage("error",btv_Language.get("err_accept_terms"));event.preventDefault();event.stopPropagation();return false}if(ajaxbox.box.find("#vat_code").val()==="E"&&ajaxbox.box.find("#has_account").val()=="false"&&!ajaxbox.box.find("#register_account").prop("checked")){ajax.flashMessage("error",btv_Language.get("err_account_icp_req"));event.preventDefault();event.stopPropagation();return false}});updateRequiredFields()};$(document).on("click",'input[name="postnltimeofloc"]',function(){$(".postnloptions").hide().filter('[data-value="'+$('input[name="postnltimeofloc"]:checked').val()+'"]').show()});$(document).ready(function(){$(".postnloptions").hide().filter('[data-value="'+$('input[name="postnltimeofloc"]:checked').val()+'"]').show()});$(document).on("click",".boxCartPages .cart-delete",function(){var row=$(this).parentsUntil(".faketable-row").parent();ajax.doAction("removeFromCart",{basket_content_id:row.data("content-id")},[{code:"boxMenu",instance:"accountmenu_header"},{code:"boxCartShopping",instance:"general"}],this,true)});var wto_cart;$(document).on("change",".boxCartList input.spinner-input ",function(){clearTimeout(wto_cart);wto_cart=setTimeout(function(){var products=Array();$(".boxCartList .faketable-row").each(function(idx,item){var val=parseInt($(item).find(".spinner-input").val());if(val<1)val=1;if($(item).find(".spinner-input").attr("max"))if(val>$(item).find(".spinner-input").attr("max"))val=$(item).find(".spinner-input").attr("max");products.push({basket_content_id:$(item).data("content-id"),qty:val})});ajax.doAction("updateCart",{products:products},[{code:"boxCartShopping",instance:"general"}],null,true,"#asyncboxCartShopping_general")},1e3)});function updateContactForm(){var topicid=$("#box_contact_topic_id option:checked");$("#box_contact_sn_div_id").toggle(topicid.data("opt-show-sn")===true);$("#box_contact_order_div_id").toggle(topicid.data("opt-show-order")===true);$("#box_contact_order_id").prop("required",topicid.data("opt-req")===true)}$(document).ready(function(){updateContactForm();$("#box_contact_topic_id").change(function(){updateContactForm()})});function changeValueField(key,address_code,element){invoice_field=document.getElementById(key+"["+address_code+"]");if(invoice_field){invoice_field.value=element.value}}var status_pass=1;var check_password;var check_password_confirmation;function changePassword(input_password,input_confirm_password,required_password){var pass=document.getElementById(input_password);if(pass){if(pass.value!=""){if(status_pass==1){status_pass=0}}else{if(status_pass==0){if(typeof check_password=="object"){check_password.destroy()}if(typeof check_password_confirmation=="object"){check_password_confirmation.destroy();var confirm=document.getElementById(input_confirm_password);if(confirm){confirm.value=""}}status_pass=1}}}}function btv_boxFirmware(selector,data){this.data=data,this.domObject=$(selector),this.getFirmwares=function(board){var retval=Array();$.each(this.data.firmwares,function(idx,firmware){$.each(firmware.versions,function(idx_f,version){if($.inArray(board,version.info.boards)){firmware.code=idx;retval.push(firmware)}})});return retval};this.getFirmwareVersions=function(board,firmware){var retval=Array();$.each(firmware.versions,function(idx_f,version){if($.inArray(board,version.info.boards)){retval.push(version)}});return retval};this.getCurrentSelectedVersion=function(){if($("#firmware_firmwares").val()=="")return false;if($("#firmware_firmware_versions").val()=="")return false;var retval=false;$.each(this.data.firmwares[$("#firmware_firmwares").val()].versions,function(idx,version){if(version.code==$("#firmware_firmware_versions").val())retval=version});return retval};this.drawSubOptions=function(options){var boxControl=this;var content="";$.each(options,function(idx,option){content+='<div id="row_firmware_option_'+option.code+'" class="form-group col-'+(option.width?option.width:12)+'">';switch(option.type){case"check":content+='<div class="custom-control custom-checkbox"><input type="checkbox" class="form-control form-check-input" data-code="'+option.code+'" name="firmware_option['+option.code+']" id="firmware_option_'+option.code+'"'+(option.default==1?" checked":"")+' data-code="'+option.code+'"/><label class="custom-control-label" for="firmware_option_'+option.code+'">'+option.title+"</label></div>";break;case"static":content+='<label class="control-labe" for="firmware_option_'+option.code+'">'+option.title+"</label><p>"+option.text+"</p>";break;case"text":content+='<label class="control-labe" for="firmware_option_'+option.code+'">'+option.title+'</label><input type="type" class="form-control" data-code="'+option.code+'" name="firmware_option['+option.code+']" id="firmware_option_'+option.code+'" value="'+(option.default?option.default:"")+'" data-code="'+option.code+'"/>';break;case"dropdown":content+='<label for="firmware_option_'+option.code+'" class="control-label">'+option.title+':</label><select name="firmware_option['+option.code+']" data-code="'+option.code+'" id="firmware_option_'+option.code+'" class="form-control">';curgroup="";$.each(option.values,function(idx_v,value){if(typeof value==="object"){if(typeof value.group!=="undefined"){content+='<optgroup label="'+value.group+'">';$.each(value.values,function(idx_vs,svalue){content+='<option value="p'+svalue.pid+'" data-type="product" >'+boxControl.data.products[svalue.pid].name+"</option>"});content+="</optgroup>"}else if(typeof value.pid!=="undefined")content+='<option value="p'+value.pid+'" data-type="product" >'+boxControl.data.products[value.pid].name+"</option>";else if(typeof value.text!=="undefined")content+='<option value="'+idx_v+'" data-type="text" >'+value.text+"</option>"}else content+='<option value="'+idx_v+'">'+value+"</option>"});content+="</select>";content+='<div class="card" id="prod_firmware_option_'+option.code+'" style="display:none"><div class="row no-gutters"><div class="col-1"><img src="" class="card-img p-3" alt=""></div><div class="productinfo p-3 col"><span class="font-weight-bold header"></span><p class="description"></p></div><div class="card-footer"><a href="" class="btn btn-primary"  rel="noopener noreferrer" type="button" target="_blank"><i class="fa fa-search"></i></a></div></div></div>';break;case"frame":content+='<div class="card "><div class="card-header">'+option.text+'</div><div class="card-body row">';content+=boxControl.drawSubOptions(option.options);content+="</div></div>";break}content+="</div>";if(option.condition&&option.condition.length>0){$("#firmware_options .optioncontainer").on("change",'.form-control[data-code="'+option.condition[0]+'"]',function(){var val=$(this).is('input[type="checkbox"]')?$(this).prop("checked"):$(this).val();$("#row_firmware_option_"+option.code).toggle(eval("val "+option.condition[1]+" "+option.condition[2]))})}});return content};this.drawOptions=function(options){$("#firmware_options .optioncontainer").unbind();var div=this.domObject.find("#firmware_options .optioncontainer");div.html("");div.append(this.drawSubOptions(options));$("#firmware_options .optioncontainer .form-control").change()};this.init=function(){var boxControl=this;boxControl.domObject.on("change","#firmware_boards",function(){boxControl.domObject.find("#firmware_firmwares").closest(".row").toggle($("#firmware_boards").val()!="");$("#firmware_firmwares").val("").change();$("#firmware_firmware_versions").val("").change();if($("#firmware_boards").val()=="")return;var firmwares=boxControl.getFirmwares($("#firmware_boards").val());$("#firmware_firmwares").find("option:not(.no_delete)").remove();$.each(firmwares,function(i,firmware){$("#firmware_firmwares").append('<option value="'+firmware.code+'">'+firmware.title+"</option>")})});boxControl.domObject.on("change","#firmware_firmwares",function(){boxControl.domObject.find("#firmware_firmware_versions").closest(".row").toggle($("#firmware_firmwares").val()!="");if($("#firmware_firmwares").val()=="")return;var firmwareversion=boxControl.getFirmwareVersions($("#firmware_boards").val(),boxControl.data.firmwares[$("#firmware_firmwares").val()]);$("#firmware_firmware_versions").find("option:not(.no_delete)").remove();$.each(firmwareversion,function(i,version){$("#firmware_firmware_versions").append('<option value="'+version.code+'">'+version.title+"</option>")})});boxControl.domObject.on("change","#firmware_firmware_versions",function(){var version=boxControl.getCurrentSelectedVersion();boxControl.domObject.find("#firmware_options").toggle($("#firmware_firmware_versions").val()!=""&&version&&version.info.options.length>0);boxControl.domObject.find("#firmware_buttons").toggle($("#firmware_firmware_versions").val()!="");if($("#firmware_firmware_versions").val()=="")return;if(version&&version.info.options.length>0)boxControl.drawOptions(version.info.options)});boxControl.domObject.on("click",".btn-download-firmware",function(){alert(boxControl.getCurrentSelectedVersion().url)});boxControl.domObject.on("change","select",function(){var selected=$(this).find('option[value="'+$(this).val()+'"]');var prodbox=boxControl.domObject.find("#prod_"+$(this).attr("id"));prodbox.toggle(selected.data("type")=="product");if(selected.data("type")=="product"){prodbox.find("img").attr("src",boxControl.data.products[$(this).val().substr(1)].image.source);prodbox.find(".productinfo .header").html(boxControl.data.products[$(this).val().substr(1)].name);prodbox.find(".productinfo .description").html(boxControl.data.products[$(this).val().substr(1)].short_description);prodbox.find("a.btn-primary").attr("href",boxControl.data.products[$(this).val().substr(1)].link)}});$("#firmware_boards").val(703).change();$("#firmware_firmwares").val("Marlin").change();$("#firmware_firmware_versions").val("1.1.9").change()}}boxLoginAjaxInitialize=function(validation,form_id,instance){var toReloadStr;if(instance==undefined){toReloadStr="boxLogin/general"}else{toReloadStr="boxLogin/"+instance}if(validation==1){window.login_fields_objects=new Array;jQuery("#"+form_id).bind("submit",function(e){if(window.login_fields_objects.length>0){}else{flag=true}if(!flag){return false}else{ajax.fireAction("login","",toReloadStr,"","auto",jQuery("#"+form_id),instance,"process","boxLogin",jQuery("#"+form_id).attr("name"),"");return false}})}else{jQuery("#"+form_id).bind("submit",function(e){ajax.fireAction("login","",toReloadStr,"","auto",jQuery("#"+form_id),instance,"process","boxLogin",jQuery("#"+form_id).attr("name"),"");return false})}};function boxboxProductDetails(box){this.box=box}boxboxProductDetails.prototype.init=function(){this.registerProductForm()};boxboxProductDetails.prototype.registerProductForm=function(){var scrollSpy=new bootstrap.ScrollSpy(document.body,{target:"#proddetspy",offet:100})};boxboxProductDetails.prototype.openDCwindow=function(payment_module_code,payment_method_code,width,height,qtyfield){var qty=1;if(qtyfield)qty=$(qtyfield).val();window.open(this.box.data("dcurl")+"?checkout&module="+payment_module_code+"&method="+payment_method_code+"&type=product&sku="+this.box.data("sku")+"&qty="+qty,"","popup,width="+width+",height="+height)};$(document).on("click",".openproduct",function(){window.open($(this).data("href"),"_blank")});$(document).on("click",".btn.addprodtocart",function(){products=new Array;var btn=$(this);var qty=1;if(!(!btn.data("qty-field")||btn.data("qty-field")=="")){qty=$(btn.data("qty-field")).val();if(qty<1)return false}if(!(!btn.data("qty")||btn.data("qty")==""))qty=btn.data("qty");var autoclose=true;if(btn.data("autoclose")===false)autoclose=false;var allowmodal=1;if(btn.data("disablemodal")===true)allowmodal=0;products.push({id:btn.data("pid"),qty:qty,length:null,remarks:null});var link="";if(btn.data("lnk")){link=btn.data("lnk")}ajax.doAction("addToCart",{products:products,allowmodal:allowmodal,closeDialog:autoclose,lnk:link},[{code:"boxMenu",instance:"accountmenu_header"},{code:"boxCartShopping",instance:"general"}],btn,false,null,function(result){if(!result.errors&&btn.hasClass("btn-success"))btn.removeClass("btn-success").addClass("btn-outline-success").html('<i class="bi bi-check"></i> '+btv_Language.get("msg_added_cart"))})});function btv_productFiltering(){this.container=null;this.box=null;this.xhr=null;this.max_entries_shown=6;this.buildHTML=function(){$(".btn-set-filter").parent().removeClass("checked");$(".btn-set-filter:checked").parent().addClass("checked");$(".filtergroup").each(function(idx_box,box){var num_canshow=$(box).find(".filtercheckbox.canshow").length;$(box).find(".linkshowmore").toggle(num_canshow>5)});var view=this;this.container=$(".boxProductFilters").find(".productfilters");this.container.html("");if(typeof window["filters_init_json"]!="undefined"){var http={filters:filters_init_json,content:$("#listingcontents").html()};window.history.replaceState(http,"",window.location.href)}$(document).on("click",".btnsearchfilter",function(){productFiltering.doSearch($(".listingcontents"),true)})};this.findAttribute=function(id){var retval=null;return $('.filtergroup[data-attr-id="'+id+'"]')};this.findAttributeValue=function(attr_id,value){var attributeinfo=this.findAttribute(attr_id);if(attributeinfo){var retval=null;$.each(attributeinfo.values,function(idx,attrvalue){if(attrvalue.id==value)retval=attrvalue})}return retval};this.updateAttributeValues=function(filter_info){$(".filtergroup").each(function(idx_box,box){var attr_id=$(box).data("attr-id");var values=[];if(filter_info[attr_id]){$.each(filter_info[attr_id].values,function(idx,val){values[val.data]=1;var item=$(box).find('input[data-id="'+val.data+'"]');if(item.length>0){$(item).parent().toggleClass("canshow",val.count>0).find(".badge").text(val.count)}});var num_canshow=$(box).find(".filtercheckbox.canshow").length;$(box).find(".checks").toggleClass("haschecked",filter_info[attr_id].has_checked);if(!filter_info[attr_id].has_checked){$(box).toggle(num_canshow>1)}else{$(box).show()}$(box).find(".checks:not(.vshowall)").toggleClass("showall",num_canshow<=5)}});$(".btn-set-filter").parent().removeClass("checked");$(".btn-set-filter:checked").parent().addClass("checked")};this.showAttributeValues=function(filter_info){$.each(filter_info.init_filter_values,function(idx_attr,info){})};this.doSearch=function(callingitem,showproducts,page){var box=$(".boxProductFilters");var filters={};if(!page)page=1;$(".boxProductFilters .filtergroup").each(function(idx,item){var filter={id:$(item).data("attr-id"),values:Array()};$(item).find('input[type="checkbox"]:checked').each(function(idx,item){filter.values.push($(item).attr("data-id"))});if(filter.values.length>0){filters[filter.id]=filter.values}});var updateListing=false;var data={filters:filters,category_id:box.data("category-id"),filtered:true,search:$(".listfilter").val()};var ajaxcontainer=ajax.findAjaxContainer(callingitem);data[ajaxcontainer.data("box-shortcode")+"_spage"]=page;var overlayitem=null;if(showproducts){updateListing=true;data.boxes=[{code:"ProductListing",instance:"general"}];data.showoverlay=true;callingitem.parent().removeClass("show")}if(productFiltering.xhr&&productFiltering.xhr.readyState!=4){productFiltering.xhr.abort("abort_from_rrw")}this.xhr=ajax.runBoxProcess(ajaxcontainer,"refineOptions",data,function(http){if(overlayitem)overlayitem.remove();if(http.resulttext){$("#textresult").text(http.resulttext)}$("#subcatheaderslist").remove();if(http.filters){if(http.permalink){var checks=[];$(".btn-set-filter:checked").each(function(idx,itm){checks.push(itm.id)});var state={content:http.content,filters:http.filters,resulttext:http.resulttext,checks_set:checks};window.history.pushState(state,"",http.permalink)}if(http.filters.filters_set)productFiltering.updateAttributeValues(http.filters.filters_set);$("#listingcontents").html(http.content)}else{$(".boxProductFilters").find(".searchresult").addClass("d-none")}},function(){if(overlayitem)overlayitem.remove()},ajaxcontainer.find(".refresharea"))}}var productFiltering=new btv_productFiltering;$(document).ready(function(){productFiltering.buildHTML()});window.onpopstate=function(event){var http=event.state;if(!http)return;if(http.resulttext){$("#textresult").text(http.resulttext)}if(http.checks_set){$(".btn-set-filter:checked").prop("checked",false);$.each(http.checks_set,function(idx,id){$("#"+id).prop("checked",true)})}if(http.filters.filters_set)productFiltering.updateAttributeValues(http.filters.filters_set);$("#listingcontents").html(http.content);$(".lazy").Lazy()};$(document).on("click",".dropdown-menu.keep-open",function(e){e.stopPropagation()});$(document).on("keyup",".attribquickfilter",function(e){var search_term=$(this).val();var search=search_term.toLowerCase();if(search==""){$(this).parent().find(".filterselect .filtercheckbox").show();return}$(this).parent().find(".filterselect .filtercheckbox").each(function(idx,item){$(item).toggle($(item).find("input").attr("disabled")!="disabled"&&$(item).find("label .data").text().toLowerCase().indexOf(search)>=0)})});$(document).on("click",".linkshowmore",function(){$(this).parent().find(".checks").toggleClass("showall").addClass("vshowall");$(this).hide()});$(document).on("click",".btnset-listing .btn",function(){$(".btnset-listing .btn").removeClass("active");$(this).addClass("active");$(".listingcontents").removeClass(["normal","rows","smallprod"]).addClass($(this).data("class"));$(".lazy").lazy();setCookie("listing_display",$(this).data("class"))});$(document).on("click",".boxProductFilters .filters-dropdown .form-check-input,.boxProductFilters .btn-set-filter,.boxProductFilters .btn-clear-filter, .btn-clear-all-filter",function(e){if($(this).hasClass("btn-clear-filter")){$(this).closest(".dropright").find("input.form-check-input").prop("checked",false)}else if($(this).hasClass("btn-clear-all-filter")){$(".listfilter").val("");$(".boxProductFilters").find(".filtercheckbox .form-check-input").prop("checked",false)}productFiltering.doSearch($(this),$(this).hasClass("btn-set-filter")||$(this).hasClass("btn-clear-filter")||$(this).hasClass("btn-clear-all-filter"))});$(document).on("click",".boxProductListing .pagination .page-link.page-link-async",function(event){event.stopPropagation();event.preventDefault();productFiltering.doSearch($(this),true,$(this).data("page"));return true});$(document).on("keyup keypress",".listfilter",function(e){var keyCode=e.keyCode||e.which;if(keyCode===13){e.preventDefault();$(".btnsearchfilter").click();return false}});$(document).on("blur","#keywords",function(){if(window.donotclosesearchsuggestion)return;$("#keywords").parent().parent().removeAttr("style");setTimeout(function(){searchSuggestion.hideOverlay()},600)});var wto_search;var wto_ajax;var last_searchqry=null;function btv_SearchSuggestions(){this.searchoverlay=null,this.show=function(keyworks){if(this.searchoverlay==null){this.searchoverlay=$('<div class="searchresultoverlay" data-box-code="boxSearchSuggestions" data-box-instance="general"><div class="searchsugcontents mx-auto"><div class="searchsugcontent">'+btv_Language.get("search_suggestions_loading")+'  <div class="fa"><i class="fa fa-spin fa-spinner"></i></div></div></div></div>');$("body").append(this.searchoverlay)}ajaxContainer=$(this.searchoverlay);keyworks=keyworks.trim();last_searchqry=keyworks;data={boxes:[],ignoreerror:true,keywords:keyworks};data.boxes.push({code:ajaxContainer.data("box-code"),instance:ajaxContainer.data("box-instance")});if(wto_ajax){wto_ajax.abort()}wto_ajax=ajax.runBoxProcess(ajaxContainer,null,data,function(http){wto_ajax=null;if(!http.content){if(console)console.error("An error occured retreiving search suggestions");$(searchSuggestion.searchoverlay).remove();searchSuggestion.searchoverlay=null}else ajaxContainer.html(http.content)})};this.hideOverlay=function(){if(this.searchoverlay){this.searchoverlay.remove();this.searchoverlay=null}}}searchSuggestion=new btv_SearchSuggestions;$(document).on("keyup","#keywords",function(e){clearTimeout(wto_search);if(e.which!=13&&e.which!=27)wto_search=setTimeout(function(){if($("#keywords").val().length>2)searchSuggestion.show($("#keywords").val())},900);if(e.which==27||$("#keywords").val().length<=2)searchSuggestion.hideOverlay()});function btv_productCompare(){this.popoverdiv=null;this.ldata=null;this.currentElement=null;this.comparemodal=null;this.buildhtml=function(){this.comparemodal=$('<div id="comparemodal"   aria-hidden="true" tabindex="-1"><div class="modal-dialog"><div class="modal-content comparemodal"><div class="modal-header"><span class="h2 mb-0">'+btv_Language.get("title_compare")+'</span><button type="button" class="btn-close closecompare"></span></button></div><div class="modal-body"></div><div class="modal-footer"></div></div></div></div></div></div>');$("body").append(this.comparemodal)};this.buildpop=function(triggerElement,data){var product="",productLink="?lnk=cmp",placement="";if(window.innerWidth<768){placement="bottom"}else{placement="left"}function imgspot(imgsrc){if(imgsrc!=""){return'<img class="card-img-top" src='+imgsrc+">"}return""}$.each(data.content,function(idx,item){product+='<li class="list-group-item d-flex align-items-center record" data-product-id="'+item.id+'">'+imgspot(item.imgsrc)+'<a href="'+item.link+'" class="prodlink">'+item.name+'</a><a href="javascript:void(0)" class="compareRemove"  data-rpc-function="removeFromCompare" data-rpc-callback="productCompare.compare"><span class="fa fa-trash" data-id="'+item.id+'"></span></a></li>';productLink+="&c_products[]="+item.id});if(!this.comparemodal)this.buildhtml();this.comparemodal.find(".modal-body").html('<ul class="comparelist list-group">'+product+"</ul>");this.comparemodal.find(".modal-footer").html('<a href="/products/compare/'+productLink+'" class="btn btn-primary col">'+btv_Language.get("btn_compare")+'</a><button class="btn btn-danger compareClear" data-rpc-function="removeAllFromCompare" data-rpc-callback="productCompare.compare" title="'+btv_Language.get("btn_title_clear_all")+'" ><span class="fa fa-trash"></span></button>');$("#comparemodal").show();this.popoverdiv=$(triggerElement);this.popoverdiv.parents(".rrwlinkcontainer:first").addClass("d-flex")};this.compare=function(elem,data){productCompare.ldata=data;if(!data.content){productCompare.close();return}this.buildpop(this.currentElement,data)};this.close=function(){productCompare.comparemodal.hide()}}$(document).on("hidden.bs.popover",".compareLink",function(){productCompare.buildpop($(this),productCompare.ldata)});var productCompare=new btv_productCompare;$(document).on("click",".closecompare",function(){$("#comparemodal").hide()});$(document).on("change",".chk_compare_products",function(event){var chk=$(this);var data=$(this).parents(".record:first").data();if(chk.is(":checked")){ajax.rpcCall("addToCompare",data,function(http){productCompare.compare(this,http)},false)}else{ajax.rpcCall("removeFromCompare",data,function(http){productCompare.compare(this,http)},false)}return false});function btv_GPayDC(container,order,environment){this.order=order;this.container=container;this.environment=environment;this.baseRequest={apiVersion:2,apiVersionMinor:0};this.allowedCardNetworks=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"];this.allowedCardAuthMethods=["PAN_ONLY","CRYPTOGRAM_3DS"];this.baseCardPaymentMethod={type:"CARD",parameters:{allowedAuthMethods:this.allowedCardAuthMethods,allowedCardNetworks:this.allowedCardNetworks},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"adyen",gatewayMerchantId:"ReprapworldOnline"}}};this.getGooglePaymentsClient=function(){if(typeof paymentsClient==="undefined"){paymentsClient=new google.payments.api.PaymentsClient({environment:this.environment==="test"?"TEST":"PRODUCTION",paymentDataCallbacks:{onPaymentAuthorized:gpaydcobj.onPaymentAuthorized,onPaymentDataChanged:gpaydcobj.onPaymentDataChanged}})}return paymentsClient};this.getGoogleIsReadyToPayRequest=function(){return Object.assign({},this.baseRequest,{allowedPaymentMethods:[this.baseCardPaymentMethod]})};this.updateTransactionInfo=function(shippingAddress,shippingOptionData){return new Promise((resolve,reject)=>{let shipping_address=new rrw.address(shippingAddress.name,null,shippingAddress.address1,shippingAddress.postalCode,shippingAddress.locality,shippingAddress.countryCode);let shippingselected=null;if(shippingOptionData.id&&shippingOptionData.id!=="shipping_option_unselected"){let splitted=shippingOptionData.id.split(":");shippingselected={module:splitted[0],method:splitted[1]}}let retval=gpaydcobj.order.getQuote(shipping_address,shippingselected).then(function(quote){let order_products=gpaydcobj.order.getProducts();let totals=gpaydcobj.order.getTotals();let shipping_methods=[];quote.shipping_methods.forEach(method=>{shipping_methods.push({id:method.module.code+":"+method.method.code,label:method.method.title+" - "+method.price_incl_formatted,description:""})});resolve({newTransactionInfo:{displayItems:[{label:"Subtotal",type:"SUBTOTAL",price:totals.sub_total.value_incl.toFixed(2)},{label:"Shipping",type:"LINE_ITEM",price:totals.shipping.value_incl.toFixed(2)}],countryCode:"NL",currencyCode:gpaydcobj.order.getCurrency(),totalPriceStatus:"FINAL",totalPrice:totals.total.value_incl.toFixed(2),totalPriceLabel:"Total"},newShippingOptionParameters:{defaultSelectedOptionId:quote.selected_shipping_method.module+":"+quote.selected_shipping_method.method,shippingOptions:shipping_methods}})}).catch(function(error){ajax.doLog("Gpay checkout error: "+error.message,error);reject(error)})})};this.getGoogleTransactionInfo=function(){let order_products=gpaydcobj.order.getProducts();return{displayItems:[{label:"Subtotal",type:"SUBTOTAL",price:order_products.subtotal_excl}],countryCode:"NL",currencyCode:gpaydcobj.order.getCurrency(),totalPriceStatus:"ESTIMATED",totalPrice:order_products.total_incl,totalPriceLabel:"Total"}};this.onPaymentDataChanged=function(intermediatePaymentData){return new Promise(function(resolve,reject){var paymentDataRequestUpdate={};try{let shippingAddress=intermediatePaymentData.shippingAddress;let shippingOptionData=intermediatePaymentData.shippingOptionData;gpaydcobj.updateTransactionInfo(shippingAddress,shippingOptionData).then(function(pupdate){paymentDataRequestUpdate=pupdate;resolve(paymentDataRequestUpdate)}).catch(function(error){paymentDataRequestUpdate={error:{reason:"OTHER_ERROR",message:error,intent:"SHIPPING_ADDRESS"}};resolve(paymentDataRequestUpdate)})}catch(err){ajax.doLog("gpay onPaymentDataChanged: "+err.message,err);paymentDataRequestUpdate={error:{reason:"OTHER_ERROR",message:"An technical error has occurred",intent:"SHIPPING_ADDRESS"}};resolve(paymentDataRequestUpdate)}})};this.onPaymentAuthorized=function(paymentData){return new Promise(function(resolve,reject){gpaydcobj.processPayment(paymentData).then(function(){resolve({transactionState:"SUCCESS"})}).catch(function(error){resolve({transactionState:"ERROR",error:{intent:"PAYMENT_AUTHORIZATION",message:error,reason:"PAYMENT_DATA_INVALID"}})})})};this.processPayment=function(paymentData){return new Promise(function(resolve,reject){gpaydcobj.order.processPayment("adyen","googlepay",{paymentData:paymentData}).then(function(order){const captureOrderHandler=details=>{const payerName=details.payer.name.given_name};return resolve()}).catch(function(error){reject()})})};this.addGooglePayButton=function(){const paymentsClient=gpaydcobj.getGooglePaymentsClient();const button=paymentsClient.createButton({buttonSizeMode:"fill",onClick:gpaydcobj.onGooglePaymentButtonClicked});document.getElementById(gpaydcobj.container).appendChild(button)};this.getGooglePaymentDataRequest=function(){const paymentDataRequest=Object.assign({},gpaydcobj.baseRequest);paymentDataRequest.allowedPaymentMethods=[gpaydcobj.baseCardPaymentMethod];paymentDataRequest.merchantInfo={merchantId:"BCR2DN4T4DQ2XHZZ",merchantName:"ReprapWorld B.V."};paymentDataRequest.callbackIntents=["SHIPPING_ADDRESS","PAYMENT_AUTHORIZATION","SHIPPING_OPTION"];paymentDataRequest.shippingAddressRequired=true;paymentDataRequest.emailRequired=true;paymentDataRequest.shippingAddressParameters={phoneNumberRequired:true};paymentDataRequest.shippingOptionRequired=true;return paymentDataRequest};this.onGooglePaymentButtonClicked=function(){const paymentsClient=gpaydcobj.getGooglePaymentsClient();const paymentDataRequest=gpaydcobj.getGooglePaymentDataRequest();paymentDataRequest.transactionInfo=gpaydcobj.getGoogleTransactionInfo();paymentsClient.loadPaymentData(paymentDataRequest).then(function(paymentData){}).catch(function(err){if(console)console.error(err);if(err.statusMessage)ajax.doLog("Googlepay error: "+err.statusMessage,err);else{ajax.doLog("Googlepay result: "+err.statusCode,err)}})}}var gpaydcobj;function onGooglePayLoaded(container,dcorder,environment){gpaydcobj=new btv_GPayDC(container,dcorder,environment);const paymentsClient=gpaydcobj.getGooglePaymentsClient();paymentsClient.isReadyToPay(gpaydcobj.getGoogleIsReadyToPayRequest()).then(function(response){if(response.result){gpaydcobj.addGooglePayButton()}}).catch(function(err){console.error(err);ajax.doLog("Googlepay init error: "+err.message,err)})}function boxPaymentStatus(box){this.box=box}boxPaymentStatus.prototype.initTimer=function(delay){var ps=this;pstimer=setTimeout(function(){ps.checkStatus()},delay)};boxPaymentStatus.prototype.init=function(){};boxPaymentStatus.prototype.checkStatus=function(){var ps=this;var data={};formToObject(this.box,data);ajax.runBoxProcess(this.box,"checkstatus",data,function(http){if(http.paymentdone){ajax.showOverlayBox(ps.box);window.location.href=http.redirect}else ps.initTimer(500)})};function btv_PaypalDC(container,order){this.order=order;this.container=container;this.paypal_item_total="0.00";this.loadPaypalButton=function(){var paypaldc=this;const paypalButtonsComponent=paypal.Buttons({fundingSource:paypal.FUNDING.PAYPAL,commit:true,style:{shape:"rect",height:40},createOrder:(data,actions)=>{return new Promise((resolve,reject)=>{var products=[];let order_products=paypaldc.order.getProducts();let itemtotal=0;order_products.products.forEach(function(element){itemtotal+=element.street_price_excl*element.qty;products.push({name:element.name,sku:element.sku,unit_amount:{currency_code:paypaldc.order.getCurrency(),value:element.street_price_excl},quantity:element.qty})});paypal_item_total=itemtotal.toFixed(2);return paypaldc.order.getQuote().then(function(quote){let shipping_methods=[];quote.shipping_methods.forEach(method=>{let selected=false;if(method.module.code===quote.selected_shipping_method.module&&method.method.code===quote.selected_shipping_method.method){selected=true}shipping_methods.push({id:method.module.code+":"+method.method.code,label:method.method.title,type:"SHIPPING",selected:selected,amount:{value:method.price_incl.toFixed(2),currency_code:paypaldc.order.getCurrency()}})});let order_products=paypaldc.order.getProducts();let totals=paypaldc.order.getTotals();let tax_total=totals.total.value_incl-paypaldc.order.getShippingPriceIncl()-parseFloat(paypal_item_total)+parseFloat(order_products.total_discount_incl);let discount=parseFloat(order_products.total_discount_incl);if(tax_total<0){discount+=tax_total*-1;tax_total=0}var createOrderPayload={purchase_units:[{items:products,amount:{breakdown:{shipping:{currency_code:paypaldc.order.getCurrency(),value:paypaldc.order.getShippingPriceIncl().toFixed(2)},item_total:{currency_code:paypaldc.order.getCurrency(),value:paypal_item_total},discount:{currency_code:paypaldc.order.getCurrency(),value:discount.toFixed(2)},tax_total:{currency_code:paypaldc.order.getCurrency(),value:tax_total.toFixed(2)}},value:totals.total.value_incl.toFixed(2),currency_code:paypaldc.order.getCurrency()},shipping:{options:shipping_methods}}]};console.log(createOrderPayload);resolve(actions.order.create(createOrderPayload))})}).catch(function(error){ajax.doLog("Paypal checkout error: "+error.message,error);if(console)console.error("An error prevented the buyer from checking out with PayPal"+error);return})},onShippingChange:async(data,actions)=>{if(console)console.log(data);let address=new rrw.address(null,null,null,data.shipping_address.postal_code,data.shipping_address.city,data.shipping_address.country_code,data.shipping_address.state);let shippingselected=null;if(data.selected_shipping_option&&data.selected_shipping_option.id){let splitted=data.selected_shipping_option.id.split(":");shippingselected={module:splitted[0],method:splitted[1]}}return paypaldc.order.getQuote(address,shippingselected).then(function(quote){console.log(quote);let shipping_methods=[];if(quote.shipping_methods.length===0){return actions.reject()}quote.shipping_methods.forEach(method=>{let selected=false;if(method.module.code===quote.selected_shipping_method.module&&method.method.code===quote.selected_shipping_method.method){selected=true}shipping_methods.push({id:method.module.code+":"+method.method.code,label:method.method.title,type:"SHIPPING",selected:selected,amount:{value:method.price_incl.toFixed(2),currency_code:paypaldc.order.getCurrency()}})});let order_products=paypaldc.order.getProducts();let totals=paypaldc.order.getTotals();var products=[];order_products.products.forEach(function(element){products.push({name:element.name,sku:element.sku,unit_amount:{currency_code:paypaldc.order.getCurrency(),value:element.price_incl},quantity:element.qty})});let tax_total=totals.total.value_incl-paypaldc.order.getShippingPriceIncl()-parseFloat(paypal_item_total)+parseFloat(order_products.total_discount_incl);let discount=parseFloat(order_products.total_discount_incl);if(tax_total<0){discount+=tax_total*-1;tax_total=0}return actions.order.patch([{op:"replace",path:"/purchase_units/@reference_id=='default'/amount",value:{breakdown:{shipping:{currency_code:paypaldc.order.getCurrency(),value:paypaldc.order.getShippingPriceIncl().toFixed(2)},item_total:{currency_code:paypaldc.order.getCurrency(),value:paypal_item_total},discount:{currency_code:paypaldc.order.getCurrency(),value:discount.toFixed(2)},tax_total:{currency_code:paypaldc.order.getCurrency(),value:tax_total.toFixed(2)}},value:totals.total.value_incl.toFixed(2),currency_code:paypaldc.order.getCurrency()}},{op:"replace",path:"/purchase_units/@reference_id=='default'/shipping/options",value:shipping_methods}])}).catch(function(error){ajax.doLog("Paypal checkout error: "+error.message,error);if(console)console.error("An error prevented the buyer from checking out with PayPal"+error);return actions.reject(error)})},onApprove:(data,actions)=>{if(console)console.log(data);return paypaldc.order.processPayment("paypal","paypal_ec",data).then(function(order){const captureOrderHandler=details=>{const payerName=details.payer.name.given_name;console.log("Transaction completed!")};return actions.order.capture().then(captureOrderHandler)}).catch(function(error){})},onError:err=>{ajax.doLog("Paypal checkout error: "+err.message,err);ajax.flashMessage("error","An error occured during checkout using paypal. Please try a different payment method");if(console)console.error("An error prevented the buyer from checking out with PayPal"+err)}});if(paypalButtonsComponent.isEligible()){paypalButtonsComponent.render(this.container).catch(err=>{if(console)console.error("PayPal Buttons failed to render")})}else{if(console)console.log("The funding source is ineligible")}}}(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.Popper=factory()})(this,function(){"use strict";var isBrowser=typeof window!=="undefined"&&typeof document!=="undefined"&&typeof navigator!=="undefined";var timeoutDuration=function(){var longerTimeoutBrowsers=["Edge","Trident","Firefox"];for(var i=0;i<longerTimeoutBrowsers.length;i+=1){if(isBrowser&&navigator.userAgent.indexOf(longerTimeoutBrowsers[i])>=0){return 1}}return 0}();function microtaskDebounce(fn){var called=false;return function(){if(called){return}called=true;window.Promise.resolve().then(function(){called=false;fn()})}}function taskDebounce(fn){var scheduled=false;return function(){if(!scheduled){scheduled=true;setTimeout(function(){scheduled=false;fn()},timeoutDuration)}}}var supportsMicroTasks=isBrowser&&window.Promise;var debounce=supportsMicroTasks?microtaskDebounce:taskDebounce;function isFunction(functionToCheck){var getType={};return functionToCheck&&getType.toString.call(functionToCheck)==="[object Function]"}function getStyleComputedProperty(element,property){if(element.nodeType!==1){return[]}var window=element.ownerDocument.defaultView;var css=window.getComputedStyle(element,null);return property?css[property]:css}function getParentNode(element){if(element.nodeName==="HTML"){return element}return element.parentNode||element.host}function getScrollParent(element){if(!element){return document.body}switch(element.nodeName){case"HTML":case"BODY":return element.ownerDocument.body;case"#document":return element.body}var _getStyleComputedProp=getStyleComputedProperty(element),overflow=_getStyleComputedProp.overflow,overflowX=_getStyleComputedProp.overflowX,overflowY=_getStyleComputedProp.overflowY;if(/(auto|scroll|overlay)/.test(overflow+overflowY+overflowX)){return element}return getScrollParent(getParentNode(element))}function getReferenceNode(reference){return reference&&reference.referenceNode?reference.referenceNode:reference}var isIE11=isBrowser&&!!(window.MSInputMethodContext&&document.documentMode);var isIE10=isBrowser&&/MSIE 10/.test(navigator.userAgent);function isIE(version){if(version===11){return isIE11}if(version===10){return isIE10}return isIE11||isIE10}function getOffsetParent(element){if(!element){return document.documentElement}var noOffsetParent=isIE(10)?document.body:null;var offsetParent=element.offsetParent||null;while(offsetParent===noOffsetParent&&element.nextElementSibling){offsetParent=(element=element.nextElementSibling).offsetParent}var nodeName=offsetParent&&offsetParent.nodeName;if(!nodeName||nodeName==="BODY"||nodeName==="HTML"){return element?element.ownerDocument.documentElement:document.documentElement}if(["TH","TD","TABLE"].indexOf(offsetParent.nodeName)!==-1&&getStyleComputedProperty(offsetParent,"position")==="static"){return getOffsetParent(offsetParent)}return offsetParent}function isOffsetContainer(element){var nodeName=element.nodeName;if(nodeName==="BODY"){return false}return nodeName==="HTML"||getOffsetParent(element.firstElementChild)===element}function getRoot(node){if(node.parentNode!==null){return getRoot(node.parentNode)}return node}function findCommonOffsetParent(element1,element2){if(!element1||!element1.nodeType||!element2||!element2.nodeType){return document.documentElement}var order=element1.compareDocumentPosition(element2)&Node.DOCUMENT_POSITION_FOLLOWING;var start=order?element1:element2;var end=order?element2:element1;var range=document.createRange();range.setStart(start,0);range.setEnd(end,0);var commonAncestorContainer=range.commonAncestorContainer;if(element1!==commonAncestorContainer&&element2!==commonAncestorContainer||start.contains(end)){if(isOffsetContainer(commonAncestorContainer)){return commonAncestorContainer}return getOffsetParent(commonAncestorContainer)}var element1root=getRoot(element1);if(element1root.host){return findCommonOffsetParent(element1root.host,element2)}else{return findCommonOffsetParent(element1,getRoot(element2).host)}}function getScroll(element){var side=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"top";var upperSide=side==="top"?"scrollTop":"scrollLeft";var nodeName=element.nodeName;if(nodeName==="BODY"||nodeName==="HTML"){var html=element.ownerDocument.documentElement;var scrollingElement=element.ownerDocument.scrollingElement||html;return scrollingElement[upperSide]}return element[upperSide]}function includeScroll(rect,element){var subtract=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var scrollTop=getScroll(element,"top");var scrollLeft=getScroll(element,"left");var modifier=subtract?-1:1;rect.top+=scrollTop*modifier;rect.bottom+=scrollTop*modifier;rect.left+=scrollLeft*modifier;rect.right+=scrollLeft*modifier;return rect}function getBordersSize(styles,axis){var sideA=axis==="x"?"Left":"Top";var sideB=sideA==="Left"?"Right":"Bottom";return parseFloat(styles["border"+sideA+"Width"],10)+parseFloat(styles["border"+sideB+"Width"],10)}function getSize(axis,body,html,computedStyle){return Math.max(body["offset"+axis],body["scroll"+axis],html["client"+axis],html["offset"+axis],html["scroll"+axis],isIE(10)?parseInt(html["offset"+axis])+parseInt(computedStyle["margin"+(axis==="Height"?"Top":"Left")])+parseInt(computedStyle["margin"+(axis==="Height"?"Bottom":"Right")]):0)}function getWindowSizes(document){var body=document.body;var html=document.documentElement;var computedStyle=isIE(10)&&getComputedStyle(html);return{height:getSize("Height",body,html,computedStyle),width:getSize("Width",body,html,computedStyle)}}var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var defineProperty=function(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj};var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};function getClientRect(offsets){return _extends({},offsets,{right:offsets.left+offsets.width,bottom:offsets.top+offsets.height})}function getBoundingClientRect(element){var rect={};try{if(isIE(10)){rect=element.getBoundingClientRect();var scrollTop=getScroll(element,"top");var scrollLeft=getScroll(element,"left");rect.top+=scrollTop;rect.left+=scrollLeft;rect.bottom+=scrollTop;rect.right+=scrollLeft}else{rect=element.getBoundingClientRect()}}catch(e){}var result={left:rect.left,top:rect.top,width:rect.right-rect.left,height:rect.bottom-rect.top};var sizes=element.nodeName==="HTML"?getWindowSizes(element.ownerDocument):{};var width=sizes.width||element.clientWidth||result.width;var height=sizes.height||element.clientHeight||result.height;var horizScrollbar=element.offsetWidth-width;var vertScrollbar=element.offsetHeight-height;if(horizScrollbar||vertScrollbar){var styles=getStyleComputedProperty(element);horizScrollbar-=getBordersSize(styles,"x");vertScrollbar-=getBordersSize(styles,"y");result.width-=horizScrollbar;result.height-=vertScrollbar}return getClientRect(result)}function getOffsetRectRelativeToArbitraryNode(children,parent){var fixedPosition=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var isIE10=isIE(10);var isHTML=parent.nodeName==="HTML";var childrenRect=getBoundingClientRect(children);var parentRect=getBoundingClientRect(parent);var scrollParent=getScrollParent(children);var styles=getStyleComputedProperty(parent);var borderTopWidth=parseFloat(styles.borderTopWidth,10);var borderLeftWidth=parseFloat(styles.borderLeftWidth,10);if(fixedPosition&&isHTML){parentRect.top=Math.max(parentRect.top,0);parentRect.left=Math.max(parentRect.left,0)}var offsets=getClientRect({top:childrenRect.top-parentRect.top-borderTopWidth,left:childrenRect.left-parentRect.left-borderLeftWidth,width:childrenRect.width,height:childrenRect.height});offsets.marginTop=0;offsets.marginLeft=0;if(!isIE10&&isHTML){var marginTop=parseFloat(styles.marginTop,10);var marginLeft=parseFloat(styles.marginLeft,10);offsets.top-=borderTopWidth-marginTop;offsets.bottom-=borderTopWidth-marginTop;offsets.left-=borderLeftWidth-marginLeft;offsets.right-=borderLeftWidth-marginLeft;offsets.marginTop=marginTop;offsets.marginLeft=marginLeft}if(isIE10&&!fixedPosition?parent.contains(scrollParent):parent===scrollParent&&scrollParent.nodeName!=="BODY"){offsets=includeScroll(offsets,parent)}return offsets}function getViewportOffsetRectRelativeToArtbitraryNode(element){var excludeScroll=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var html=element.ownerDocument.documentElement;var relativeOffset=getOffsetRectRelativeToArbitraryNode(element,html);var width=Math.max(html.clientWidth,window.innerWidth||0);var height=Math.max(html.clientHeight,window.innerHeight||0);var scrollTop=!excludeScroll?getScroll(html):0;var scrollLeft=!excludeScroll?getScroll(html,"left"):0;var offset={top:scrollTop-relativeOffset.top+relativeOffset.marginTop,left:scrollLeft-relativeOffset.left+relativeOffset.marginLeft,width:width,height:height};return getClientRect(offset)}function isFixed(element){var nodeName=element.nodeName;if(nodeName==="BODY"||nodeName==="HTML"){return false}if(getStyleComputedProperty(element,"position")==="fixed"){return true}var parentNode=getParentNode(element);if(!parentNode){return false}return isFixed(parentNode)}function getFixedPositionOffsetParent(element){if(!element||!element.parentElement||isIE()){return document.documentElement}var el=element.parentElement;while(el&&getStyleComputedProperty(el,"transform")==="none"){el=el.parentElement}return el||document.documentElement}function getBoundaries(popper,reference,padding,boundariesElement){var fixedPosition=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var boundaries={top:0,left:0};var offsetParent=fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,getReferenceNode(reference));if(boundariesElement==="viewport"){boundaries=getViewportOffsetRectRelativeToArtbitraryNode(offsetParent,fixedPosition)}else{var boundariesNode=void 0;if(boundariesElement==="scrollParent"){boundariesNode=getScrollParent(getParentNode(reference));if(boundariesNode.nodeName==="BODY"){boundariesNode=popper.ownerDocument.documentElement}}else if(boundariesElement==="window"){boundariesNode=popper.ownerDocument.documentElement}else{boundariesNode=boundariesElement}var offsets=getOffsetRectRelativeToArbitraryNode(boundariesNode,offsetParent,fixedPosition);if(boundariesNode.nodeName==="HTML"&&!isFixed(offsetParent)){var _getWindowSizes=getWindowSizes(popper.ownerDocument),height=_getWindowSizes.height,width=_getWindowSizes.width;boundaries.top+=offsets.top-offsets.marginTop;boundaries.bottom=height+offsets.top;boundaries.left+=offsets.left-offsets.marginLeft;boundaries.right=width+offsets.left}else{boundaries=offsets}}padding=padding||0;var isPaddingNumber=typeof padding==="number";boundaries.left+=isPaddingNumber?padding:padding.left||0;boundaries.top+=isPaddingNumber?padding:padding.top||0;boundaries.right-=isPaddingNumber?padding:padding.right||0;boundaries.bottom-=isPaddingNumber?padding:padding.bottom||0;return boundaries}function getArea(_ref){var width=_ref.width,height=_ref.height;return width*height}function computeAutoPlacement(placement,refRect,popper,reference,boundariesElement){var padding=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;if(placement.indexOf("auto")===-1){return placement}var boundaries=getBoundaries(popper,reference,padding,boundariesElement);var rects={top:{width:boundaries.width,height:refRect.top-boundaries.top},right:{width:boundaries.right-refRect.right,height:boundaries.height},bottom:{width:boundaries.width,height:boundaries.bottom-refRect.bottom},left:{width:refRect.left-boundaries.left,height:boundaries.height}};var sortedAreas=Object.keys(rects).map(function(key){return _extends({key:key},rects[key],{area:getArea(rects[key])})}).sort(function(a,b){return b.area-a.area});var filteredAreas=sortedAreas.filter(function(_ref2){var width=_ref2.width,height=_ref2.height;return width>=popper.clientWidth&&height>=popper.clientHeight});var computedPlacement=filteredAreas.length>0?filteredAreas[0].key:sortedAreas[0].key;var variation=placement.split("-")[1];return computedPlacement+(variation?"-"+variation:"")}function getReferenceOffsets(state,popper,reference){var fixedPosition=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var commonOffsetParent=fixedPosition?getFixedPositionOffsetParent(popper):findCommonOffsetParent(popper,getReferenceNode(reference));return getOffsetRectRelativeToArbitraryNode(reference,commonOffsetParent,fixedPosition)}function getOuterSizes(element){var window=element.ownerDocument.defaultView;var styles=window.getComputedStyle(element);var x=parseFloat(styles.marginTop||0)+parseFloat(styles.marginBottom||0);var y=parseFloat(styles.marginLeft||0)+parseFloat(styles.marginRight||0);var result={width:element.offsetWidth+y,height:element.offsetHeight+x};return result}function getOppositePlacement(placement){var hash={left:"right",right:"left",bottom:"top",top:"bottom"};return placement.replace(/left|right|bottom|top/g,function(matched){return hash[matched]})}function getPopperOffsets(popper,referenceOffsets,placement){placement=placement.split("-")[0];var popperRect=getOuterSizes(popper);var popperOffsets={width:popperRect.width,height:popperRect.height};var isHoriz=["right","left"].indexOf(placement)!==-1;var mainSide=isHoriz?"top":"left";var secondarySide=isHoriz?"left":"top";var measurement=isHoriz?"height":"width";var secondaryMeasurement=!isHoriz?"height":"width";popperOffsets[mainSide]=referenceOffsets[mainSide]+referenceOffsets[measurement]/2-popperRect[measurement]/2;if(placement===secondarySide){popperOffsets[secondarySide]=referenceOffsets[secondarySide]-popperRect[secondaryMeasurement]}else{popperOffsets[secondarySide]=referenceOffsets[getOppositePlacement(secondarySide)]}return popperOffsets}function find(arr,check){if(Array.prototype.find){return arr.find(check)}return arr.filter(check)[0]}function findIndex(arr,prop,value){if(Array.prototype.findIndex){return arr.findIndex(function(cur){return cur[prop]===value})}var match=find(arr,function(obj){return obj[prop]===value});return arr.indexOf(match)}function runModifiers(modifiers,data,ends){var modifiersToRun=ends===undefined?modifiers:modifiers.slice(0,findIndex(modifiers,"name",ends));modifiersToRun.forEach(function(modifier){if(modifier["function"]){console.warn("`modifier.function` is deprecated, use `modifier.fn`!")}var fn=modifier["function"]||modifier.fn;if(modifier.enabled&&isFunction(fn)){data.offsets.popper=getClientRect(data.offsets.popper);data.offsets.reference=getClientRect(data.offsets.reference);data=fn(data,modifier)}});return data}function update(){if(this.state.isDestroyed){return}var data={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:false,offsets:{}};data.offsets.reference=getReferenceOffsets(this.state,this.popper,this.reference,this.options.positionFixed);data.placement=computeAutoPlacement(this.options.placement,data.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding);data.originalPlacement=data.placement;data.positionFixed=this.options.positionFixed;data.offsets.popper=getPopperOffsets(this.popper,data.offsets.reference,data.placement);data.offsets.popper.position=this.options.positionFixed?"fixed":"absolute";data=runModifiers(this.modifiers,data);if(!this.state.isCreated){this.state.isCreated=true;this.options.onCreate(data)}else{this.options.onUpdate(data)}}function isModifierEnabled(modifiers,modifierName){return modifiers.some(function(_ref){var name=_ref.name,enabled=_ref.enabled;return enabled&&name===modifierName})}function getSupportedPropertyName(property){var prefixes=[false,"ms","Webkit","Moz","O"];var upperProp=property.charAt(0).toUpperCase()+property.slice(1);for(var i=0;i<prefixes.length;i++){var prefix=prefixes[i];var toCheck=prefix?""+prefix+upperProp:property;if(typeof document.body.style[toCheck]!=="undefined"){return toCheck}}return null}function destroy(){this.state.isDestroyed=true;if(isModifierEnabled(this.modifiers,"applyStyle")){this.popper.removeAttribute("x-placement");this.popper.style.position="";this.popper.style.top="";this.popper.style.left="";this.popper.style.right="";this.popper.style.bottom="";this.popper.style.willChange="";this.popper.style[getSupportedPropertyName("transform")]=""}this.disableEventListeners();if(this.options.removeOnDestroy){this.popper.parentNode.removeChild(this.popper)}return this}function getWindow(element){var ownerDocument=element.ownerDocument;return ownerDocument?ownerDocument.defaultView:window}function attachToScrollParents(scrollParent,event,callback,scrollParents){var isBody=scrollParent.nodeName==="BODY";var target=isBody?scrollParent.ownerDocument.defaultView:scrollParent;target.addEventListener(event,callback,{passive:true});if(!isBody){attachToScrollParents(getScrollParent(target.parentNode),event,callback,scrollParents)}scrollParents.push(target)}function setupEventListeners(reference,options,state,updateBound){state.updateBound=updateBound;getWindow(reference).addEventListener("resize",state.updateBound,{passive:true});var scrollElement=getScrollParent(reference);attachToScrollParents(scrollElement,"scroll",state.updateBound,state.scrollParents);state.scrollElement=scrollElement;state.eventsEnabled=true;return state}function enableEventListeners(){if(!this.state.eventsEnabled){this.state=setupEventListeners(this.reference,this.options,this.state,this.scheduleUpdate)}}function removeEventListeners(reference,state){getWindow(reference).removeEventListener("resize",state.updateBound);state.scrollParents.forEach(function(target){target.removeEventListener("scroll",state.updateBound)});state.updateBound=null;state.scrollParents=[];state.scrollElement=null;state.eventsEnabled=false;return state}function disableEventListeners(){if(this.state.eventsEnabled){cancelAnimationFrame(this.scheduleUpdate);this.state=removeEventListeners(this.reference,this.state)}}function isNumeric(n){return n!==""&&!isNaN(parseFloat(n))&&isFinite(n)}function setStyles(element,styles){Object.keys(styles).forEach(function(prop){var unit="";if(["width","height","top","right","bottom","left"].indexOf(prop)!==-1&&isNumeric(styles[prop])){unit="px"}element.style[prop]=styles[prop]+unit})}function setAttributes(element,attributes){Object.keys(attributes).forEach(function(prop){var value=attributes[prop];if(value!==false){element.setAttribute(prop,attributes[prop])}else{element.removeAttribute(prop)}})}function applyStyle(data){setStyles(data.instance.popper,data.styles);setAttributes(data.instance.popper,data.attributes);if(data.arrowElement&&Object.keys(data.arrowStyles).length){setStyles(data.arrowElement,data.arrowStyles)}return data}function applyStyleOnLoad(reference,popper,options,modifierOptions,state){var referenceOffsets=getReferenceOffsets(state,popper,reference,options.positionFixed);var placement=computeAutoPlacement(options.placement,referenceOffsets,popper,reference,options.modifiers.flip.boundariesElement,options.modifiers.flip.padding);popper.setAttribute("x-placement",placement);setStyles(popper,{position:options.positionFixed?"fixed":"absolute"});return options}function getRoundedOffsets(data,shouldRound){var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var round=Math.round,floor=Math.floor;var noRound=function noRound(v){return v};var referenceWidth=round(reference.width);var popperWidth=round(popper.width);var isVertical=["left","right"].indexOf(data.placement)!==-1;var isVariation=data.placement.indexOf("-")!==-1;var sameWidthParity=referenceWidth%2===popperWidth%2;var bothOddWidth=referenceWidth%2===1&&popperWidth%2===1;var horizontalToInteger=!shouldRound?noRound:isVertical||isVariation||sameWidthParity?round:floor;var verticalToInteger=!shouldRound?noRound:round;return{left:horizontalToInteger(bothOddWidth&&!isVariation&&shouldRound?popper.left-1:popper.left),top:verticalToInteger(popper.top),bottom:verticalToInteger(popper.bottom),right:horizontalToInteger(popper.right)}}var isFirefox=isBrowser&&/Firefox/i.test(navigator.userAgent);function computeStyle(data,options){var x=options.x,y=options.y;var popper=data.offsets.popper;var legacyGpuAccelerationOption=find(data.instance.modifiers,function(modifier){return modifier.name==="applyStyle"}).gpuAcceleration;if(legacyGpuAccelerationOption!==undefined){console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!")}var gpuAcceleration=legacyGpuAccelerationOption!==undefined?legacyGpuAccelerationOption:options.gpuAcceleration;var offsetParent=getOffsetParent(data.instance.popper);var offsetParentRect=getBoundingClientRect(offsetParent);var styles={position:popper.position};var offsets=getRoundedOffsets(data,window.devicePixelRatio<2||!isFirefox);var sideA=x==="bottom"?"top":"bottom";var sideB=y==="right"?"left":"right";var prefixedProperty=getSupportedPropertyName("transform");var left=void 0,top=void 0;if(sideA==="bottom"){if(offsetParent.nodeName==="HTML"){top=-offsetParent.clientHeight+offsets.bottom}else{top=-offsetParentRect.height+offsets.bottom}}else{top=offsets.top}if(sideB==="right"){if(offsetParent.nodeName==="HTML"){left=-offsetParent.clientWidth+offsets.right}else{left=-offsetParentRect.width+offsets.right}}else{left=offsets.left}if(gpuAcceleration&&prefixedProperty){styles[prefixedProperty]="translate3d("+left+"px, "+top+"px, 0)";styles[sideA]=0;styles[sideB]=0;styles.willChange="transform"}else{var invertTop=sideA==="bottom"?-1:1;var invertLeft=sideB==="right"?-1:1;styles[sideA]=top*invertTop;styles[sideB]=left*invertLeft;styles.willChange=sideA+", "+sideB}var attributes={"x-placement":data.placement};data.attributes=_extends({},attributes,data.attributes);data.styles=_extends({},styles,data.styles);data.arrowStyles=_extends({},data.offsets.arrow,data.arrowStyles);return data}function isModifierRequired(modifiers,requestingName,requestedName){var requesting=find(modifiers,function(_ref){var name=_ref.name;return name===requestingName});var isRequired=!!requesting&&modifiers.some(function(modifier){return modifier.name===requestedName&&modifier.enabled&&modifier.order<requesting.order});if(!isRequired){var _requesting="`"+requestingName+"`";var requested="`"+requestedName+"`";console.warn(requested+" modifier is required by "+_requesting+" modifier in order to work, be sure to include it before "+_requesting+"!")}return isRequired}function arrow(data,options){var _data$offsets$arrow;if(!isModifierRequired(data.instance.modifiers,"arrow","keepTogether")){return data}var arrowElement=options.element;if(typeof arrowElement==="string"){arrowElement=data.instance.popper.querySelector(arrowElement);if(!arrowElement){return data}}else{if(!data.instance.popper.contains(arrowElement)){console.warn("WARNING: `arrow.element` must be child of its popper element!");return data}}var placement=data.placement.split("-")[0];var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var isVertical=["left","right"].indexOf(placement)!==-1;var len=isVertical?"height":"width";var sideCapitalized=isVertical?"Top":"Left";var side=sideCapitalized.toLowerCase();var altSide=isVertical?"left":"top";var opSide=isVertical?"bottom":"right";var arrowElementSize=getOuterSizes(arrowElement)[len];if(reference[opSide]-arrowElementSize<popper[side]){data.offsets.popper[side]-=popper[side]-(reference[opSide]-arrowElementSize)}if(reference[side]+arrowElementSize>popper[opSide]){data.offsets.popper[side]+=reference[side]+arrowElementSize-popper[opSide]}data.offsets.popper=getClientRect(data.offsets.popper);var center=reference[side]+reference[len]/2-arrowElementSize/2;var css=getStyleComputedProperty(data.instance.popper);var popperMarginSide=parseFloat(css["margin"+sideCapitalized],10);var popperBorderSide=parseFloat(css["border"+sideCapitalized+"Width"],10);var sideValue=center-data.offsets.popper[side]-popperMarginSide-popperBorderSide;sideValue=Math.max(Math.min(popper[len]-arrowElementSize,sideValue),0);data.arrowElement=arrowElement;data.offsets.arrow=(_data$offsets$arrow={},defineProperty(_data$offsets$arrow,side,Math.round(sideValue)),defineProperty(_data$offsets$arrow,altSide,""),_data$offsets$arrow);return data}function getOppositeVariation(variation){if(variation==="end"){return"start"}else if(variation==="start"){return"end"}return variation}var placements=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"];var validPlacements=placements.slice(3);function clockwise(placement){var counter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var index=validPlacements.indexOf(placement);var arr=validPlacements.slice(index+1).concat(validPlacements.slice(0,index));return counter?arr.reverse():arr}var BEHAVIORS={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function flip(data,options){if(isModifierEnabled(data.instance.modifiers,"inner")){return data}if(data.flipped&&data.placement===data.originalPlacement){return data}var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,options.boundariesElement,data.positionFixed);var placement=data.placement.split("-")[0];var placementOpposite=getOppositePlacement(placement);var variation=data.placement.split("-")[1]||"";var flipOrder=[];switch(options.behavior){case BEHAVIORS.FLIP:flipOrder=[placement,placementOpposite];break;case BEHAVIORS.CLOCKWISE:flipOrder=clockwise(placement);break;case BEHAVIORS.COUNTERCLOCKWISE:flipOrder=clockwise(placement,true);break;default:flipOrder=options.behavior}flipOrder.forEach(function(step,index){if(placement!==step||flipOrder.length===index+1){return data}placement=data.placement.split("-")[0];placementOpposite=getOppositePlacement(placement);var popperOffsets=data.offsets.popper;var refOffsets=data.offsets.reference;var floor=Math.floor;var overlapsRef=placement==="left"&&floor(popperOffsets.right)>floor(refOffsets.left)||placement==="right"&&floor(popperOffsets.left)<floor(refOffsets.right)||placement==="top"&&floor(popperOffsets.bottom)>floor(refOffsets.top)||placement==="bottom"&&floor(popperOffsets.top)<floor(refOffsets.bottom);var overflowsLeft=floor(popperOffsets.left)<floor(boundaries.left);var overflowsRight=floor(popperOffsets.right)>floor(boundaries.right);var overflowsTop=floor(popperOffsets.top)<floor(boundaries.top);var overflowsBottom=floor(popperOffsets.bottom)>floor(boundaries.bottom);var overflowsBoundaries=placement==="left"&&overflowsLeft||placement==="right"&&overflowsRight||placement==="top"&&overflowsTop||placement==="bottom"&&overflowsBottom;var isVertical=["top","bottom"].indexOf(placement)!==-1;var flippedVariationByRef=!!options.flipVariations&&(isVertical&&variation==="start"&&overflowsLeft||isVertical&&variation==="end"&&overflowsRight||!isVertical&&variation==="start"&&overflowsTop||!isVertical&&variation==="end"&&overflowsBottom);var flippedVariationByContent=!!options.flipVariationsByContent&&(isVertical&&variation==="start"&&overflowsRight||isVertical&&variation==="end"&&overflowsLeft||!isVertical&&variation==="start"&&overflowsBottom||!isVertical&&variation==="end"&&overflowsTop);var flippedVariation=flippedVariationByRef||flippedVariationByContent;if(overlapsRef||overflowsBoundaries||flippedVariation){data.flipped=true;if(overlapsRef||overflowsBoundaries){placement=flipOrder[index+1]}if(flippedVariation){variation=getOppositeVariation(variation)}data.placement=placement+(variation?"-"+variation:"");data.offsets.popper=_extends({},data.offsets.popper,getPopperOffsets(data.instance.popper,data.offsets.reference,data.placement));data=runModifiers(data.instance.modifiers,data,"flip")}});return data}function keepTogether(data){var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var placement=data.placement.split("-")[0];var floor=Math.floor;var isVertical=["top","bottom"].indexOf(placement)!==-1;var side=isVertical?"right":"bottom";var opSide=isVertical?"left":"top";var measurement=isVertical?"width":"height";if(popper[side]<floor(reference[opSide])){data.offsets.popper[opSide]=floor(reference[opSide])-popper[measurement]}if(popper[opSide]>floor(reference[side])){data.offsets.popper[opSide]=floor(reference[side])}return data}function toValue(str,measurement,popperOffsets,referenceOffsets){var split=str.match(/((?:\-|\+)?\d*\.?\d*)(.*)/);var value=+split[1];var unit=split[2];if(!value){return str}if(unit.indexOf("%")===0){var element=void 0;switch(unit){case"%p":element=popperOffsets;break;case"%":case"%r":default:element=referenceOffsets}var rect=getClientRect(element);return rect[measurement]/100*value}else if(unit==="vh"||unit==="vw"){var size=void 0;if(unit==="vh"){size=Math.max(document.documentElement.clientHeight,window.innerHeight||0)}else{size=Math.max(document.documentElement.clientWidth,window.innerWidth||0)}return size/100*value}else{return value}}function parseOffset(offset,popperOffsets,referenceOffsets,basePlacement){var offsets=[0,0];var useHeight=["right","left"].indexOf(basePlacement)!==-1;var fragments=offset.split(/(\+|\-)/).map(function(frag){return frag.trim()});var divider=fragments.indexOf(find(fragments,function(frag){return frag.search(/,|\s/)!==-1}));if(fragments[divider]&&fragments[divider].indexOf(",")===-1){console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.")}var splitRegex=/\s*,\s*|\s+/;var ops=divider!==-1?[fragments.slice(0,divider).concat([fragments[divider].split(splitRegex)[0]]),[fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider+1))]:[fragments];ops=ops.map(function(op,index){var measurement=(index===1?!useHeight:useHeight)?"height":"width";var mergeWithPrevious=false;return op.reduce(function(a,b){if(a[a.length-1]===""&&["+","-"].indexOf(b)!==-1){a[a.length-1]=b;mergeWithPrevious=true;return a}else if(mergeWithPrevious){a[a.length-1]+=b;mergeWithPrevious=false;return a}else{return a.concat(b)}},[]).map(function(str){return toValue(str,measurement,popperOffsets,referenceOffsets)})});ops.forEach(function(op,index){op.forEach(function(frag,index2){if(isNumeric(frag)){offsets[index]+=frag*(op[index2-1]==="-"?-1:1)}})});return offsets}function offset(data,_ref){var offset=_ref.offset;var placement=data.placement,_data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var basePlacement=placement.split("-")[0];var offsets=void 0;if(isNumeric(+offset)){offsets=[+offset,0]}else{offsets=parseOffset(offset,popper,reference,basePlacement)}if(basePlacement==="left"){popper.top+=offsets[0];popper.left-=offsets[1]}else if(basePlacement==="right"){popper.top+=offsets[0];popper.left+=offsets[1]}else if(basePlacement==="top"){popper.left+=offsets[0];popper.top-=offsets[1]}else if(basePlacement==="bottom"){popper.left+=offsets[0];popper.top+=offsets[1]}data.popper=popper;return data}function preventOverflow(data,options){var boundariesElement=options.boundariesElement||getOffsetParent(data.instance.popper);if(data.instance.reference===boundariesElement){boundariesElement=getOffsetParent(boundariesElement)}var transformProp=getSupportedPropertyName("transform");var popperStyles=data.instance.popper.style;var top=popperStyles.top,left=popperStyles.left,transform=popperStyles[transformProp];popperStyles.top="";popperStyles.left="";popperStyles[transformProp]="";var boundaries=getBoundaries(data.instance.popper,data.instance.reference,options.padding,boundariesElement,data.positionFixed);popperStyles.top=top;popperStyles.left=left;popperStyles[transformProp]=transform;options.boundaries=boundaries;var order=options.priority;var popper=data.offsets.popper;var check={primary:function primary(placement){var value=popper[placement];if(popper[placement]<boundaries[placement]&&!options.escapeWithReference){value=Math.max(popper[placement],boundaries[placement])}return defineProperty({},placement,value)},secondary:function secondary(placement){var mainSide=placement==="right"?"left":"top";var value=popper[mainSide];if(popper[placement]>boundaries[placement]&&!options.escapeWithReference){value=Math.min(popper[mainSide],boundaries[placement]-(placement==="right"?popper.width:popper.height))}return defineProperty({},mainSide,value)}};order.forEach(function(placement){var side=["left","top"].indexOf(placement)!==-1?"primary":"secondary";popper=_extends({},popper,check[side](placement))});data.offsets.popper=popper;return data}function shift(data){var placement=data.placement;var basePlacement=placement.split("-")[0];var shiftvariation=placement.split("-")[1];if(shiftvariation){var _data$offsets=data.offsets,reference=_data$offsets.reference,popper=_data$offsets.popper;var isVertical=["bottom","top"].indexOf(basePlacement)!==-1;var side=isVertical?"left":"top";var measurement=isVertical?"width":"height";var shiftOffsets={start:defineProperty({},side,reference[side]),end:defineProperty({},side,reference[side]+reference[measurement]-popper[measurement])};data.offsets.popper=_extends({},popper,shiftOffsets[shiftvariation])}return data}function hide(data){if(!isModifierRequired(data.instance.modifiers,"hide","preventOverflow")){return data}var refRect=data.offsets.reference;var bound=find(data.instance.modifiers,function(modifier){return modifier.name==="preventOverflow"}).boundaries;if(refRect.bottom<bound.top||refRect.left>bound.right||refRect.top>bound.bottom||refRect.right<bound.left){if(data.hide===true){return data}data.hide=true;data.attributes["x-out-of-boundaries"]=""}else{if(data.hide===false){return data}data.hide=false;data.attributes["x-out-of-boundaries"]=false}return data}function inner(data){var placement=data.placement;var basePlacement=placement.split("-")[0];var _data$offsets=data.offsets,popper=_data$offsets.popper,reference=_data$offsets.reference;var isHoriz=["left","right"].indexOf(basePlacement)!==-1;var subtractLength=["top","left"].indexOf(basePlacement)===-1;popper[isHoriz?"left":"top"]=reference[basePlacement]-(subtractLength?popper[isHoriz?"width":"height"]:0);data.placement=getOppositePlacement(placement);data.offsets.popper=getClientRect(popper);return data}var modifiers={shift:{order:100,enabled:true,fn:shift},offset:{order:200,enabled:true,fn:offset,offset:0},preventOverflow:{order:300,enabled:true,fn:preventOverflow,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:true,fn:keepTogether},arrow:{order:500,enabled:true,fn:arrow,element:"[x-arrow]"},flip:{order:600,enabled:true,fn:flip,behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:false,flipVariationsByContent:false},inner:{order:700,enabled:false,fn:inner},hide:{order:800,enabled:true,fn:hide},computeStyle:{order:850,enabled:true,fn:computeStyle,gpuAcceleration:true,x:"bottom",y:"right"},applyStyle:{order:900,enabled:true,fn:applyStyle,onLoad:applyStyleOnLoad,gpuAcceleration:undefined}};var Defaults={placement:"bottom",positionFixed:false,eventsEnabled:true,removeOnDestroy:false,onCreate:function onCreate(){},onUpdate:function onUpdate(){},modifiers:modifiers};var Popper=function(){function Popper(reference,popper){var _this=this;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};classCallCheck(this,Popper);this.scheduleUpdate=function(){return requestAnimationFrame(_this.update)};this.update=debounce(this.update.bind(this));this.options=_extends({},Popper.Defaults,options);this.state={isDestroyed:false,isCreated:false,scrollParents:[]};this.reference=reference&&reference.jquery?reference[0]:reference;this.popper=popper&&popper.jquery?popper[0]:popper;this.options.modifiers={};Object.keys(_extends({},Popper.Defaults.modifiers,options.modifiers)).forEach(function(name){_this.options.modifiers[name]=_extends({},Popper.Defaults.modifiers[name]||{},options.modifiers?options.modifiers[name]:{})});this.modifiers=Object.keys(this.options.modifiers).map(function(name){return _extends({name:name},_this.options.modifiers[name])}).sort(function(a,b){return a.order-b.order});this.modifiers.forEach(function(modifierOptions){if(modifierOptions.enabled&&isFunction(modifierOptions.onLoad)){modifierOptions.onLoad(_this.reference,_this.popper,_this.options,modifierOptions,_this.state)}});this.update();var eventsEnabled=this.options.eventsEnabled;if(eventsEnabled){this.enableEventListeners()}this.state.eventsEnabled=eventsEnabled}createClass(Popper,[{key:"update",value:function update$$1(){return update.call(this)}},{key:"destroy",value:function destroy$$1(){return destroy.call(this)}},{key:"enableEventListeners",value:function enableEventListeners$$1(){return enableEventListeners.call(this)}},{key:"disableEventListeners",value:function disableEventListeners$$1(){return disableEventListeners.call(this)}}]);return Popper}();Popper.Utils=(typeof window!=="undefined"?window:global).PopperUtils;Popper.placements=placements;Popper.Defaults=Defaults;return Popper});function boxRegistration(box){this.box=box;this.passwordoptional=false;this.checkexistingaccount=true}boxRegistration.prototype.init=function(){var ajaxbox=this;this.box.on("change",'input[name="customer_type"]',function(){ajaxbox.showAddressFields($(this).val())});this.box.on("click",'input[name="selected_paymentmethod"]',function(){if($(this).prop("checked")){if(window["initPayment"+$(this).attr("id")])window["initPayment"+$(this).attr("id")](ajaxbox,this);else{if(console&&console.log)console.log("function initPayment"+$(this).attr("id")+" not found")}}});this.box.on("submit","#cartcheckoutform_payment",function(e){var curmethod=ajaxbox.box.find('input[name="selected_paymentmethod"]:checked');if(curmethod.length===0){ajax.flashMessage("error",btv_Language.get("select_payment_method"));e.preventDefault();cancelLoading();return false}if($(curmethod).data("validatefields")){var func=$(curmethod).data("validatefields");if(!func()){e.preventDefault();cancelLoading();return false}}else{var isok=true;$('label[for="'+curmethod.attr("id")+'"]').find("input[data-required]").each((idx,item)=>{if($(item).val().trim()===""){$(item).parent().find("#"+item.id+"_info").html("Field required");e.preventDefault();isok=false;cancelLoading()}});if(!isok)return false}if($("#cartcheckoutform_payment")[0].checkValidity())showLoading($(e.originalEvent.submitter));return true});this.box.on("countryselected",function(event,data){ajaxbox.updateCountry()});this.box.on("click","#register_account",function(){ajaxbox.updatePwdFields()});this.box.on("click",".shippingoption",function(event){ajaxbox.selectShipping(event)});this.box.on("submit","#cartcheckoutform_shipping",function(e){ajaxbox.submitShipping(e,this)});this.box.on("submit","#cartcheckoutform",function(e){ajaxbox.submitAddress(e,this)});this.box.on("blur",'div[data-field="email_address"] input',function(){var field=$(this);if(this.checkValidity())if(field.data("lastval")!==$(field).val()&&ajaxbox.checkexistingaccount){if(field.val()!==""){ajax.rpcCall("checkaccountexist",{login:field.val()},function(data){if(data.content)field.addClass("border-warning").parent().find(".invalid-feedback").addClass("text-black").html(data.content).show();else field.removeClass("border-warning").parent().find(".invalid-feedback").removeClass("text-black").css("display","")},true)}$(this).data("lastval",$(this).val())}});if($(this.box).data("box-code")==="boxAccountEdit"){this.checkexistingaccount=false;this.passwordoptional=true;ajaxbox.updateAccountPwdFields();$(this.box).on("change",'#shipping_pwd,div[data-field="email_address"] input',function(){ajaxbox.updateAccountPwdFields()})}ajaxbox.showAddressFields($('input[name="customer_type"]:checked').val());ajaxbox.updatePwdFields();ajaxbox.updateCountry()};boxboxCartLogin=boxRegistration;boxboxAccountLogin=boxRegistration;boxcartquickcheckout=boxRegistration;boxboxCartResult=boxRegistration;boxboxAccountRegistration=boxRegistration;boxCartAddPayment=boxRegistration;boxboxAccountEdit=boxRegistration;boxcartquickcheckout.prototype.updateAccountPwdFields=function(){var emailfield=$('div[data-field="email_address"] input');var mailchanged=$("#current_email").val()!==$('div[data-field="email_address"] input').val();var required=mailchanged||$("#shipping_pwd").val()!=="";this.box.find("#shipping_pwdo").prop("required",required);this.box.find("#shipping_pwd").prop("required",required);this.box.find("#shipping_pwdc").prop("required",required)};boxcartquickcheckout.prototype.updatePwdFields=function(){var currentcontainer=this.getCurrentFieldsContainer();var checked=currentcontainer.find("#register_account").prop("checked");currentcontainer.find('[data-depends="#register_account"]').toggle(checked).find("input").prop("disabled",!checked);updateRequiredFields()};boxcartquickcheckout.prototype.updateStates=function(){var currentcontainer=this.getCurrentFieldsContainer();var statesfield=currentcontainer.find(".selectstate");var selectedcountry=currentcontainer.find(".selectcountry option:selected");var currentstate=statesfield.val();ajax.rpcCall("getStates",{iso_2:selectedcountry.attr("value")},function(http){newhtml="";$.each(http.content,function(idx,item){newhtml+='<option value="'+item.id+'">'+item.option+"</option>"});statesfield.html(newhtml);statesfield.val(currentstate)},false,statesfield)};boxcartquickcheckout.prototype.updateCountry=function(){var currentcontainer=this.getCurrentFieldsContainer();var housenrfield=currentcontainer.find('div[data-field="house_number"]');var selectedoption=currentcontainer.find(".selectcountry option:selected");var reqstate=selectedoption.data("state-required")===true;if(reqstate)this.updateStates();currentcontainer.find(".selectstate").attr("disabled",!reqstate).attr("required",reqstate?"":null).parent().parent().toggle(reqstate);var showhouse=selectedoption.data("address-format")==="H";housenrfield.parent().toggle(showhouse).find("input").attr("required",showhouse);if(!showhouse){housenrfield.find("input").val("")}};boxcartquickcheckout.prototype.validateAddress=function(){var retval=true;var container=this.getCurrentFieldsContainer();container.find('input[type="email"]').removeClass("border-warning").parent().find(".invalid-feedback").removeClass("text-black").css("display","");container.find("input,select,textarea").each(function(idx,item){if(container.find("#register_account").prop("checked")||$('input[name="customer_type"]:checked').val()==="company"){if(container.find("#shipping_pwd").val()!==container.find("#shipping_pwdc").val()){ajax.flashMessage("error",btv_Language.get("err_account_pwd_not_match"));retval=false;return}}if(retval&&!item.checkValidity())retval=false});return retval};boxcartquickcheckout.prototype.submitShipping=function(e,form){if(this.xhr&&this.xhr.readyState!==4){this.xhr.abort("abort_from_rrw")}if(this.box.find("#shippingoptions li.list-group-item-success").length!==1){ajax.flashMessage("error",btv_Language.get("err_select_shipping_method"));e.preventDefault();e.stopPropagation();return false}e.preventDefault();showLoading($(form).find(".showloading"));var data={};this.box.find("#shipping_selected").val(true);formToObject(this.box.find("form.form_shipping"),data);data.showoverlay=true;data.submit=true;var ajaxbox=this;ajax.runBoxProcess(this.box,"refreshShipping",data,function(http){this.xhr=null;if(http.success){ajaxbox.showAddressFields($('input[name="customer_type"]:checked').val());ajaxbox.updatePwdFields();ajaxbox.updateCountry()}},function(){cancelLoading()},this.box)};boxcartquickcheckout.prototype.submitAddress=function(e,form){if(this.xhr&&this.xhr.readyState!==4){this.xhr.abort("abort_from_rrw")}e.preventDefault();if(!this.validateAddress())return false;showLoading($(form).find(".showloading"));var data={};formToObject(this.box.find("form.form_address"),data);data.showoverlay=true;var ajaxbox=this;ajax.runBoxProcess(this.box,"validateAddress",data,function(http){this.xhr=null;ajaxbox.showAddressFields(ajaxbox.box.find('input[name="customer_type"]').val())},function(){cancelLoading()},this.box)};boxcartquickcheckout.prototype.setShippingOption=function(data){this.box.find('input[name="selectedshipping[option]"]').val(data);this.refreshShipping();ajax.closeModal()};boxcartquickcheckout.prototype.selectShipping=function(event){var curmethod=this.box.find('input[name="selectedshipping[method]"]').val();var curmodule=this.box.find('input[name="selectedshipping[module]"]').val();if(curmethod===$(event.currentTarget).data("method")&&curmodule===$(event.currentTarget).data("module"))return;this.box.find(".shippingoption").removeClass("list-group-item-success");$(event.currentTarget).addClass("list-group-item-success");this.box.find('input[name="selectedshipping[module]"]').val($(event.currentTarget).data("module"));this.box.find('input[name="selectedshipping[method]"]').val($(event.currentTarget).data("method"));this.refreshShipping()};boxcartquickcheckout.prototype.rpcCallback=function(){};boxcartquickcheckout.prototype.showAddressFields=function(type){$(".addressfields").hide().find("[required]").removeAttr("required");$("#fields_"+type).show().find("[data-required]").attr("required","");this.updateCountry()};boxcartquickcheckout.prototype.setAddress=function(type,id){var ajaxbox=this;$.each(addresslist[id],function(idx,val){ajaxbox.box.find('[name="'+type+"_shipping["+idx+']"]').val(val)});ajaxbox.box.find(".selectcountry").trigger("change")};boxcartquickcheckout.prototype.getCurrentFieldsContainer=function(){if($('input[name="customer_type"]').length<2){var form=this.box.find("#cartcheckoutform");if(form.length>0)return form;else return this.box.find("#registrationform")}return this.box.find("#fields_"+$('input[name="customer_type"]:checked').val())};boxcartquickcheckout.prototype.refreshShipping=function(){if(this.xhr&&this.xhr.readyState!==4){this.xhr.abort("abort_from_rrw")}var ajaxbox=this;data={};formToObject(this.box.find("form.form_shipping"),data);data.showoverlay=true;this.xhr=ajax.runBoxProcess(this.box,"refreshShipping",data,function(http){this.xhr=null;ajaxbox.box.find("#shippingoptions .list-group-item").remove();$.each(http.fields,function(idx,field){$("#"+field.id).html(field.content)})},null,$("#cartcheckoutform_shipping"))};var rrw={};rrw.dcOrder=function(dc_info,qty_field){this.currency=dc_info.currency;this.products=dc_info.products;this.shipping_address={};this.shop_country=dc_info.shop_country;this.vat_rate=dc_info.vat_rate;this.shipping_methods=[];this.qty_field=qty_field;this.selected_shipping_method=null;this.totals={};this.init=function(){this.initTotals=function(){let prod=this.getProducts();this.totals={total:{value_incl:prod.total_incl}}};this.initTotals()};this.setShippingAddress=function(shipping_address){this.shipping_address=shipping_address};this.getCurrency=function(){return this.currency};this.getProducts=function(){let order=this;let products=[];let subtotal_street_excl=0;let subtotal_street_incl=0;let subtotal_excl=0;let subtotal_incl=0;this.products.forEach(function(element){if(order.qty_field)element.qty=$(order.qty_field).val();else element.qty=1;element.subtotal_street_excl=element.qty*element.street_price_excl;element.subtotal_street_incl=element.qty*element.street_price_incl;element.subtotal_excl=element.qty*element.price_excl;element.subtotal_incl=element.qty*element.price_incl;products.push(element);subtotal_excl+=element.subtotal_excl;subtotal_incl+=element.subtotal_incl;subtotal_street_excl+=element.subtotal_street_excl;subtotal_street_incl+=element.subtotal_street_incl});return{products:products,subtotal_excl:subtotal_excl.toFixed(2),subtotal_incl:subtotal_incl.toFixed(2),subtotal_street_excl:subtotal_street_excl.toFixed(2),subtotal_street_incl:subtotal_street_incl.toFixed(2),total_discount_excl:(subtotal_street_excl-subtotal_excl).toFixed(2),total_discount_incl:(subtotal_street_incl-subtotal_incl).toFixed(2),subtotal_tax:(subtotal_incl-subtotal_excl).toFixed(2),subtotal_street_tax:(subtotal_street_incl-subtotal_street_excl).toFixed(2),total_excl:(subtotal_excl+this.getShippingPriceExcl()).toFixed(2),total_incl:(subtotal_incl+this.getShippingPriceIncl()).toFixed(2)}};this.getTotals=function(){return this.totals};this.getShippingPriceIncl=function(){if(!this.selected_shipping_method)return 0;return this.selected_shipping_method.price_incl};this.getShippingPriceExcl=function(){if(!this.selected_shipping_method)return 0;return this.selected_shipping_method.price_excl};this.processPayment=function(payment_module,payment_method,data){data.order={totals:this.totals,products:this.products,currency:this.currency};return new Promise((resolve,reject)=>{ajax.rpcMethod("dcProcessPayment",{payment_module:payment_module,payment_method:payment_method,data:data},{showmessages:true}).then(function(order){resolve(order)}).catch(function(error){reject(error)})})};this.getQuote=function(shipping_address,selected_shipping_method){let order=this;if(!shipping_address){address=null}else address=shipping_address.toObject();return new Promise((resolve,reject)=>{ajax.rpcMethod("dcQuote",{products:this.products,selected_shipping_method:selected_shipping_method,shipping_address:address},{showmessages:true}).then(function(quote){order.shipping_methods=quote.shipping_methods;order.selected_shipping_method=quote.selected_shipping_method;order.products=quote.order.products;order.totals=quote.order.totals;resolve(quote)}).catch(function(error){reject(error)})})};this.init()};rrw.address=function(lastname,company,street_address,postcode,city,country_iso_2,state_code){this.lastname=lastname;this.company=company;this.street_address=street_address;this.postcode=postcode;this.city=city;this.country_iso_2=country_iso_2;this.state_code=state_code;this.toObject=function(){return{lastname:this.lastname,company:this.company,street_address:this.street_address,postcode:this.postcode,city:this.city,country_iso_2:this.country_iso_2,zone_code:state_code}}};function getMediaQuery(){return $("#mq-detector>span:visible").data("mq")}function updateCheckboxes(checkgroup){if(checkgroup){$('div[data-checkgroup="'+checkgroup+'"]').each(function(idx,item){if($($(item).data("check")).prop("checked"))$(item).addClass("selected");else $(item).removeClass("selected")})}}function formToObject(form,obj){$.each(form.data(),function(idx,item){if(typeof item!="object")obj[idx]=item});$(form).find("input:not(:radio),textarea, select,input:radio:checked").each(function(idx,item){if($(item).attr("name")){var val="";if($(item).is('input[type="checkbox"]')){val=$(item).prop("checked")?1:0}else{val=$(item).val()}keys=$(item).attr("name").replace(/[^a-zA-Z0-9\[\]]/g,"_");obj[keys]=val}});return obj}function boxAvailable(box){return $("#"+box).length>0}function ajaxContainerAvailable(box){return $("#async"+box+"_general").length>0}function getBoxFunction(code,instance){if(typeof window["box"+code]==="function"){return window["objbox"+code+"box"+instance]}return null}$(document).ready(function(){updateRequiredFields();if(getMediaQuery()!="xs"&&getMediaQuery()!="sr"){if(!($("#asyncboxProductFilters_general").length==0)||$("#asyncboxProductFilters_general").html()==""){$("#boxprodfilters_general").addClass("show")}}$(".ajaxcontainer").each(function(idx,box){var boxobj=$(box);var boxcode=boxobj.data("box-code");var boxinstance=boxobj.data("box-instance");if(typeof window["box"+boxcode]==="function"){var obj=new window["box"+boxcode]($(box));window["objbox"+boxcode+"box"+boxinstance]=obj;obj.init();$(box).data("jsobj",obj)}})});$(document).on("click",'.ajaxcontainer button[type="button"].showloading',function(){showLoading($(this))});function showLoading(btn){btn.prop("disabled",true).find(".d-loading-inline").show();btn.addClass("loading").find(".d-loading-none").hide()}function cancelLoading(){$(".ajaxcontainer button.showloading.loading").each(function(){$(this).prop("disabled",false).find(".d-loading-inline").hide();$(this).removeClass("loading").find(".d-loading-none").show()})}function getJSObject(item){var ajaxcontainer=ajax.findAjaxContainer($(item));return ajaxcontainer.data("jsobj")}$(document).on("keyup keypress",'[data-no-submit="true"]',function(e){var keyCode=e.keyCode||e.which;if(keyCode===13){e.preventDefault();return false}});$(document).on("click",".imagezoom",function(e){$("#boxOverLayHeader").html("");$("#boxOverLayFooter").html("");$("#boxOverlayInner").html('<center><img src="'+$(e.target).attr("src")+'" style="max-width:100%"/></center>');$("#boxOverlay").modal("show")});$(document).on("change",".clickable",function(e){var sel=$(e.currentTarget);var option=sel.find("option:selected");if(option.data("link")){window.location.href=option.data("link")}});$(document).on("click",".clickable",function(e){var elem=$(e.target);var tagname=elem.prop("tagName").toLowerCase();while(tagname!="button"&&tagname!="input"&&tagname!="a"&&!elem.hasClass("clickable")){elem=$(elem).parent()}if(tagname==="button"||tagname==="input"||tagname==="a"){e.stopPropagation();return true}e.stopPropagation();if($(this).data("link")){window.location.href=$(this).data("link")}else if($(this).data("check")){$($(this).data("check")).prop("checked",true);if($(this).data("checkgroup")){updateCheckboxes($(this).data("checkgroup"))}$($(this).data("check")).click()}else if($(this).data("callmodalfunction")){ajax.currentModalBoxExecute($(this).data("callmodalfunction"),$(this).data("value"))}});$('input[checked="checked"][type="radio"]').each(function(idx,item){updateCheckboxes($('.clickable[data-check="#'+item.id+'"]').data("checkgroup"))});$(document).on("click",".openoverlay",function(){var data={};data=$(this).data();if(!data.boxCode){return false}if(!data.boxInstance){return false}ajax.showDialog(data.boxCode,data.boxInstance,data)});$(document).ready(function(){if($(".boxCategoryInfo").length>0){box=$(".boxCategoryInfo");region=box.find(".regioncontent");textbreak=region.find("div.textbreak");if(textbreak.length==0)return;region.addClass("hastextbreak");box.height(textbreak.position().top+78).css({overflow:"hidden",position:"relative"});region.height(textbreak.position().top+78).css({overflow:"hidden",position:"relative"});region.append('<button class="textbreakbutton btn btn-primary">Show more...</button>');box.on("click",function(){if(region.height()<=textbreak.position().top+78){region.height("auto").addClass("open");box.height("auto");box.find(".textbreakbutton").css("display","none")}else{region.height(textbreak.position().top+58).css({overflow:"hidden",position:"relative"}).removeClass("open");box.height(textbreak.position().top+58).css({overflow:"hidden",position:"relative"});box.find(".textbreakbutton").css("display","inline-block")}})}});$(document).ajaxComplete(function(){$(".lazy").Lazy()});var hideAllPopovers=function(){$('[data-bs-toggle="popover"]').each(function(){$(this).popover("hide")})};$(function(){var is_touch_device="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;var popoverTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'));var popoverList=popoverTriggerList.map(function(popoverTriggerEl){let popupdata={content:function(){hideAllPopovers();return $($(this).data("content-selector")).html()},html:true};if(is_touch_device&&$(popoverTriggerEl).data("bs-trigger")==="hover"){let mbtrigger=$(popoverTriggerEl).data("bs-mb-trigger");if(mbtrigger)popupdata.trigger=mbtrigger;else popupdata.trigger="click"}return new bootstrap.Popover(popoverTriggerEl,popupdata)});if(is_touch_device)$(document).on("click",'li[data-bs-toggle="popover"] a',function(e){$(this).parent().popover("show");e.preventDefault();e.stopPropagation();return false});if(!getCookie("has_seen_cookie_wall")){var cw=$('<div id="cookiewall" class="cookiewall fixed-bottom"><button class="float-end btn btn-success" onclick="$(\'#cookiewall\').remove()">'+btv_Language.get("cookie_wall_close")+"</button>"+btv_Language.get("cookie_wall_text")+'<br/><a href="/info/cookies">'+btv_Language.get("cookie_wall_more_info")+"</a></div>");$("body").append(cw);setCookie("has_seen_cookie_wall",true)}if(typeof Object.assign!="function"){Object.assign=function(target,varArgs){"use strict";if(target==null){throw new TypeError("Cannot convert undefined or null to object")}var to=Object(target);for(var index=1;index<arguments.length;index++){var nextSource=arguments[index];if(nextSource!=null){for(var nextKey in nextSource){if(Object.prototype.hasOwnProperty.call(nextSource,nextKey)){to[nextKey]=nextSource[nextKey]}}}}return to}}});$(document).on("focus","input[type='text'][data-focus-select]",function(){$(this).select()});function setCookie(name,value,days){var expires="";if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3);expires="; expires="+date.toUTCString()}document.cookie=name+"="+(value||"")+expires+"; path=/"}function getCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null}function eraseCookie(name){document.cookie=name+"=; Max-Age=-99999999;"}$(document).on("click",".spinner button.btn-spinner-lf, .spinner button.btn-spinner-rt",function(){var parent=$(this).parent().parent();var qty=parent.find(".form-control");var q=parseInt($(qty).val());var minv=parseInt($(qty).attr("min"));var maxv=parseInt($(qty).attr("max"));if($(this).hasClass("btn-spinner-lf")){if(minv<q)$(qty).val(q-1)}else if($(this).hasClass("btn-spinner-rt")){var qty=$(this).parent().parent().find(".form-control");if(isNaN(maxv)||maxv>q)$(qty).val(q+1)}qty.trigger("change");if(minv)parent.find(".btn-spinner-lf").prop("disabled",$(qty).val()<=minv);if(maxv)parent.find(".btn-spinner-rt").prop("disabled",$(qty).val()>=maxv)});$(document).on("submit","form",function(event){if(this.checkValidity()===false){event.preventDefault();event.stopPropagation()}else if($(this).data("validation-function")&&!eval($(this).data("validation-function")+"(this)")){event.preventDefault();event.stopPropagation()}var validateevent=jQuery.Event("validate");$(this).trigger(validateevent);if(validateevent.isDefaultPrevented()){event.preventDefault();event.stopPropagation()}setFormValidated(this)});function setFormValidated(form){$(form).addClass("was-validated");$(form).find(".has-feedback .form-control:invalid , .has-feedback .form-control.is-invalid").each(function(idx,field){$(field).parent().find(".invalid-feedback").html(field.validationMessage)})}function updateRequiredFields(){$(".form-control").each(function(idx,item){$(item).parent().find("label .required-indicator").toggleClass("d-none",!$(item).attr("required"))})}
//# sourceMappingURL=rrw.js.map