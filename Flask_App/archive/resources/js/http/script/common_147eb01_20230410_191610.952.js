!function(){Number.prototype.toPad=function(t,e){e=e||10,t=t||2;var i=1*this;i=i.toString(e);for(var n=i.length;t>n;)i="0"+i,n++;return i},Number.prototype.toHEXPad=function(t){t=t||2;for(var e=(1*this).toString(16),i=e.length;t>i;)e="0"+e,i++;return e="0x"+e},Number.prototype.toPercent=function(t){return 0!==t&&(t=t||2),(Math.round(this*Math.pow(10,t+2))/Math.pow(10,t)).toFixed(t)+"%"},Number.prototype.getFlagByBit=function(t){var e=this.toString(2),i=0;t>-1&&t<e.length&&(i=e.charAt(e.length-t-1));var n=0==i?!1:!0;return n},Array.prototype.in_array=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return!0;return!1},Array.prototype.search=function(t){for(var e=0,i=this.length;i>e;e++)if(!0===t(this[e]))return this[e];return null},String.prototype.getBytesLength=function(){for(var t,e=0,i=0;i<this.length;i++)t=this.charCodeAt(i),127>=t?e++:e+=t>=128&&2047>=t?2:t>=2048&&65535>=t?3:4;return e}}(),function(){var t=!1,e=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(i){function n(){!t&&this.init&&this.init.apply(this,arguments)}var o=this.prototype;t=!0;var a=new this;t=!1;for(var r in i)a[r]="function"==typeof i[r]&&"function"==typeof o[r]&&e.test(i[r])?function(t,e){return function(){var i=this._super;this._super=o[t];var n=e.apply(this,arguments);return this._super=i,n}}(r,i[r]):i[r];return n.prototype=a,n.prototype.constructor=n,n.extend=arguments.callee,n}}(),function(t){var e={cls:"",zIndexRelative:-1,shimid:"data-shim"},i={_getPos:function(t){var e={};return e.top=t.css("top"),e.left=t.css("left"),e.width=t.outerWidth(!0),e.height=t.outerHeight(!0),e},_getShim:function(i){var n=i.attr(e.shimid);return void 0===n?n:t("#"+n)},init:function(n){return this.each(function(){var o=t(this);n=t.extend({},e,n),void 0===n.id&&(n.id=this.id+"-shim");var a=i._getShim(o);n.renderTo=void 0===n.renderTo?o.parent():t(n.renderTo),void 0===a&&(n.renderTo.append("<iframe id='"+n.id+"' class='dialog-shim "+n.cls+"' src='' frameborder='0' />"),o.attr(e.shimid,n.id),a=t("#"+n.id));var r=o.css("position");("static"===r||"relative"===r)&&(r="absolute"),a.css({position:r,"z-index":function(){var t=parseInt(o.css("z-index"),10);return t=isNaN(t)?0:t,t+n.zIndexRelative}})})},show:function(){return this.each(function(){var e=t(this),n=i._getShim(e);return void 0===n?e:(i.resize.apply(e),void n.show())})},hide:function(){return this.each(function(){var e=t(this),n=i._getShim(e);return void 0===n?e:(n.hide(),e)})},resize:function(){return this.each(function(){var e=t(this),n=i._getShim(e);if(void 0===n)return e;var o=i._getPos(e);return n.css(o),e})},destory:function(){return this.each(function(){var n=t(this),o=i._getShim(n);return void 0===o?n:(o.remove(),n.removeAttr(e.shimid),n)})}};t.fn.dialogshim=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?t.error("Method "+e+" does not exist on jQuery.dialogshim"):i.init.apply(this,arguments),this}}(jQuery),function(t){var e={cls:"",zIndexRelative:1,fixedHeight:!1,maskid:"data-mask"},i={_getMask:function(i){var n=i.attr(e.maskid);return void 0===n?n:t("#"+n)},init:function(n){return this.each(function(){var o=t(this);n=t.extend({},e,n),void 0===n.id&&(n.id=this.id+"-mask");var a=i._getMask(o);n.renderTo=void 0===n.renderTo?o:t(n.renderTo),void 0===a&&(n.renderTo.append("<iframe id='"+n.id+"' class='dialog-shim white-opacity-3 "+n.cls+"' src='' frameborder='0' />"),o.attr(e.maskid,n.id),a=t("#"+n.id)),a.css({"z-index":function(){var t=parseInt(o.css("z-index"),10);return t=isNaN(t)?0:t,t+n.zIndexRelative}}),!0===n.fixedHeight&&a.height(o.height()),!0===n.preciseMask&&a.css({height:o.outerHeight(),width:o.outerWidth(),top:o.offset().top,left:o.offset().left})})},show:function(){return this.each(function(){var e=t(this),n=i._getMask(e);return void 0===n?e:void n.show()})},hide:function(){return this.each(function(){var e=t(this),n=i._getMask(e);return void 0===n?e:(n.hide(),e)})},destory:function(){return this.each(function(){var n=t(this),o=i._getMask(n);return void 0===o?n:(o.remove(),n.removeAttr(e.maskid),n)})}};t.fn.elemmask=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?t.error("Method "+e+" does not exist on jQuery.elemmask"):i.init.apply(this,arguments),this}}(jQuery),function(t){var e={list:[],col:8,collapsed:!0,cls:"",itemCls:"",getText:function(t){return t},getValue:function(t){return t},getTitle:function(t){return t},hasListen:!0,handler:function(){},selected:-1},i={initSelected:function(t,e){e.selected=e.list.length>0?0:-1,i.setInputVal(t,e)},setInputVal:function(t,e){var i=-1===e.selected?"":e.getText(e.list[e.selected]);t.find("input").val(i)}},n={init:function(o){return this.each(function(){var a=t(this);return void 0!==a.data("data-selectbox")?a:(o=t.extend({},e,o),o.list.length/o.col>o.minRow&&(o.col=o.col/2),void 0===o.id&&(o.id=a.id+"-selectbox-table"),a.addClass("uw-ui-selectbox "+o.cls),a.append('<input type="text" readonly="readonly" /><button hidefocus="true"></button><div id="'+a.id+'-selectbox-popup"><table></table></div>'),a.find("div").dialogshim(),a.data("data-selectbox",o),o.handler=function(){var t=a.data("data-selectbox");a.find("div").hide().dialogshim("hide"),t.collapsed=!0,t=a.data("data-selectbox",t)},i.initSelected(a,o),void a.on("click","input",function(){n.popup.call(a)}).on("mouseup","button",function(){a.find("input").trigger("click").focus()}).on("blur","input",o.handler).on("mouseover","div,button",function(){var t=a.data("data-selectbox");!0===t.hasListen&&(a.off("blur","input",t.handler),t.hasListen=!1,t=a.data("data-selectbox",t))}).on("mouseout","div,button",function(){var t=a.data("data-selectbox");!1===t.hasListen&&(a.on("blur","input",t.handler),t.hasListen=!0,t=a.data("data-selectbox",t))}).on("click","td",function(){var t=a.data("data-selectbox"),e=a.find("td"),i=e.index(this),n=i!==t.selected;t.selected=i,a.find("input").val(t.getText(t.list[i])).focus(),a.find("div").hide().dialogshim("hide"),a.on("blur","input",t.handler),t.collapsed=!0,!1===t.hasListen&&(a.on("blur","input",t.handler),t.hasListen=!0),a.data("data-selectbox",t),n&&a.trigger("change")}))})},val:function(){var e=arguments[0];if(void 0===e){var i=this.data("data-selectbox");return i.selected>=0?i.getValue(i.list[i.selected]):null}return this.each(function(){var e=t(this),i=e.data("data-selectbox"),n=e.find("input");if(!1===i.collapsed&&e.find("div").hide().dialogshim("hide"),i.collapsed=!0,i.selected=-1,"String"===arguments[0]){for(var o=0,a=i.list.length;a>o;o++)if(arguments[0]===i.getValue(i.list[o])){i.selected=o;break}}else"Number"===arguments[0]&&arguments[0]>=0&&arguments[0]>=i.list.length&&(i.selected=arguments[0]);e.data("data-selectbox",i),n.val(-1===i.selected?"":i.getText(i.list[i.selected]))})},popup:function(){return this.each(function(){var e=t(this),i=e.data("data-selectbox");if(!0===i.collapsed){var n=e.find("table"),o='{@each list as item, index}{@if index%col===0}<tr>{@/if}<td class="uw-ui-selectbox-item ${itemCls}" title="${item|renderSelectTitle}">${item|renderSelectItem}</td>{@if index%col===(columns-1)|| index === (list.length - 1)}</tr>{@/if}{@/each}';i.juicer.register("renderSelectItem",i.getText),i.juicer.register("renderSelectTitle",i.getTitle);var a=i.juicer(o,i);i.juicer.unregister("renderSelectItem"),i.juicer.unregister("renderSelectTitle"),n.html(a),-1!==i.selected&&n.find("td").eq(i.selected).addClass("selected"),e.find("div").show().dialogshim("show")}else e.find("div").hide().dialogshim("hide"),e.find("input").focus();i.collapsed=!i.collapsed,e.data("data-selectbox",i)})},load:function(e){return this.each(function(){var n=t(this),o=n.data("data-selectbox");!1===o.collapsed&&(n.find("div").hide().dialogshim("hide"),n.find("input").focus()),o.collapsed=!0,o.list=e,i.initSelected(n,o),n.data("data-selectbox",o)})},get:function(){var t=this.data("data-selectbox");return-1===t.selected?[]:t.list[t.selected]},destory:function(){return this.each(function(){var e=t(this);e.removeData("data-selectbox"),e.html(""),e.off()})}};t.fn.selectbox=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):("object"!=typeof e&&e?t.error("Method "+e+" does not exist on jQuery.selectbox"):n.init.apply(this,arguments),this)}}(jQuery),function(t){var e={cls:"",hasAllPick:!1,title:"",name:"",list:[],getValue:function(t){return void 0===t.stResCode&&(t.stResCode=new Utils.ResCode(t.stResourceCode)),t.stResCode.u8ChlID},getText:function(t){return void 0===t.stResCode&&(t.stResCode=new Utils.ResCode(t.stResourceCode)),t.stResCode.format()},getTitle:function(t){return t.szResourceName||""},getName:function(){return""},getCls:function(){return""}},i={trTmpl:'{@each list as it,index}<tr class="${it|renderLinkTableCls}"><td><label class="ellipsis"><input type="checkbox" name="${it|renderLinkTableName}" value="${it|renderLinkTableValue}" /><span class="uw-ui-linktable-content ellipsis">&nbsp;&nbsp;${it|renderLinkTableText}&nbsp;&nbsp;</span></label></td></tr>{@/each}'},n={init:function(i){return this.each(function(){var o=t(this);i=t.extend({},e,i),i.juicer=i.juicer||juicer,o.addClass("uw-ui-linktable "+i.cls);var a=['<div class="uw-ui-linktable-head ellipsis"><label>','<input type="checkbox" />','<span title="'+i.title+'">&nbsp;&nbsp;',i.title,'&nbsp;&nbsp;</span></label></div><div class="uw-ui-linktable-body"><table><tbody></tbody></table></div>'];!1===i.hasAllPick&&a.splice(1,1),o.html(a.join(""));var r=i.list;delete i.list,o.data("data-linktable",i),n.load.call(o,r),o.on("change",".uw-ui-linktable-head input",function(){var e=t(this).prop("checked");o.find("table input").not(function(){return void 0!==t(this).attr("disabled")}).prop("checked",e)}).on("change","table input",function(){var t=o.find("table input"),e=t.filter(":checked").length===t.length;o.find(".uw-ui-linktable-head input").prop("checked",e)})})},load:function(e){return this.each(function(){var n=t(this),o=n.data("data-linktable");o.juicer.register("renderLinkTableName",o.getName),o.juicer.register("renderLinkTableValue",o.getValue),o.juicer.register("renderLinkTableText",o.getText),o.juicer.register("renderLinkTableCls",o.getCls);var a=o.juicer(i.trTmpl,{list:e});o.juicer.unregister("renderLinkTableName"),o.juicer.unregister("renderLinkTableValue"),o.juicer.unregister("renderLinkTableText"),o.juicer.unregister("renderLinkTableCls"),n.find("tbody").html(a)})},get:function(){var e={};return this.each(function(){for(var i=t(this),n=i.data("data-linktable"),o=n.name.split(" "),a=0,r=o.length;r>a;a++){e[o[a]]=[];for(var s=i.find("table input[name="+o[a]+"]"),d=0,c=s.length;c>d;d++)!0===s.eq(d).prop("checked")&&e[o[a]].push(s.eq(d).val())}}),e},set:function(e){return this.each(function(){{var i,n=t(this);n.data("data-linktable")}for(var o in e){i=n.find("table input[name="+o+"]").prop("checked",!1);for(var a=0,r=e[o].length;r>a;a++)i.filter("[value="+e[o][a]+"]").prop("checked",!0);i.trigger("change")}})},destory:function(){return this.each(function(){})}};t.fn.linktable=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):("object"!=typeof e&&e?t.error("Method "+e+" does not exist on jQuery.linktable"):n.init.apply(this,arguments),this)}}(jQuery),function(t){var e={header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",zIndexRelative:-1},i={_bindEvent:function(e){var i=this,n=t(document);return e.button.on("click.button",function(){e.checkboxContainer.scrollTop(0),e.menu[e._isOpen?"hide":"show"](),e._isOpen=!e._isOpen}),e.header.delegate("a","click.multiselect",function(n){i[t(this).hasClass("ui-multiselect-all")?"_checkAll":"_uncheckAll"](e),n.preventDefault()}),e.checkboxList.on("click.li",function(t){i._updateButtonValue(e),t.stopPropagation()}),e.checkboxContainer.delegate("label","mouseenter.multiselect",function(){t(this).addClass("ui-state-hover")}).delegate("label","mouseleave.multiselect",function(){t(this).removeClass("ui-state-hover")}),n.bind("mousedown",function(i){var n=i.target;!e._isOpen||n===e.button[0]||n===e.menu[0]||t.contains(e.menu[0],n)||t.contains(e.button[0],n)||(e.checkboxContainer.scrollTop(0),e.menu.hide(),e._isOpen=!1)}),e},_checkAll:function(e){var i=e.checkboxList.filter(function(){return t(this).prop("checked")===!1});t.each(i,function(e,i){t(i).prop("checked",!0)}),this._updateButtonValue(e)},_uncheckAll:function(e){var i=e.checkboxList.filter(":checked");t.each(i,function(e,i){t(i).prop("checked",!1)}),this._updateButtonValue(e)},_updateButtonValue:function(t){var e=t.o.noneSelectedText,i=t.checkboxList.filter(":checked"),n=i.length;e=0===n?t.o.noneSelectedText:1===n?i.attr("title"):t.o.selectedText.replace("#",n),t.buttonlabel.text(e)}},n={init:function(n,o){this._isOpen=!1;var a=t.extend({},e,o);if(this.o=a,/\d/.test(a.minWidth))var r=this.o.minWidth;var s=(this.button=t('<button type="button"><span class="ui-icon ui-icon-triangle-1-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-multiselect-button").addClass(a.classes).prop("aria-haspopup",!0).appendTo(t(this)),d=((this.buttonlabel=t("<span />")).html(a.noneSelectedText).appendTo(s),(this.menu=t("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content").addClass(a.classes).appendTo(t(this))),c=(this.header=t("<div />")).addClass("ui-widget-header ui-multiselect-header ui-helper-clearfix").appendTo(d),l=((this.headerLinkContainer=t("<ul />")).addClass("ui-helper-reset").html(function(){return a.header===!0?["<li>",'<a class="ui-multiselect-all" href="#">','<span class="ui-icon ui-icon-check"></span>',"<span>",a.checkAllText,"</span>","</a>","</li>","<li>",'<a class="ui-multiselect-none" href="#">','<span class="ui-icon ui-icon-check"></span>',"<span>",a.uncheckAllText,"</span>","</a>","</li>"].join(""):"string"==typeof a.header?"<li>"+a.header+"</li>":""}).appendTo(c),(this.checkboxContainer=t("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(d));return t.each(n,function(e,i){{var n=e++,o=["ui-corner-all"],a=[],r=t("<li/>").addClass(a.join(" ")).appendTo(l),s=t("<label/>").attr({"for":n,title:i.title}).addClass(o.join(" ")).appendTo(r);t("<input/>").attr({name:"multiselect_"+n,type:"checkbox",value:i.value,title:i.title,id:n}).appendTo(s)}t("<span/>").text(i.title).appendTo(s)}),this.checkboxList=t(l).find('input[type="checkbox"]'),s.outerWidth(r),d.outerWidth(r),l.scrollTop(0).height(a.height),i._bindEvent(this),this},getCheckedOption:function(){var e=t(this).find('input[type="checkbox"]:checked');return e},setOptionChecked:function(e){var i=t(this).find('input[type="checkbox"]');return t.each(i,function(i,n){-1!==t.inArray(t(n).val(),e)?t(n).prop("checked")===!1&&t(n).trigger("click.li"):t(n).prop("checked")===!0&&t(n).trigger("click.li")}),this},destory:function(){return this.each(function(){})}};t.fn.multiSelect=function(e){return n[e]?n[e].apply(this,Array.prototype.slice.call(arguments,1)):("object"!=typeof e&&e?t.error("Method "+e+" does not exist on jQuery.multiSelect"):n.init.apply(this,arguments),this)}}(jQuery);var Utils=function(t,e){var i={flag:!1};return t.extend(e,{dialogExShim:function(){return t.widget("ui.dialog",t.ui.dialog,{_init:function(){!0===this.options.shim&&this._addShim(),this.options.autoOpen&&this.open()},_addShim:function(){this.uiDialog.dialogshim({id:this.element.attr("id")+"-shim"}),this.uiDialog.bind("dialogopen dialogdrag dialogdragstop dialogresize dialogresizestop",function(){t(this).dialogshim("show")}).bind("dialogclose",function(){t(this).dialogshim("hide")})}}),e},dragExShim:function(){return t.widget("ui.draggable",t.ui.draggable,{_createHelper:function(e){var i=this.element.attr("id"),n=this.options,o=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","fixed"),!0===this.options.shim&&this._addShim(o,i),o},_addShim:function(t,e){t.dialogshim({id:e+"-drag-shim",cls:"ui-draggable-dragging-shim",zIndexRelative:999})},_clear:function(){!0===this.options.shim&&this.helper.dialogshim("destory"),this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1}}),t.ui.plugin.add("draggable","shim",{start:function(t,e){e.helper.dialogshim("show")},drag:function(t,e){e.helper.dialogshim("show")}}),e},addShimForDialog:function(){return e.dialogExShim(),e},uiExShim:function(){return!0!==i.flag&&(e.dialogExShim().dragExShim(),i.flag=!0),e}}),e}(jQuery,Utils||{});Utils=function(t,e){return t.extend(e,{CUSTOM_LANG_ENUM:31,ns:function(){var t,e,i,n=arguments,o=null;for(t=0;t<n.length;t+=1)for(i=n[t].split("."),o=window,e=0;e<i.length;e+=1)o[i[e]]=o[i[e]]||{},o=o[i[e]];return o},getSub:function(e){var i;return i=t(void 0===e?"body":"#"+e)},loadLang:function(i,n){void 0===n&&(n=t("body"));var o=function(e,n){return function(o){o.find("["+e+"]").each(function(){for(var o=t(this),a=o.attr(e).split("."),r=i,s=0;s<a.length;s++)r=r[a[s]];return n(o,r),!0})}};return o("data-text",function(t,e){t.text(e).addClass("ellipsis").attr("title",e)})(n),o("data-text-only",function(t,e){t.text(e).addClass("ellipsis")})(n),o("data-title",function(t,e){t.attr("title",e)})(n),e},ajaxSetup:function(i){return t.ajaxSetup({url:"/cgi-bin/main-cgi",cache:!1,async:!0,type:"POST",dataType:"json",error:function(e){if(!0!==t.isFunction(i))return!0;if(0===e.status&&"abort"===e.statusText)return!0;if(599===e.status)i(e.responseJSON.code||e.responseJSON.Response.StatusCode);else{var n=e.status<999?e.status:999;i(n+62e3)}return!0}}),e},ajaxError:function(e,i){if(!0!==t.isFunction(i))return!0;if(599===e.status)i(e.responseJSON.code||e.responseJSON.Response.StatusCode);else{var n=e.status<999?e.status:999;i(n+62e3)}},createBtn:function(e){var i='<button id="${id}" class="custom-btn ${cls}" type="button"><span class="custom-btn-left"></span><span class="custom-btn-center ellipsis" title="${value}">${value}</span><span class="custom-btn-right"></span></button>',n=juicer(i,e);return e.renderTo?t(n).appendTo(t(e.renderTo)):n},chanCodeDecode:function(t){var e=16,i={10:"A",11:"D"};if(e!=t.length)return"";for(var n="",o=[],a=0;e/2>a;a++)o[a]=t.substr(2*a,2);var r=o[0];if(r=i[r],"undefined"==typeof r)return"";var s=parseInt(o[2],16);return isNaN(s)?"":n=r+s},chanCodeDecode_LAPI:function(t){return"D"+t},min:function(){return arguments[0]<=arguments[1]?arguments[0]:arguments[1]},max:function(){return arguments[0]>=arguments[1]?arguments[0]:arguments[1]},log:function(){var e=t.extend([],arguments);try{console.log(e.join(" "))}catch(i){}try{top.Main.Plgn.execFunction("NetSDKWriteWebLog",e.join(" "))}catch(i){}return!0},checkRadio:function(t,e){for(var i=0;i<t.length;i++)if(e==t.eq(i).val())return t.eq(i).prop("checked",!0),!0},destory:function(t){for(var e in t)delete t[e];return void 0},mappingCode:function(t){return parseInt(t,10)+Static.ErrorCode.ERR_PLGN_ERR_BASE},apply:function(t,e){for(var i in t)void 0!==e[i]&&(t[i]=e[i]);return t},deepExtend:function(t,e){for(var i in e)e[i]instanceof Array?(t[i]=[],arguments.callee(t[i],e[i])):e[i]instanceof Function?t[i]=e[i]:e[i]instanceof Date?t[i]=new Date(e[i]):e[i]instanceof Object?(t[i]={},arguments.callee(t[i],e[i])):t[i]=e[i];return t},getSDValue:function(t,e){for(var i=0;i<t.length;i++)if(e==t[i][0])return t[i][1]},getCols:function(t){for(var e=[],i=0;i<t.length;i++){var n={};n.title=t[i][0],n.name=t[i][1],n.width=t[i][2],n.align="center",void 0!==t[i][3]&&(n.renderer=t[i][3]),void 0!==t[i][4]&&(n.rendererTitle=t[i][4]),void 0!==t[i][5]&&(n.lockWidth=t[i][5]),e.push(n)}return e},filterEnumArr:function(t,e){var i=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=[],o=[];i(e)?o=e:o.push(e);for(var a=0,r=t.length;r>a;a++){var s=parseInt(a/32,10);if(void 0!==o[s]){var d=t[a].bitIndex%32,e=parseInt(o[s],10);e.getFlagByBit(d)&&n.push(t[a])}}return n},getCustomLang:function(){var e=655,i=void 0;return t.ajax({url:"/cgi-bin/main-cgi",cache:!1,async:!1,type:"GET",dataType:"text",data:'json={"cmd": '+e+"}",success:function(e){try{i=t.xml2json(e)}catch(n){}return i}}),i},extendCustomLang:function(t,e){if(void 0===e)return t;var i=e.source,n=e.translation;if(void 0!==i&&void 0!==n)for(var o in t){var a=t[o];for(var r in a){for(var s=a[r],d=0;d<i.length;d++)s===i[d]&&(s=n[d]);a[r]=s}}return t},setMaxWidth:function(e){var i=[];if(t(e).each(function(){var e=t(this).width();i.push(e)}),i.length>0){var n=Math.max.apply(null,i);return t(e).css("width",n+1),n}return 0},getAbility:function(){if(void 0!==GLOBAL_INFO.stBrandInfo.au32CoreAbility){for(var t=[{bitIndex:0,valueIndex:0,Ability:"KEYBOARD"},{bitIndex:1,valueIndex:1,Ability:"GB28181"},{bitIndex:2,valueIndex:2,Ability:"RAID"},{bitIndex:3,valueIndex:3,Ability:"GA"},{bitIndex:4,valueIndex:4,Ability:"VPN"},{bitIndex:5,valueIndex:5,Ability:"ANR"},{bitIndex:6,valueIndex:6,Ability:"Security"},{bitIndex:7,valueIndex:7,Ability:"DECODECARD"},{bitIndex:8,valueIndex:8,Ability:"IPv6"},{bitIndex:9,valueIndex:9,Ability:"Intelligent"},{bitIndex:10,valueIndex:10,Ability:"FaceDetect"},{bitIndex:11,valueIndex:11,Ability:"BreakIntoArea"},{bitIndex:12,valueIndex:12,Ability:"CrossLineDetection"},{bitIndex:13,valueIndex:13,Ability:"AudioDetect"},{bitIndex:14,valueIndex:14,Ability:"PassengerFlow"},{bitIndex:15,valueIndex:15,Ability:"IntelligentRetrieval"},{bitIndex:16,valueIndex:16,Ability:"FishEye"},{bitIndex:17,valueIndex:17,Ability:"HA"},{bitIndex:19,valueIndex:19,Ability:"Four"},{bitIndex:20,valueIndex:20,Ability:"Exdisk"},{bitIndex:24,valueIndex:24,Ability:"EconFishEye"}],e={},i=this.filterEnumArr(t,GLOBAL_INFO.stBrandInfo.au32CoreAbility),n=0;n<i.length;n++)e[i[n].Ability]=!0;return e}},addGlobalinfo:function(e){var i={};if(null!==e){var n=t.xml2json(e);if(void 0!==n.CustomMadeCfg&&void 0!==n.CustomMadeCfg.BCustomCfg){var o=n.CustomMadeCfg.BCustomCfg;void 0!==o.CurLanguage&&(i.CurLanguage=o.CurLanguage),void 0!==o.ShowP2pAddr&&(i.ShowP2pAddr=o.ShowP2pAddr),void 0!==o.ShowQRCode&&(i.ShowQRCode=o.ShowQRCode),void 0!==o.PrivateProtocolName&&(i.PrivateProtocolName=o.PrivateProtocolName),void 0!==o.P2PShowUserAndPasswd&&(i.P2PShowUserAndPasswd=o.P2PShowUserAndPasswd),void 0!==o.ShowPrivacyMask&&(i.ShowPrivacyMask=o.ShowPrivacyMask),void 0!==o.ShowTamperingDetection&&(i.ShowTamperingDetection=o.ShowTamperingDetection),void 0!==o.Modify1920_1088Resolution&&(i.Modify1920_1088Resolution=o.Modify1920_1088Resolution),void 0!==o.QRUrl&&(i.QRUrl=o.QRUrl),void 0!==o.ShortenResolutionDisplay&&(i.ShortenResolutionDisplay=o.ShortenResolutionDisplay),void 0!==o.ShowCbrVbr&&(i.ShowCbrVbr=o.ShowCbrVbr),void 0!==o.ShowCustomIPCName&&(i.ShowCustomIPCName=o.ShowCustomIPCName),void 0!==o.SupportCustomPremosaic&&(i.SupportCustomPremosaic=o.SupportCustomPremosaic),void 0!==o.SupportLocalUpgradeIpc&&(i.SupportLocalUpgradeIpc=o.SupportLocalUpgradeIpc)}}return i},LAPIPasswdDecode:function(t){var e=Base64.decode(t).slice(1);return e},LAPIRequestHeaders:function(t){var e=GLOBAL_INFO.stUserInfo.szUserName,i="NVRDVR",n="auth",o="MD5",a="00000001",r=(Math.random()*((new Date).getTime()/1e3)).toFixed(0);return nonce=GLOBAL_INFO.stUserInfo.u32UserLoginHandle,response=hex_md5("682f08d93aa5046a9f56ec72b79f6cfe:"+nonce),ret={},ret.Authorization='Digest username="'+e+'",realm="'+i+'",qop='+n+', nonce="'+nonce+'",algorithm='+o+',cnonce="'+r+'",nc='+a+',uri="'+t+'",response="'+response+'"',ret}}),e}(jQuery,Utils||{}),Utils=function(t,e){var i=window.navigator.platform.toLowerCase(),n=window.navigator.userAgent.toLowerCase(),o=null!==i.match("mac");return t.extend({},e,{isWin32:function(){return"win32"===i},isWin:function(){return null!==i.match("win")},isWin64:function(){return-1===n.indexOf("wow64")&&-1!==n.indexOf("win64")},isMac:function(){return o},getSeparator:function(){return o?"/":"\\"}})}(jQuery,Utils||{}),Utils=function(t,e){return t.extend(e,{iColorShow:function(e,n){var o=t("#"+e).position();t("#iColorPicker").css({top:o.top+t("#"+e).outerHeight()+"px",left:o.left+"px",position:"absolute"}).fadeIn("fast"),t("#iColorPickerBg").css({position:"fixed",top:0,left:0,width:"100%",height:"100%"}).fadeIn("fast");var a=t("#"+e).css("background-color");n&&t("#colorPreview span").text(a),t("#colorPreview").css("background",a),t("#color").val(a);var r=t("#iColorPicker");for(i=0;i<r.length;i++){var s=document.getElementById("hexSection"+i),d=s.childNodes;for(j=0;j<d.length;j++){var c=d[j].childNodes;for(k=0;k<c.length;k++)t(d[j].childNodes[k]).unbind().mouseover(function(){var e="#"+t(this).attr("hx");t("#colorPreview").css("background",e),n&&t("#colorPreview span").text(e)}).click(function(){var i="#"+t(this).attr("hx");t("#"+e).val(i).css("background",i),t("#iColorPickerBg").hide(),t("#iColorPicker").fadeOut(),t(this)})}}},iColorPicker:function(i,n){t("div.iColorPicker").each(function(o){0==o&&(t(document.createElement("div")).attr("id","iColorPicker").css("display","none").html('<table class="pickerTable" id="pickerTable0"><thead id="hexSection0"><tr><td style="background:#f00;" hx="f00"></td><td style="background:#ff0" hx="ff0"></td><td style="background:#0f0" hx="0f0"></td><td style="background:#0ff" hx="0ff"></td><td style="background:#00f" hx="00f"></td><td style="background:#f0f" hx="f0f"></td><td style="background:#fff" hx="fff"></td><td style="background:#ebebeb" hx="ebebeb"></td><td style="background:#e1e1e1" hx="e1e1e1"></td><td style="background:#d7d7d7" hx="d7d7d7"></td><td style="background:#cccccc" hx="cccccc"></td><td style="background:#c2c2c2" hx="c2c2c2"></td><td style="background:#b7b7b7" hx="b7b7b7"></td><td style="background:#acacac" hx="acacac"></td><td style="background:#a0a0a0" hx="a0a0a0"></td><td style="background:#959595" hx="959595"></td></tr><tr><td style="background:#ee1d24" hx="ee1d24"></td><td style="background:#fff100" hx="fff100"></td><td style="background:#00a650" hx="00a650"></td><td style="background:#00aeef" hx="00aeef"></td><td style="background:#2f3192" hx="2f3192"></td><td style="background:#ed008c" hx="ed008c"></td><td style="background:#898989" hx="898989"></td><td style="background:#7d7d7d" hx="7d7d7d"></td><td style="background:#707070" hx="707070"></td><td style="background:#626262" hx="626262"></td><td style="background:#555" hx="555"></td><td style="background:#464646" hx="464646"></td><td style="background:#363636" hx="363636"></td><td style="background:#262626" hx="262626"></td><td style="background:#111" hx="111"></td><td style="background:#000" hx="000"></td></tr><tr><td style="background:#f7977a" hx="f7977a"></td><td style="background:#fbad82" hx="fbad82"></td><td style="background:#fdc68c" hx="fdc68c"></td><td style="background:#fff799" hx="fff799"></td><td style="background:#c6df9c" hx="c6df9c"></td><td style="background:#a4d49d" hx="a4d49d"></td><td style="background:#81ca9d" hx="81ca9d"></td><td style="background:#7bcdc9" hx="7bcdc9"></td><td style="background:#6ccff7" hx="6ccff7"></td><td style="background:#7ca6d8" hx="7ca6d8"></td><td style="background:#8293ca" hx="8293ca"></td><td style="background:#8881be" hx="8881be"></td><td style="background:#a286bd" hx="a286bd"></td><td style="background:#bc8cbf" hx="bc8cbf"></td><td style="background:#f49bc1" hx="f49bc1"></td><td style="background:#f5999d" hx="f5999d"></td></tr><tr><td style="background:#f16c4d" hx="f16c4d"></td><td style="background:#f68e54" hx="f68e54"></td><td style="background:#fbaf5a" hx="fbaf5a"></td><td style="background:#fff467" hx="fff467"></td><td style="background:#acd372" hx="acd372"></td><td style="background:#7dc473" hx="7dc473"></td><td style="background:#39b778" hx="39b778"></td><td style="background:#16bcb4" hx="16bcb4"></td><td style="background:#00bff3" hx="00bff3"></td><td style="background:#438ccb" hx="438ccb"></td><td style="background:#5573b7" hx="5573b7"></td><td style="background:#5e5ca7" hx="5e5ca7"></td><td style="background:#855fa8" hx="855fa8"></td><td style="background:#a763a9" hx="a763a9"></td><td style="background:#ef6ea8" hx="ef6ea8"></td><td style="background:#f16d7e" hx="f16d7e"></td></tr><tr><td style="background:#ee1d24" hx="ee1d24"></td><td style="background:#f16522" hx="f16522"></td><td style="background:#f7941d" hx="f7941d"></td><td style="background:#fff100" hx="fff100"></td><td style="background:#8fc63d" hx="8fc63d"></td><td style="background:#37b44a" hx="37b44a"></td><td style="background:#00a650" hx="00a650"></td><td style="background:#00a99e" hx="00a99e"></td><td style="background:#00aeef" hx="00aeef"></td><td style="background:#0072bc" hx="0072bc"></td><td style="background:#0054a5" hx="0054a5"></td><td style="background:#2f3192" hx="2f3192"></td><td style="background:#652c91" hx="652c91"></td><td style="background:#91278f" hx="91278f"></td><td style="background:#ed008c" hx="ed008c"></td><td style="background:#ee105a" hx="ee105a"></td></tr><tr><td style="background:#9d0a0f" hx="9d0a0f"></td><td style="background:#a1410d" hx="a1410d"></td><td style="background:#a36209" hx="a36209"></td><td style="background:#aba000" hx="aba000"></td><td style="background:#588528" hx="588528"></td><td style="background:#197b30" hx="197b30"></td><td style="background:#007236" hx="007236"></td><td style="background:#00736a" hx="00736a"></td><td style="background:#0076a4" hx="0076a4"></td><td style="background:#004a80" hx="004a80"></td><td style="background:#003370" hx="003370"></td><td style="background:#1d1363" hx="1d1363"></td><td style="background:#450e61" hx="450e61"></td><td style="background:#62055f" hx="62055f"></td><td style="background:#9e005c" hx="9e005c"></td><td style="background:#9d0039" hx="9d0039"></td></tr><tr><td style="background:#790000" hx="790000"></td><td style="background:#7b3000" hx="7b3000"></td><td style="background:#7c4900" hx="7c4900"></td><td style="background:#827a00" hx="827a00"></td><td style="background:#3e6617" hx="3e6617"></td><td style="background:#045f20" hx="045f20"></td><td style="background:#005824" hx="005824"></td><td style="background:#005951" hx="005951"></td><td style="background:#005b7e" hx="005b7e"></td><td style="background:#003562" hx="003562"></td><td style="background:#002056" hx="002056"></td><td style="background:#0c004b" hx="0c004b"></td><td style="background:#30004a" hx="30004a"></td><td style="background:#4b0048" hx="4b0048"></td><td style="background:#7a0045" hx="7a0045"></td><td style="background:#7a0026" hx="7a0026"></td></tr></thead><tbody><tr><td style="border:1px solid #000;background:#fff;cursor:pointer;height:60px;-moz-background-clip:-moz-initial;-moz-background-origin:-moz-initial;-moz-background-inline-policy:-moz-initial;" colspan="16" align="center" id="colorPreview"></td></tr></tbody></table><style>#iColorPicker input{margin:2px}</style>').appendTo("body"),n&&t("#colorPreview").html('<span style="color:#000;border:1px solid rgb(0, 0, 0);padding:5px;background-color:#fff;font:11px Arial, Helvetica, sans-serif;"></span>'),t(document.createElement("div")).attr("id","iColorPickerBg").click(function(){t("#iColorPickerBg").hide(),t("#iColorPicker").fadeOut()}).appendTo("body"),t("table.pickerTable td").css({width:"12px",height:"14px",border:"1px solid #000",cursor:"pointer"}),t("#iColorPicker table.pickerTable").css({"border-collapse":"collapse"}),t("#iColorPicker").css({border:"1px solid #ccc",background:"#333",padding:"5px",color:"#fff","z-index":9999})),t("#colorPreview").css({height:"50px"}),t("div.iColorPicker").click(function(){e.iColorShow(i,n)})})},hex2Rgb:function(t){var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/g,i=t.toLowerCase();if(i&&e.test(i)){if(4===i.length){for(var n="#",o=1;4>o;o+=1)n+=i.slice(o,o+1).concat(i.slice(o,o+1));i=n}for(var a=[],o=1;7>o;o+=2)a.push(parseInt("0x"+i.slice(o,o+2)));return"RGB("+a.join(",")+")"
}return i},rgb2Hex:function(t){if("#"==t.charAt(0))return t;var e=t.split(/\D+/),i=("000000"+(e[1]<<16|e[2]<<8|e[3]).toString(16)).slice(-6);return"#"+i},rgb2Int:function(t){if("rgb"!==t.slice(0,3))return t;var e=t.split(/\D+/),i=e[1]<<16|e[2]<<8|e[3];return i},hex2Int:function(t){var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/g;return t&&e.test(t)?(4===t.length&&(t=["#",t.charAt(1),t.charAt(1),t.charAt(2),t.charAt(2),t.charAt(3),t.charAt(3)].join("")),parseInt(t.slice(1),16)):t}}),e}(jQuery,Utils||{}),Utils=function(t,i){return i.Player=Class.extend({clsid:"9F022729-5484-4623-B197-9B79F3665D33",application:"netsdkplayer-plugin",eventname:"plgnevent",prefix:"__",maxWnd:64,focusColor:parseInt("ffcc00",16),unfocusColor:parseInt("666666",16),backgColor:parseInt("222222",16),init:function(e){return this.eventObj=t("#"+e.container),void 0!==e.prefix&&(this.prefix=e.prefix),void 0!==e.maxWnd&&(this.maxWnd=e.maxWnd),void 0!==e.focusColor&&(this.focusColor=parseInt(e.focusColor,16)),void 0!==e.unfocusColor&&(this.unfocusColor=parseInt(e.unfocusColor,16)),void 0!==e.backgColor&&(this.backgColor=parseInt(e.backgColor,16)),void 0!==window.ActiveXObject?this.loadActivex(e):this.loadNpapi(e),this.on(e),this.onInit(e),this},loadActivex:function(t){return this.eventObj.show().html("<object classid='clsid:"+this.clsid+"' id='"+t.id+"' class='plugin' events='true' wmode='transparent'></object>"),this.obj=document.getElementById(t.id),this.parseHostname(t),this.onActivexLoad(t),this},setParam:function(t,e,i,n,o,a,r,s,d,c){var l=[t,e,i,n,o,a,r,s,d,c];return top.JSON.stringify(l)},execFunction:function(t,e,i,n,o,a,r,s,d,c,l){var u=this.setParam(e,i,n,o,a,r,s,d,c,l),h=top.JSON.parse(this.obj.NetSDKExecFun(t,u));return 0!==h.code?h.code:h.result},execFunctionReturnAll:function(t,e,i,n,o,a,r,s,d,c,l){return top.JSON.parse(this.obj.NetSDKExecFun(t,this.setParam(e,i,n,o,a,r,s,d,c,l)))},onActivexLoad:function(t){return this.addActivexBehaviors(t)},addActivexBehaviors:function(t){try{void 0===this.noCreateWnd&&this.execFunction("NetSDKCreateWnd",this.maxWnd,this.focusColor,this.unfocusColor,this.backgColor),this.execFunction("NetSDKInitOCX",t.stPortInfo.szDeviceIp)}catch(e){}return void 0===this.obj.attachEvent?this.attachIE11Event(t.id,"NetSDKRUNINFO",t.name+".trigger(p1, p2, p3, p4);"):this.obj.attachEvent("NetSDKRUNINFO",function(t){return function(e,i,n,o){t.trigger(e,i,n,o)}}(this)),this},attachIE11Event:function(t,e,i){var n,o=i.match(/\(\)|\(.+\)/)[0],a=i.match(/^([^(\s]+)/)[1];try{n=document.createElement("script"),n.setAttribute("for",t)}catch(r){n=document.createElement('<script for="'+t+'">')}return n.event=e+o,n.appendChild(document.createTextNode(a+o+";")),this.eventObj.get(0).appendChild(n),this},loadNpapi:function(t){if(this.eventObj.show().html("<embed type='application/"+this.application+"' id='"+t.id+"' class='plugin' wmode='transparent' />"),this.obj=document.getElementById(t.id),this.parseHostname(t),this.onNpapiLoad(t),void 0===t.stPortInfo)return this;try{void 0===this.noCreateWnd&&this.execFunction("NetSDKCreateWnd",this.maxWnd,this.focusColor,this.unfocusColor,this.backgColor),this.execFunction("NetSDKInitOCX",t.stPortInfo.szDeviceIp),this.obj.NetSDKNPSetEventFunc(t.name+".trigger")}catch(e){}return this},onNpapiLoad:function(){return this},setTrustSite:function(t){if(void 0!==t){try{this.execFunction("NetSDKSetTrustSite",t)}catch(e){}return this}},parseHostname:function(){},onInit:function(){return this},unInit:function(){if(void 0===this.obj)return this;this.beforeUninit();try{this.execFunction("NetSDKUninitOCX")}catch(t){}return this.eventObj.hide().get(0).removeChild(this.obj),delete this.obj,this},beforeUninit:function(){return this},trigger:function(t,e,i,n){return this.eventObj.trigger(this.eventname,[t,e,i,n]),this},on:function(t){if(void 0===t.events)return this;var e=t.events;return this.eventObj.on(this.eventname,this,function(t,i,n,o,a){return void 0===e||void 0===e[t.data.prefix+i]?!0:void e[t.data.prefix+i](n,o,a)}),this},focus:function(){try{this.execFunction("NetSDKActiveWnd")}catch(t){}return this},check:function(t){if(Static.ErrorCode.ERR_COMMON_SUCCEED!==t)throw t}}),i.Frame=i.Player.extend({clsid:"9F022729-5484-4623-B197-9B79F3665D33",application:"netsdkplayer-plugin",serial:1e3,versionWin32:"0.5.0.10",versionWin64:"1.0.0.0",versionMAC:"1.1.0.2",noCreateWnd:!0,onInit:function(t){if(void 0===t.stPortInfo||void 0===t.stUserInfo)return this;try{var e=this.execFunction("NetSDKGetLocalPort",this.serial);this.execFunction("NetSDKOpenMsgMutual",t.stUserInfo.szUserName,t.stUserInfo.u32UserLoginHandle.toString(10),e,t.stPortInfo.u16HTTPPort)}catch(i){}return this},parseHostname:function(t){var e=new RegExp(/^\d+\.\d+\.\d+\.\d+$/);if(void 0===t.stPortInfo||void 0===t.stPortInfo.szDeviceIp)return this;var i=t.stPortInfo.szDeviceIp;if(!e.test(i)){try{i=this.execFunction("NetSDKSwitchDomainToIP",i),""==i&&(i=t.stPortInfo.szDeviceIp)}catch(n){i=t.stPortInfo.szDeviceIp}t.stPortInfo.szDeviceIp=i}return t.initPortInfo(),this},beforeUninit:function(){return this.stopKeepAlive()},onActivexLoad:function(t){if(this.newVersion=this.getVersion(),void 0!==t.hostName){try{this.execFunction("NetSDKSetTrustSite",t.hostName)}catch(e){}return this}return this.addActivexBehaviors(t)},onNpapiLoad:function(t){if(this.newVersion=this.getVersion(),void 0!==t.hostName){try{this.execFunction("NetSDKSetTrustSite",t.hostName)}catch(e){}return this}},stopKeepAlive:function(){try{this.execFunction("NetSDKCloseMsgMutual")}catch(t){}return this},getVersion:function(){var t=null;try{t=this.execFunction("NetSDKGetVersion")}catch(e){t=null}return t},checkVersion:function(){var t=this.newVersion,e=i.isMac()?this.versionMAC:i.isWin64()?this.versionWin64:this.versionWin32;if(null===t&&((i.isMac()||i.isWin64())&&(t=this.getVersion()),null===t))return!1;var n=t.split("."),o=e.split(".");if(4!=n.length)return!1;for(var a=0;4>a;a++)if(n[a]=parseInt(n[a],10),o[a]=parseInt(o[a],10),n[a]!=o[a]){if(n[a]>o[a])return!0;if(n[a]<o[a])return!1}return!0},createTip:function(t,e){var n=function(t){return Static.CustomizeType.UNIVIEW===t||Static.CustomizeType.UNV===t?!0:!1},o="http://mycloud.uniview.com/plugins/64bit/",a="http://mycloud.uniview.com/plugins/mac/",r="",s=t.Text.TipActiveXFailedWin64MAC.replace("%s","");if(i.isWin64())r=n(e)?o+"WebPlayer.exe":o+"Surveillance.exe";else if(!0===i.isMac())r=n(e)?a+"WebPlayer.dmg":a+"Surveillance.dmg";else{r="/ActiveX/WebPlayer.exe";var s="<a class='download' href='"+r+"' target='_self' title='"+t.Text.TipDownloadPlugin+"'>"+t.Text.TipActiveXFailed.replace("%s","")+"</a>"}return s}}),i.Msg=Class.extend({init:function(t){return this.rendered=!1,this.renderTo=t.renderTo,this.relativeWidth=void 0===t.relativeWidth?2:t.relativeWidth,this.getHtml=void 0===t.getHtml?this.getHtml:t.getHtml,this.lang=t.lang,this},getHtml:function(){return'<div id="msg" class="msg hidden"><button class="icon msg-icon"></button><span class="msg-detail ellipsis"></span><button class="icon msg-close" data-title="Text.Close"></button></div>'},show:function(e){if(e=t.extend({},{autoHide:!1,suffix:"",priority:0,execFunc:void 0,codeExec:!1},e),this.priority>e.priority)return this;if(void 0===e.code||0===e.code||"0"===e.code||!0===e.code)return this;var i=this._get();return this.priority=e.priority,this._replace(i,e),this.resize(),i.removeClass("hidden").dialogshim("show"),void 0!==e.execFunc&&"function"==typeof e.execFunc&&t("a[class='a-exec-func']").click(this,function(){e.execFunc()}),!0===e.autoHide&&(this.timeoutID=window.setTimeout(function(t){return function(){return t.hide(),!0}}(this),3e3)),this},hide:function(){if(void 0===this.id)return this;var t=this._get();return t.dialogshim("hide").addClass("hidden"),this.priority=0,this},resize:function(){if(void 0===this.id)return this;var e=this._get(),i=t("#"+this.renderTo),n=i.outerWidth();e.width(n-this.relativeWidth),e.find(".msg-detail").width(n-this.width);var o=i.position();return e.css({left:o.left,top:o.top}).dialogshim("resize"),this},_get:function(){return this.clearTimer(),void 0===this.id?this._create():t("#"+this.id)},_create:function(){var e=this.getHtml(),n=t("#"+this.renderTo),o=t(e).appendTo(n);return this.id=o.attr("id"),i.loadLang(this.lang,o),o.dialogshim({id:this.id+"-shim"}),o.attr("title",this.lang.Text.TipDbClickClose),this._getWidth()._on(o),o},_on:function(){return t("#"+this.id+" .msg-close").click(this,function(t){return t.data.hide(),!0}),t("#"+this.id).dblclick(this,function(t){return t.data.hide(),!0}).mouseenter(this,function(t){return t.data.clearTimer(),!0}).mouseleave(this,function(t){return t.data.clearTimer(),!0}),t(window).resize(this,function(t){return t.data.resize(),!0}),this},_getWidth:function(){var t=this._get();return this.width=t.find(".msg-icon").outerWidth(!0)+t.find(".msg-close").outerWidth(!0)+10,this},_replace:function(t,e){var i=this.lang.Error["E"+e.code];void 0===i&&(i=this.lang.Error.Default),i+=e.suffix,!0===e.codeExec&&(i='<a class="a-exec-func">'+i+"</a>"),t.find(".msg-detail").html(i)},clearTimer:function(){return"number"==typeof this.timeoutID&&(window.clearTimeout(this.timeoutID),delete this.timeoutID),!0}}),i.ResCode=Class.extend({init:function(t){this.stResourceCode=t;var e=t.match(/.{2}/g);return this.u8DevType=parseInt(e[0],16),this.u8MappingChlIndex=parseInt(e[2],16),this.u8ResType=parseInt(e[4],16),this.u8ChlID=parseInt(e[7],16),this},formatDevType:function(){var t="";switch(this.u8DevType){case Static.DevType.DEV_ANALOG_ENCODER:t="A";break;case Static.DevType.DEV_DIGITAL_ENCODER:t="D";break;case Static.DevType.VIR_DIGITAL_ENCODER:t="V"}return t},formatMapIdx:function(){return 0===this.u8MappingChlIndex?"":this.u8MappingChlIndex.toString()},format:function(){var t,e=this.formatDevType(),i=this.formatMapIdx(),n=this.u8ChlID.toString();switch(this.u8ResType){case Static.ResType.RES_VIDEO_IN_CHL:t=e+i;break;case Static.ResType.RES_ALARM_IN_CHL:t="A"===e?e+"<-"+n:e+i+"<-"+n;break;case Static.ResType.RES_ALARM_OUT_CHL:t="A"===e?e+"->"+n:e+i+"->"+n}return t}}),i.Dialog=Class.extend({init:function(e){return this.opts=t.extend({},{id:"",renderTo:"body",dialogClass:"",btnCls:"",html:"",lang:top.Main.Language,autoOpen:!1,hasCancel:!0,width:200,position:{my:"center",at:"center",of:window},mask:!0,init:function(){},open:function(){},close:function(){},sure:function(){},destory:function(){}},e),this.opts.init(),!0===e.autoOpen&&this.show(),this},get:function(){var e=t("#"+this.opts.id);return 0===e.length&&(e=this.create()),e},create:function(){var e=this,n=t(this.opts.html).appendTo(this.opts.renderTo).dialog({closeText:this.opts.lang.Text.Close,autoOpen:!1,draggable:!1,resizable:!1,title:this.opts.title,width:this.opts.width,dialogClass:this.opts.dialogClass,position:this.opts.position,open:function(){!0===e.opts.mask&&t("body").elemmask().elemmask("show"),e.opts.open(),n.trigger("uw.dialog.open")},close:function(){!0===e.opts.mask&&t("body").elemmask("hide"),e.opts.close(),n.trigger("uw.dialog.close")},buttons:[{click:function(){t(this).dialog("close")}}]});return i.loadLang(this.opts.lang,n),this.createBtn(n),delete this.juicer,delete this.renderTo,delete this.cls,delete this.btnCls,delete this.tmpl,delete this.autoOpen,delete this.hasCancel,delete this.width,delete this.mask,n},createBtn:function(t){var e=t.dialog("widget").find(".ui-dialog-buttonset").html("");return i.createBtn({id:this.opts.id+"Sure",renderTo:e,cls:this.opts.btnCls,value:this.opts.lang.Text.Sure}).click(this,function(e){return!1===e.data.opts.sure()?!1:(t.trigger("uw.dialog.sure"),t.dialog("close"),!0)}),!0===this.opts.hasCancel&&i.createBtn({id:this.opts.id+"Cancel",renderTo:e,cls:this.opts.btnCls,value:this.opts.lang.Text.Cancel}).click(function(){t.trigger("uw.dialog.cancel"),t.dialog("close")}),this},show:function(){var t=this.get();return t.dialog("open"),t.find(":input").get(0).focus(),t.trigger("uw.dialog.show"),this},hide:function(){var t=this.get();return t.dialog("close"),t.trigger("uw.dialog.show"),this},destory:function(){var t=this.get();return t.dialog("destory"),this.opts.destory(),this}}),i.Download=Class.extend({renderTo:null,msg:null,sub:null,lang:null,bIsHide:!0,id:"download-task-dialog",tpl:"",init:function(t){return this.renderTo=t.renderTo,this.msg=t.msg,this.sub=t.sub,this.lang=t.lang,this.map={},this.map[Static.DownloadStatus.FINISHED]=this.lang.DownloadFinish2,this.map[Static.DownloadStatus.ERROR]=this.lang.DownloadFailed,this.map[Static.DownloadStatus.DOWNLOADING]=this.lang.Downloading,this.map[Static.DownloadStatus.WAITING]=this.lang.DownloadWaiting,this.map[Static.DownloadStatus.CANCELED]=this.lang.DownloadCanceled,this.map[Static.DownloadStatus.STARTING]=this.lang.DownloadStarting,this.on(),this},on:function(){return this.sub.on("download.showdetail",this,function(t,e){t.data.show(e)}).on("download.add download.startfaild download.schedule download.start download.stop download.error",this,function(t,e){t.data.refresh(e)}).on("download.succeed",this,function(t,e,i){t.data.msg.show({code:Static.ErrorCode.ERR_DOWNLOAD_SUCCEED,suffix:'<a class="a-exec-func">'+i+"</a>",execFunc:function(){top.Main.Plgn.execFunction("NetSDKOpenFileFloder",i)}})}).on("download.error download.startfaild ",this,function(t,e,i){t.data.msg.show({code:i})}).on("download.diskerror",this,function(t){t.data.msg.show({code:Static.ErrorCode.ERR_XP_DISK_CAPACITY_NOT_ENOUGH,priority:99})}).on("download.notrust",this,function(t){t.data.msg.show({code:Static.ErrorCode.ERR_RECORD_FAIL_NO_TRUST,priority:99})}).on("download.subPacketFialed",this,function(){e.data.msg.show({code:Static.ErrorCode.ERR_XP_CREAT_FILE_FAIL_WHEN_SUB_PACKET,priority:99})}).on("download.remove",this,function(e,i){t("#"+e.data.prefix+i.key).remove()}).on("download.removeAll",this,function(e){t("#"+e.data.id).find(".download-task").remove()}),this},show:function(t){return this.bIsHide=!1,this.get(!0).dialog("open"),this.showList(t),this},hide:function(){return this.bIsHide=!0,this.get().dialog("close"),this},get:function(e){var i=t("#"+this.id);return 0===i.length&&!0===e&&(i=this.create()),i},create:function(){var e=t('<div id="'+this.id+'" title="'+this.lang.DownloadTaskList+'"><div class="table-container download-task-list"><table class="fixed-table-header"><tr><td class="first-column download-task-no">'+this.lang.SerialNo+'</td><td class="download-task-cam">'+this.lang.Camera+'</td><td class="download-task-pro">'+this.lang.Progress2+'</td><td class="download-task-sta">'+this.lang.State+'</td><td class="download-task-opt">'+this.lang.Close+'</td><td class="fixed-table-scroll"></td></tr></table><div class="fixed-table-container"><table class="fixed-table-body"></table></div></div></div>').appendTo(this.renderTo);e.dialog({closeText:this.lang.Close,shim:!0,modal:!1,draggable:!1,resizable:!1,autoOpen:!1,minWidth:720,buttons:[{}]});var n=e.dialog("widget").find(".ui-dialog-buttonset").html("");return i.createBtn({id:"",renderTo:n,cls:"",value:this.lang.CloseAll}).click(this,function(t){t.data.deleteAllTask()}),i.createBtn({id:"",renderTo:n,cls:"",value:this.lang.Cancel}).click(function(){e.dialog("close")}),e.on("click",".download-task-opt button",this,function(e){var i=t(this).parents(".download-task");e.data.deleteTask(i)}).on("click",".download-task",this,function(i){if("button"!==i.target.tagName.toLocaleLowerCase()){e.find(".download-task").removeClass("active");{t(this).addClass("active")}}}),this.prefix="downloadTask",this.tpl='{@each astTaskList as it}<tr class="download-task" id="'+this.prefix+'${it.key}"><td class="first-column download-task-no">${it.key|showDownloadIndex}</td><td class="download-task-cam ellipsis" title="${it.szResourceName}">${it.szResourceName}</td><td class="download-task-pro"><div class="download-percent-container" title="${it.szFileName}"><div class="download-percent" style="width: ${it.u32Rate}%;"></div></div><span class="download-content-percent">${it.u32Rate}%</span></td><td class="download-task-sta ellipsis" title="${it.status|showDownloadStatus}">${it.status|showDownloadStatus}</td><td class="download-task-opt"><button class="icon msg-close" title="'+this.lang.Close+'"></button></td></tr>{@/each}',juicer.register("showDownloadIndex",function(t){return parseInt(t,10)+1}),juicer.register("showDownloadStatus",function(t){return function(e){return t.getStatusSpec(e)}}(this)),e},getStatusSpec:function(t){return this.map[t]},refresh:function(e){if(!0===this.bIsHide)return this;var i=t("#"+this.prefix+e.key);if(0===i.length)this.append([e]);else{var n=this.getStatusSpec(e.status);i.find(".download-percent").css("width",e.u32Rate+"%"),i.find(".download-content-percent").html(e.u32Rate+"%"),i.find(".download-task-sta").html(n).attr("title",n)}return this},deleteAllTask:function(){this.sub.trigger("download.delall")},getActiveEl:function(e){return t("#"+e.data.id).find(".download-task.active")},getKeyById:function(t){var e=this.prefix.length;return parseInt(t.substring(e),10)},deleteTask:function(t){var e=this.getKeyById(t.attr("id"));return this.sub.trigger("download.del",[e]),this},showList:function(e){return!0===this.bIsHide?this:(t("#"+this.id).find(".fixed-table-body").html(""),this.append(e),this)},append:function(e){var i=juicer(this.tpl,{astTaskList:e}),n=t("#"+this.id);n.find(".fixed-table-body").append(i);var o="replay-download-content-deep";return n.find(".download-task").removeClass(o).filter(":even").addClass(o),this},destory:function(){return juicer.unregister("showDownloadIndex"),juicer.unregister("showDownloadStatus"),this.get().dialog("destory"),this}}),i.Base64=Class.extend({init:function(){this.base64encodechars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.base64decodechars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)},encode:function(t){var e,i,n,o,a,r;for(n=t.length,i=0,e="";n>i;){if(o=255&t.charCodeAt(i++),i==n){e+=this.base64encodechars.charAt(o>>2),e+=this.base64encodechars.charAt((3&o)<<4),e+="==";break}if(a=t.charCodeAt(i++),i==n){e+=this.base64encodechars.charAt(o>>2),e+=this.base64encodechars.charAt((3&o)<<4|(240&a)>>4),e+=this.base64encodechars.charAt((15&a)<<2),e+="=";break}r=t.charCodeAt(i++),e+=this.base64encodechars.charAt(o>>2),e+=this.base64encodechars.charAt((3&o)<<4|(240&a)>>4),e+=this.base64encodechars.charAt((15&a)<<2|(192&r)>>6),e+=this.base64encodechars.charAt(63&r)}return e},decode:function(t){var e,i,n,o,a,r,s;for(r=t.length,a=0,s="";r>a;){do e=this.base64decodechars[255&t.charCodeAt(a++)];while(r>a&&-1==e);if(-1==e)break;do i=this.base64decodechars[255&t.charCodeAt(a++)];while(r>a&&-1==i);if(-1==i)break;s+=String.fromCharCode(e<<2|(48&i)>>4);do{if(n=255&t.charCodeAt(a++),61==n)return s;n=this.base64decodechars[n]}while(r>a&&-1==n);if(-1==n)break;s+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(o=255&t.charCodeAt(a++),61==o)return s;o=this.base64decodechars[o]}while(r>a&&-1==o);if(-1==o)break;s+=String.fromCharCode((3&n)<<6|o)}return s}}),i.PackBits=Class.extend({init:function(){this.Base64=new i.Base64},packbits:function(t){var e,i,n,o=[],a=0,r=0,s=0,d=t.length;for(n=0,i=0;d>0;n=e,d-=r)if(s=128>d?d:128,d>=3&&t[n+1]==t[n]&&t[n+2]==t[n]){for(e=n+3,a=3;s>a&&t[e]==t[n];a++)++e;r=a,o[i++]=257-r,o[i++]=t[n]}else{for(e=n,a=0;s>a&&!(d>=a+3&&t[e+1]==t[e]&&t[e+2]==t[e]);a++)++e;r=a,o[i++]=r-1,o=o.concat(t.slice(n,n+r)),i+=r}return o},unpackbits:function(t){var e,i,n,o,a=[],r=t.length;for(e=0;r>1;)if(n=t[e++],--r,128!=n)if(n>128)for(n=257-n,o=t[e++],--r,i=0;n>i;i++)a.push(o);else{if(++n,n>r)break;a=a.concat(t.slice(e,e+n)),e+=n,r-=n}return a},encodeData:function(t){var e,i="",n=t;for(n=this.packbits(n),e=0,len=n.length;len>e;e++)i+=String.fromCharCode(n[e]);return this.Base64.encode(i)},decodeData:function(t){var e,i,n=[];for(t=this.Base64.decode(t),e=0,i=t.length;i>e;e++)n.push(t.charCodeAt(e));return n=this.unpackbits(n)}}),i}(jQuery,Utils||{});